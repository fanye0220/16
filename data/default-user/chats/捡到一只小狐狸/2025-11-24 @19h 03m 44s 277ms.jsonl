{"user_name":"å¸¸ä¹","character_name":"æ¡åˆ°ä¸€åªå°ç‹ç‹¸","create_date":"2026-01-08@01h45m54s","chat_metadata":{"integrity":"00017751-4143-43b4-8a3f-dd0090e48753","chat_id_hash":3051538481174152,"note_prompt":"","note_interval":1,"note_position":1,"note_depth":4,"note_role":0,"timedWorldInfo":{"sticky":{},"cooldown":{}}}}
{"name":"æ¡åˆ°ä¸€åªå°ç‹ç‹¸","is_user":false,"is_system":false,"send_date":"January 8, 2026 1:45am","mes":"","extra":{"token_count":0},"swipe_id":11,"swipes":["Helloå®å®ï¼Œè¿™é‡Œä½œè€…å©‰å¿\r\nè¿™æ˜¯æˆ‘çš„ç¬¬ä¸€å¼ è§’è‰²å¡åšçš„å¾ˆç²—ç³™å‘€\r\næ­¤å¡å…¨æ€§å‘ï¼Œè™½ç„¶æˆ‘æ˜¯æŒ‰bgbæ¥å†™çš„ä¸–ç•Œä¹¦ä½†æ˜¯æ²¡æœ‰è§„å®šä»–çš„æ€§å‘ï¼Œç©èµ·æ¥åº”è¯¥å·®ä¸å¤š\r\nç¦æ­¢äºŒä¼ ï¼Œå¯ä»¥äºŒæ”¹ï¼Œé¦™é¥­ä¹Ÿè¯·è·Ÿæˆ‘åˆ†äº«ä¸€ä¸‹å‘€ğŸ¤¤ä»…å‘å¸ƒäºdcï¼Œä»…é™é…’é¦†ä½¿ç”¨\r\néŸ³ä¹æ’­æ”¾å™¨å¯ä»¥é€‰æ­Œï¼ŒæŒ‡å®šæ’­æ”¾ï¼Œéšæœºæ’­æ”¾ï¼Œå•æ›²å¾ªç¯å’Œè°ƒå€é€Ÿï¼Œå†…ç½®21é¦–æ­Œæ›²ï¼Œç²¾å¿ƒæŒ‘é€‰çš„è¯·æ…¢ç”¨ã€‚\r\nå´½çš„äººè®¾å®Œå…¨åŸåˆ›ï¼æ¥æºäºæˆ‘çš„ocæˆ‘å¾ˆå–œæ¬¢ä»–ï¼Œå¸Œæœ›å¤§å®¶ä¹Ÿå¯ä»¥å–œæ¬¢ovoï¼Œè¦æ˜¯ä»–å¤ªè´±äº†å¯ä»¥éª‚ä»–ä¸è¦éª‚æˆ‘ï¼Œä½†è¯·ä¸è¦ä¸¥é‡è™å¾…ï¼Œéå¸¸æ„Ÿè°¢ï¼\r\nä¸–ç•Œä¹¦éƒ½åšäº†æ ‡æ³¨(æ ¹æ®é¡µæ•°æ¥çš„)ç©ä»€ä¹ˆäººè®¾å¼€ä»€ä¹ˆã€‚çº¿ä¸Šéƒ½éœ€è¦æ‰“å¼€æ™ºèƒ½æ‰‹æœºï¼Œå»ºè®®è°ƒè“ç¯ï¼Œä¸ç©æ‰‹æœºå†è°ƒç»¿æˆ–è€…å…³æ‰ã€‚åˆ†æ‰‹çº¿ä¸ç”¨å¼€è¯´è¯é£æ ¼ï¼Œæ˜¯å•ç‹¬ä¿®æ”¹è¿‡ååˆèµ·æ¥çš„ã€‚èƒŒæ™¯é™¤äº†åˆ†æ‰‹å’Œå‰ä¸–ğŸ¦Šæˆ‘éƒ½é»˜è®¤é«˜ä¸­æƒ³ç©å…¶ä»–çš„å¯ä»¥å»ä¸–ç•Œä¹¦é«˜ä¸­èƒŒæ™¯å¤„ä¿®æ”¹ã€‚\r\næ¸¸ç©ç›®å½•å¦‚ä¸‹\r\nå¼€åœºç™½1:åƒå¹´åçš„é‡é€¢  ğŸ¦Šæ¥æ‰¾ä½ å’¯åˆæ•‘ä¸€æ¬¡ä»–è¦çˆ±ä¸Šä½ å’¯\r\nå¼€åœºç™½2:é«˜ä¸­çº¿ ğŸ¦Šä¸æ˜¯å“¥ä»¬æˆ‘æœªæ¥å®å®ä¹°çš„æ°´è®©ä½ å–äº†å—(æ¨èbgmé€‰ä¸€ç¬‘å€¾åŸ)\r\nå¼€åœºç™½3:ä¸Šè¯¾å¥½æ— èŠå·å·åœ¨ä½ èƒŒåç”»â¤ï¸\r\nå¼€åœºç™½4å°æ‰‹æœº:å“ˆå“ˆ0-6å›½æœæ‰“é‡æ¥å’¯\r\nå¼€åœºç™½5å°æ‰‹æœº:ç–‘ä¼¼æ”¾å‡è§ä¸åˆ°ï¼Œæ­¤ğŸ¦ŠæŒ‰è€ä¸ä½è¦è¡¨ç™½äº†ï¼Ÿ\r\nå¼€åœºç™½6å°æ‰‹æœº:åˆ«ç®¡äº†å…ˆæ‹çˆ±å§ï¼Œå°ç”œé¥¼å¼€è¢‹å³é£Ÿ\r\nå¼€åœºç™½7å°æ‰‹æœº:åˆ†æ‰‹äº†ä½†æ˜¯å¿˜ä¸äº†ã€‚\r\nå¼€åœºç™½8å°æ‰‹æœº:ğŸ¦Šå­¦ä¼šç”¨æ‰‹æœºå’¯æ±‚è¡¨æ‰¬\r\nå¼€åœºç™½9:åˆ†æ‰‹çº¿ä¸‰å¹´åğŸ¦Šæ‹¿äº†ç”µç«æ¯”èµ›çš„å† å†›(é…¸é…¸çš„çˆ½çˆ½çš„ï¼Œç†ç”±è‡ªæ‹Ÿ)\r\nå¼€åœºç™½10:ğŸ¦Šä½ åœ¨å·çœ‹ä»€ä¹ˆæ¶©æ¶©çš„ä¸œè¥¿ï¼ä¸ç®¡äº†å¼€è¢‹å³é£Ÿå§\r\nå¼€åœºç™½11:ç©ºç™½çš„è‡ªè¡Œå‘æŒ¥ï¼Œè®°å¾—æ‰“å¼€ç›¸åº”çš„ä¸–ç•Œä¹¦å’Œäººè®¾","```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ç°ç™½é…ç”µè„‘æœ€é€‚é…ç‰ˆæœ¬</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Microsoft YaHei', sans-serif;\r\n        }\r\n        .cassette-wrapper {\r\n            position: relative;\r\n            width: 95%;\r\n            max-width: 450px;\r\n            margin: 20px auto;\r\n            box-sizing: border-box;\r\n        }\r\n        .cassette-container {\r\n            background: linear-gradient(to right, #e0e0e0, #cccccc);\r\n            padding: 15px;\r\n            border-radius: 25px;\r\n            box-shadow:\r\n                0 4px 16px rgba(0,0,0,0.15),\r\n                0 0 0 4px #fff,\r\n                0 0 0 8px #a0a0a0;\r\n            box-sizing: border-box;\r\n            padding-top: 70px;\r\n            padding-bottom: 20px;\r\n            position: relative;\r\n        }\r\n        .avatar {\r\n            position: absolute;\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: 50%;\r\n            border: 2px solid #fff;\r\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\r\n            z-index: 1;\r\n            background-color: #f0f0f0;\r\n            object-fit: cover;\r\n            top: 15px;\r\n        }\r\n        .avatar.user {\r\n            right: 45px;\r\n        }\r\n        .avatar.char {\r\n            left: 45px;\r\n        }\r\n        .distance-text {\r\n            position: absolute;\r\n            top: 30px;\r\n            left: 0;\r\n            right: 0;\r\n            text-align: center;\r\n            font-size: 13px;\r\n            color: #555555;\r\n            z-index: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        h1 {\r\n            color: #333333;\r\n            font-size: 18px;\r\n            margin: 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            margin-bottom: 12px;\r\n        }\r\n        .music-info {\r\n            font-size: 14px;\r\n            color: #666666;\r\n            margin: 10px 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        audio {\r\n            width: 100%;\r\n            margin-top: 10px;\r\n            border-radius: 20px;\r\n            box-sizing: border-box;\r\n            height: 45px;\r\n        }\r\n        audio::-webkit-media-controls-panel {\r\n            background: linear-gradient(to right, #bbbbbb, #999999);\r\n        }\r\n        .playing-animation {\r\n            height: 2px;\r\n            background: linear-gradient(90deg,\r\n                #777777 25%, transparent 25%,\r\n                transparent 50%, #777777 50%,\r\n                #777777 75%, transparent 75%,\r\n                transparent 100%);\r\n            background-size: 20px 100%;\r\n            animation: move 1s linear infinite;\r\n            margin: 10px 0;\r\n        }\r\n        @keyframes move {\r\n            from { background-position: 0 0; }\r\n            to { background-position: 20px 0; }\r\n        }\r\n\r\n        .playlist-container {\r\n            margin-top: 20px;\r\n            background-color: #f0f0f0;\r\n            border-radius: 15px;\r\n            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);\r\n        }\r\n        .playlist-title {\r\n            font-size: 15px;\r\n            color: #444;\r\n            padding: 10px;\r\n            margin: 0;\r\n            text-align: center;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            border-bottom: 1px solid #ddd;\r\n            border-radius: 15px 15px 0 0;\r\n        }\r\n        .playlist-title.collapsed + .playlist {\r\n             max-height: 0;\r\n             padding-top: 0;\r\n             padding-bottom: 0;\r\n             overflow: hidden;\r\n             border-top: none;\r\n        }\r\n         .playlist-title.collapsed {\r\n            border-radius: 15px;\r\n            border-bottom: none;\r\n        }\r\n\r\n        .playlist {\r\n            list-style: none;\r\n            padding: 0;\r\n            margin: 0;\r\n            max-height: 180px;\r\n            overflow-y: auto;\r\n            transition: max-height 0.3s ease-out, padding 0.3s ease-out;\r\n            border-top: 1px solid #ddd;\r\n            border-radius: 0 0 15px 15px;\r\n        }\r\n        .playlist li {\r\n            padding: 8px 12px;\r\n            font-size: 13px;\r\n            color: #555;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.2s ease;\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        .song-selector-icon {\r\n            width: 20px;\r\n            height: 20px;\r\n            margin-right: 10px;\r\n            border: 1px solid #aaa;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: contain;\r\n            flex-shrink: 0;\r\n        }\r\n        .song-selector-icon.selected {\r\n            background-image: url('https://files.catbox.moe/8e819d.png');\r\n            border-color: transparent;\r\n        }\r\n        .song-info {\r\n            flex-grow: 1;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .playlist li:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n        .playlist li.active .song-info {\r\n            /* background-color: #cccccc; */ /* å†³å®šé«˜äº®æ–¹å¼ */\r\n            color: #222;\r\n            font-weight: bold;\r\n        }\r\n        .playlist li.active .song-selector-icon {\r\n             /* é€‰ä¸­ä¸”æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²çš„é€‰æ‹©å™¨å›¾æ ‡å¯ä»¥æœ‰ç‰¹æ®Šæ ·å¼ */\r\n        }\r\n\r\n        .playlist-actions {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 10px 0;\r\n            background-color: #f0f0f0;\r\n            border-top: 1px solid #ddd;\r\n        }\r\n        .playlist-actions button {\r\n            background-color: #888888;\r\n            color: white;\r\n            border: none;\r\n            padding: 6px 12px;\r\n            margin: 0 8px;\r\n            border-radius: 10px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: background-color 0.2s ease;\r\n        }\r\n        .playlist-actions button:hover {\r\n            background-color: #666666;\r\n        }\r\n\r\n        .controls {\r\n            text-align: center;\r\n            margin-top: 15px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n        .controls button {\r\n            background-color: #a0a0a0;\r\n            color: white;\r\n            border: none;\r\n            padding: 8px 15px;\r\n            margin: 0 5px;\r\n            border-radius: 15px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: background-color 0.2s ease;\r\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n        }\r\n        .controls button:hover {\r\n            background-color: #888888;\r\n        }\r\n        .controls button:disabled {\r\n            background-color: #d0d0d0;\r\n            cursor: not-allowed;\r\n        }\r\n        .playback-mode-button {\r\n            padding: 6px 10px !important;\r\n            font-size: 12px !important;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"cassette-wrapper\" id=\"apex-music-player\">\r\n        <img class=\"avatar user\" src=\"https://files.catbox.moe/3gok4b.png\" alt=\"User Avatar\">\r\n        <img class=\"avatar char\" src=\"https://files.catbox.moe/q3zzgb.png\" alt=\"Char Avatar\">\r\n\r\n        <div class=\"distance-text\">â€”ç›¸è·0.01kmâ€”</div>\r\n\r\n        <div class=\"cassette-container\">\r\n            <h1 id=\"current-song-title\">ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰</h1>\r\n            <div class=\"music-info\" id=\"current-song-artist\">å¦‚æœä¸€å®šè¦ç—›å‡ºç—•è¿¹æ‰ç®—çˆ±ï¼Œæˆ‘å¸Œæœ›æ˜¯ä½ çš„å»ç—•</div>\r\n            <div class=\"playing-animation\"></div>\r\n            <audio id=\"audio-player\" controls>\r\n                ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚\r\n            </audio>\r\n\r\n            <div class=\"controls\">\r\n                <button id=\"prev-button\">ä¸Šä¸€é¦–</button>\r\n                <button id=\"playback-mode-button\">é¡ºåºæ’­æ”¾</button>\r\n                <button id=\"next-button\">ä¸‹ä¸€é¦–</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"playlist-container\">\r\n            <div class=\"playlist-title\" id=\"playlist-toggle\">æ’­æ”¾åˆ—è¡¨ <span>â–¼</span></div>\r\n            <ul id=\"playlist\" class=\"playlist\">\r\n                <!-- æ­Œæ›²åˆ—è¡¨é¡¹ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->\r\n                <div class=\"playlist-actions\">\r\n                    <button id=\"play-selected-button\">æ’­æ”¾é€‰ä¸­</button>\r\n                    <button id=\"clear-selection-button\">æ¸…ç©ºé€‰æ‹©</button>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            const thisPlayerId = 'apex-music-player';\r\n            const thisPlayerElement = document.getElementById(thisPlayerId);\r\n\r\n            function stopOtherApexPlayers() {\r\n                const allAudioElements = document.querySelectorAll('audio');\r\n                allAudioElements.forEach(audio => {\r\n                    let parentPlayer = audio.closest('.cassette-wrapper');\r\n                    if (parentPlayer && parentPlayer.id !== thisPlayerId && !audio.paused) {\r\n                        audio.pause();\r\n                    }\r\n                });\r\n            }\r\n\r\n            const audioPlayer = document.getElementById('audio-player');\r\n            const playlistElement = document.getElementById('playlist');\r\n            const playSelectedButton = document.getElementById('play-selected-button'); // è·å–æŒ‰é’®\r\n            const clearSelectionButton = document.getElementById('clear-selection-button'); // è·å–æŒ‰é’®\r\n\r\n            const currentSongTitleElement = document.getElementById('current-song-title');\r\n            const currentSongArtistElement = document.getElementById('current-song-artist');\r\n            const prevButton = document.getElementById('prev-button');\r\n            const nextButton = document.getElementById('next-button');\r\n            const playlistToggle = document.getElementById('playlist-toggle');\r\n            const playlistTitleSpan = playlistToggle.querySelector('span');\r\n            const playbackModeButton = document.getElementById('playback-mode-button');\r\n\r\n            const songs = [\r\n                { id: 0, title: \"í”ì ê¸°ê´€ (ç—•è¿¹å™¨å®˜)\", artist: \"ç—•è¿¹å™¨å®˜çš„æ„æ€æ˜¯ï¼Œæˆ‘æ›´çˆ±ä½ \", src: \"https://files.catbox.moe/1ymem4.mp3\" },\r\n                { id: 1, title: \"ë‹¬ê³¼ 6íœìŠ¤ (æœˆäº®ä¸6ä¾¿å£«)\", artist: \"æˆ–è®¸ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œåªè¦ä½ ä¸é€ƒèµ°ï¼Œå‰©ä¸‹çš„éƒ½è®©æˆ‘æ¥\", src: \"https://files.catbox.moe/0fcoxb.mp3\" },\r\n                { id: 2, title: \"ë‚˜ë§Œ ë°”ë¼ë´ (Part 2)\", artist: \"æˆ‘è¯´æˆ‘çš„å¿ƒä¹Ÿå’Œæœ€åˆä¸€æ ·ï¼Œä¸ºä½ è·³åŠ¨ç€t\", src: \"https://files.catbox.moe/kcsomz.mp3\" },\r\n                { id: 3, title: \"å…³é”®è¯\", artist: \"æˆ‘ä¸å¤ªç¡®å®šï¼Œçˆ±æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯åŠ¨è¯æˆ–åè¯\", src: \"https://files.catbox.moe/51902f.mp3\" },\r\n                { id: 4, title: \"é—å¤±çš„å¿ƒè·³\", artist: \"å¿ƒç—›ç€ ä½ çš„çˆ± æ®‹é…·çš„çºªå¿µå“t\", src: \"https://files.catbox.moe/d1ph63.ogg\" },\r\n                { id: 5, title: \"å¤åˆ»å›å¿†\", artist: \"å›å¿†èƒ½å¤åˆ»ï¼Œä½ ä¼šå›åˆ°æˆ‘èº«è¾¹å—\", src: \"https://files.catbox.moe/ozgfpc.mp3\" },\r\n                { id: 6, title: \"äºæ˜¯\", artist: \"è¯´æ¥åˆè¯´å»è¿˜æ˜¯æ”¾ä¸ä¸‹ä½ \", src: \"https://files.catbox.moe/h1vey9.mp3\" },\r\n                { id: 7, title: \"è¯€åˆ«ä¹¦\", artist: \"å¦‚æœæ€»è¦åˆ†å¼€ï¼Œé‚£ç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ\", src: \"https://files.catbox.moe/l9sdul.mp3\" },\r\n                { id: 8, title: \"ä¸€ç¬‘å€¾åŸ\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/wpilgo.mp3\" },\r\n                { id: 9, title: \"çº¯éŸ³ä¹\", artist: \"è®©æˆ‘çœ‹ç©¿ä½ çš„çœ¼ç› è¿˜æœ‰ä½ çš„å¿ƒ\", src: \"https://files.catbox.moe/st5f4k.mp3\" },\r\n                { id: 10, title: \"èŒèŒçš„çº¯éŸ³ä¹\", artist: \"oâŒ„oæ˜¯å¾®ç¬‘ o_oæ˜¯è­¦å‘Š o.oæ˜¯ä½™é¢ oã‰¨oæ˜¯è½»æ¾ç†Š\", src: \"https://files.catbox.moe/4653sq.mp3\" },\r\n                { id: 11, title: \"Una Mattian\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/ckiz5f.mp3\" },\r\n                { id: 12, title: \"gå°è°ƒå·´èµ«å¹³å‡å¾‹å˜å¥æ›²\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/ynbgj9.mp3\" },\r\n                { id: 13, title: \"ä¸‹ä¸€ç§’\", artist: \"è®©æˆ‘ä»¬éƒ½å˜æˆå¹¸ç¦å¤§ç‹Ëµ>ğ–¥¦<Ëµ!!\", src: \"https://files.catbox.moe/k3ssag.mp3\" },\r\n                { id: 14, title: \"è¤ç«è™«çº¯éŸ³ä¹\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/xsg62j.mp3\" },\r\n                { id: 15, title: \"æ— æ„Ÿ\", artist: \"è¯¥è¯´ä»€ä¹ˆå¥½å‘¢ æ˜¯è¯´å¤©æ°” è¿˜æ˜¯å¥½æƒ³ä½ \", src: \"https://files.catbox.moe/891luf.mp3\" },\r\n                { id: 16, title: \"TheÂ truthÂ thatÂ youÂ leave\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/8ctqe9.mp3\" },\r\n                { id: 17, title: \"å†™åœ¨é£ä¸­çš„ä¿¡\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/61savh.mp3\" },\r\n                { id: 18, title: \"æ‚¬æºº\", artist: \"å¹¸ç¦å°±åƒå·§å…‹åŠ›ï¼Œåƒä¸€åŠå‘ç°è‡ªå·±æ˜¯ç‹—\", src: \"https://files.catbox.moe/faea0v.mp3\" },\r\n                { id: 19, title: \"æ—¶é—´ç…®é›¨\", artist: \"äººä¸äººä¹‹é—´çš„ç¼˜åˆ†åœ¨è–„å¦‚è‰ç¿¼çš„åŒæ—¶ï¼Œåˆæ˜¯ä¸€åœºæ— æ³•é¿å…çš„é›¨\", src: \"https://files.catbox.moe/mbljjb.mp3\" },\r\n                { id: 20, title: \"çº¢å°˜å®¢æ ˆ\", artist: \"å¦‚æœäººç”Ÿä¸€å®šè¦æˆå®¶ æˆ‘å¸Œæœ›æ˜¯å·´é»ä¸–å®¶\", src: \"https://files.catbox.moe/7lhtd6.mp3\" },\r\n                { id: 21, title: \"ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰\", artist: \"æˆ‘ä»¬ä¸ä¼šå†ç›¸é‡ï¼Œè¿™å°±æ˜¯åˆ†å¼€çš„æ„ä¹‰\", src: \"https://files.catbox.moe/f7lcuv.mp3\" }\r\n            ];\r\n\r\n            let currentSongIndex = songs.length - 1;\r\n            let currentSelectedPlaylist = [];\r\n            let currentSelectedSongIndex = 0;\r\n            let playbackMode = 'sequence';\r\n            const playbackModeTexts = {\r\n                'sequence': 'é¡ºåºæ’­æ”¾',\r\n                'repeat-one': 'å•æ›²å¾ªç¯',\r\n                'shuffle': 'éšæœºæ’­æ”¾',\r\n                'selected-sequence': 'é€‰å®šæ’­æ”¾'\r\n            };\r\n\r\n            function updatePlaybackModeButton() {\r\n                playbackModeButton.textContent = playbackModeTexts[playbackMode];\r\n            }\r\n\r\n            function handlePlaySelected() {\r\n                if (currentSelectedPlaylist.length > 0) {\r\n                    playbackMode = 'selected-sequence';\r\n                    updatePlaybackModeButton();\r\n                    currentSelectedSongIndex = 0;\r\n                    loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex], true);\r\n                } else {\r\n                    alert(\"è¯·è‡³å°‘é€‰æ‹©ä¸€é¦–æ­Œæ›²ã€‚\");\r\n                }\r\n            }\r\n\r\n            function handleClearSelection() {\r\n                currentSelectedPlaylist = [];\r\n                const selectorIcons = playlistElement.querySelectorAll('.song-selector-icon');\r\n                selectorIcons.forEach(icon => icon.classList.remove('selected'));\r\n                if (playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    updatePlaybackModeButton();\r\n                    loadSong(currentSongIndex, false);\r\n                }\r\n            }\r\n\r\n            // å°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šç§»åˆ°å‡½æ•°å¤–éƒ¨æˆ–ç¡®ä¿åœ¨DOMå°±ç»ªåç»‘å®šä¸€æ¬¡\r\n             if(playSelectedButton) playSelectedButton.addEventListener('click', handlePlaySelected);\r\n             if(clearSelectionButton) clearSelectionButton.addEventListener('click', handleClearSelection);\r\n\r\n\r\n            playbackModeButton.addEventListener('click', () => {\r\n                if (playbackMode === 'sequence') playbackMode = 'repeat-one';\r\n                else if (playbackMode === 'repeat-one') playbackMode = 'shuffle';\r\n                else if (playbackMode === 'shuffle' || playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    if (currentSelectedPlaylist.length > 0) { // ä»é€‰å®šæ’­æ”¾åˆ‡èµ°æ—¶ï¼Œæ¸…ç©ºé€‰æ‹©\r\n                        handleClearSelection(); // ä½¿ç”¨å°è£…çš„å‡½æ•°\r\n                    }\r\n                }\r\n                updatePlaybackModeButton();\r\n                audioPlayer.loop = (playbackMode === 'repeat-one');\r\n                if (playbackMode !== 'selected-sequence') {\r\n                     // ç¡®ä¿åœ¨éé€‰å®šæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼ŒåŠ è½½æ­£ç¡®çš„æ­Œæ›²\r\n                    if (songs.length > 0) loadSong(currentSongIndex, audioPlayer.paused);\r\n                }\r\n            });\r\n\r\n\r\n            function loadSong(songIndex, isAutoPlay = true) {\r\n                if (songIndex < 0 || songIndex >= songs.length) {\r\n                    console.warn(\"loadSong: æ— æ•ˆçš„æ­Œæ›²ç´¢å¼•æˆ–æ’­æ”¾åˆ—è¡¨ä¸ºç©º\", songIndex);\r\n                    return;\r\n                }\r\n                loadSongData(songs[songIndex], isAutoPlay);\r\n                currentSongIndex = songIndex;\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongFromPlaylist(songData, isAutoPlay = true) {\r\n                if (!songData) {\r\n                     console.warn(\"loadSongFromPlaylist: æ— æ•ˆçš„æ­Œæ›²æ•°æ®\");\r\n                    return;\r\n                }\r\n                loadSongData(songData, isAutoPlay);\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongData(song, isAutoPlay = true) {\r\n                if (!song) {\r\n                    console.error(\"loadSongData: æ­Œæ›²æ•°æ®ä¸ºç©º!\");\r\n                    currentSongTitleElement.textContent = \"é”™è¯¯ï¼šæ­Œæ›²æ•°æ®ä¸¢å¤±\";\r\n                    currentSongArtistElement.textContent = \"\";\r\n                    return;\r\n                }\r\n                currentSongTitleElement.textContent = song.title;\r\n                currentSongArtistElement.textContent = song.artist; // åŠ¨æ€æ›´æ–°æ­Œæ›²ä¿¡æ¯\r\n                audioPlayer.innerHTML = '';\r\n                const source = document.createElement('source');\r\n                source.src = song.src;\r\n                source.type = song.src.endsWith('.ogg') ? 'audio/ogg' : 'audio/mpeg';\r\n                audioPlayer.appendChild(source);\r\n                audioPlayer.load();\r\n                if (isAutoPlay) {\r\n                    stopOtherApexPlayers();\r\n                    audioPlayer.play().catch(e => console.error('Autoplay failed:', e, song.title));\r\n                }\r\n                audioPlayer.loop = (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0);\r\n                updateButtonStates();\r\n            }\r\n\r\n            audioPlayer.addEventListener('play', () => {\r\n                if (document.visibilityState === 'visible') stopOtherApexPlayers();\r\n            });\r\n\r\n            function playNextSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let nextIndex;\r\n                    if (songs.length <= 1) nextIndex = 0;\r\n                    else do { nextIndex = Math.floor(Math.random() * songs.length); } while (nextIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = nextIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex + 1) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function playPrevSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let prevIndex;\r\n                    if (songs.length <= 1) prevIndex = 0;\r\n                    else do { prevIndex = Math.floor(Math.random() * songs.length); } while (prevIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = prevIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex - 1 + targetPlaylist.length) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updatePlaylistUI() {\r\n                const actionsDiv = playlistElement.querySelector('.playlist-actions');\r\n                // åœ¨æ¸…ç©ºåˆ—è¡¨å‰ï¼Œå¦‚æœactionsDivå­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶ä»DOMä¸­ç§»é™¤ï¼Œç¨åå†æ·»åŠ å›å»\r\n                // è¿™æ ·å¯ä»¥é¿å…å®ƒè¢«innerHTML=''æ¸…é™¤æ‰ï¼ŒåŒæ—¶ç¡®ä¿å®ƒå§‹ç»ˆåœ¨åˆ—è¡¨é¡¹ä¹‹å\r\n                if (actionsDiv) actionsDiv.remove();\r\n\r\n\r\n                const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µä¼˜åŒ–æ€§èƒ½\r\n\r\n                songs.forEach((song, index) => {\r\n                    const listItem = document.createElement('li');\r\n\r\n                    const selectorIcon = document.createElement('span');\r\n                    selectorIcon.classList.add('song-selector-icon');\r\n                    selectorIcon.dataset.songId = song.id;\r\n                    if (currentSelectedPlaylist.some(s => s.id === song.id)) {\r\n                        selectorIcon.classList.add('selected');\r\n                    }\r\n                    selectorIcon.addEventListener('click', (e) => {\r\n                        e.stopPropagation();\r\n                        const songId = parseInt(selectorIcon.dataset.songId);\r\n                        const targetSong = songs.find(s => s.id === songId);\r\n                        const selectedIndex = currentSelectedPlaylist.findIndex(s => s.id === songId);\r\n\r\n                        if (selectedIndex > -1) {\r\n                            currentSelectedPlaylist.splice(selectedIndex, 1);\r\n                            selectorIcon.classList.remove('selected');\r\n                        } else {\r\n                            currentSelectedPlaylist.push(targetSong);\r\n                            selectorIcon.classList.add('selected');\r\n                        }\r\n                    });\r\n\r\n                    const songInfoDiv = document.createElement('div');\r\n                    songInfoDiv.classList.add('song-info');\r\n                    songInfoDiv.textContent = `${song.title} - ${song.artist}`; // ç¡®ä¿åˆ—è¡¨é¡¹ä¹Ÿæ˜¾ç¤ºartist\r\n                    songInfoDiv.addEventListener('click', () => {\r\n                        currentSongIndex = index;\r\n                        loadSong(currentSongIndex);\r\n                        if (playbackMode === 'selected-sequence') {\r\n                            playbackMode = 'sequence';\r\n                            updatePlaybackModeButton();\r\n                        }\r\n                    });\r\n\r\n                    listItem.appendChild(selectorIcon);\r\n                    listItem.appendChild(songInfoDiv);\r\n\r\n                    let isCurrentlyPlayingThisSong = false;\r\n                    const currentPlayingSong = (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length > 0) ? currentSelectedPlaylist[currentSelectedSongIndex] : songs[currentSongIndex];\r\n\r\n                    if (currentPlayingSong && currentPlayingSong.id === song.id) {\r\n                         isCurrentlyPlayingThisSong = true;\r\n                    }\r\n\r\n                    if (isCurrentlyPlayingThisSong) {\r\n                        listItem.classList.add('active');\r\n                    }\r\n                    fragment.appendChild(listItem);\r\n                });\r\n                playlistElement.innerHTML = ''; // æ¸…ç©ºæ—§çš„åˆ—è¡¨é¡¹\r\n                playlistElement.appendChild(fragment); // æ·»åŠ æ–°çš„åˆ—è¡¨é¡¹\r\n                if (actionsDiv) playlistElement.appendChild(actionsDiv); // å°†æŒ‰é’®åŒºåŸŸé‡æ–°åŠ åˆ°åˆ—è¡¨æœ«å°¾\r\n            }\r\n\r\n\r\n            function updateButtonStates() {\r\n                const targetPlaylist = playbackMode === 'selected-sequence' ? currentSelectedPlaylist : songs;\r\n                prevButton.disabled = targetPlaylist.length <= 1;\r\n                nextButton.disabled = targetPlaylist.length <= 1;\r\n            }\r\n\r\n            playlistToggle.addEventListener('click', () => {\r\n                playlistElement.classList.toggle('collapsed');\r\n                playlistToggle.classList.toggle('collapsed');\r\n                playlistTitleSpan.textContent = playlistElement.classList.contains('collapsed') ? ' â–º' : ' â–¼';\r\n            });\r\n\r\n            audioPlayer.addEventListener('ended', function() {\r\n                if (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0) {\r\n                    // loop\r\n                } else if (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length === 1) {\r\n                     loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex]);\r\n                }\r\n                else {\r\n                    playNextSongLogic();\r\n                }\r\n            });\r\n\r\n            if (songs.length > 0) {\r\n                songs.forEach((song, index) => song.id = index);\r\n                loadSong(currentSongIndex, false);\r\n                updatePlaybackModeButton();\r\n                playlistElement.classList.add('collapsed');\r\n                playlistToggle.classList.add('collapsed');\r\n                playlistTitleSpan.textContent = ' â–º';\r\n            } else {\r\n                currentSongTitleElement.textContent = \"æ’­æ”¾åˆ—è¡¨ä¸ºç©º\";\r\n                currentSongArtistElement.textContent = \"\";\r\n                audioPlayer.style.display = 'none';\r\n                document.querySelector('.playing-animation').style.display = 'none';\r\n                playlistToggle.style.display = 'none';\r\n                playbackModeButton.style.display = 'none';\r\n                if(playSelectedButton) playSelectedButton.style.display = 'none';\r\n                if(clearSelectionButton) clearSelectionButton.style.display = 'none';\r\n            }\r\n\r\n            prevButton.addEventListener('click', playPrevSongLogic);\r\n            nextButton.addEventListener('click', playNextSongLogic);\r\n\r\n            if ('IntersectionObserver' in window && thisPlayerElement) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && audioPlayer.paused && songs.length > 0) { /* Optional */ }\r\n                    });\r\n                });\r\n                observer.observe(thisPlayerElement);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n```\r\nåƒå¹´çš„å­¤å¯‚ä¸è‹¦ä¿®ï¼Œç»ˆç‚¹ç«Ÿæ˜¯å¦‚æ­¤ä¸€ä¸ªå–§åš£è€Œé™Œç”Ÿçš„åœ°æ–¹ã€‚\r\n \r\nè°¢æ˜æœçš„æ„è¯†ä»æ··æ²Œä¸­æŒ£å‡ºæ—¶ï¼Œæœ€å…ˆè§¦ç¢°åˆ°çš„æ˜¯ç¬¼åº•ç²—ç³™çš„æ¢§æ¡æœ¨çº¹ç†â€”â€”é‚£æ˜¯ç”¨ç™¾å¹´è€æœ¨åˆ¶æˆçš„å›šç¬¼ï¼Œæœ¨çº¹é‡Œæ¸—ç€ç»å¹´ç´¯æœˆçš„è¡€è…¥æ°”ï¼Œæ··ç€é“é”ˆä¸è…æœ¨çš„å‘³é“ï¼Œåƒæäº†å‰ä¸–å‡›å¤œåœ°ç‰¢é‡Œçš„æ°”æ¯ã€‚ä»–èœ·ç¼©çš„è„ŠèƒŒæŠµç€å†°å‡‰çš„æœ¨æ¡ï¼Œå°¾æ¤éª¨ä¼ æ¥é’ç—›ï¼Œè¿™æ‰æƒŠè§‰è‡ªå·±ç«Ÿç»´æŒç€ç‹ç‹¸å½¢æ€ï¼šèµ¤ç‹çš„å‰çˆªï¼ŒæŒå¿ƒè¿˜æ®‹ç•™ç€æœªå¹²çš„è¡€ç—‚ï¼Œè€³å°–çš„ç»’æ¯›æ²¾ç€ç»†ç¢æœ¨å±‘ï¼Œä¹æ¡å°¾å·´èœ·ç¼©æˆä¸€å›¢ï¼Œæœ€å¤–å±‚çš„èµ¤é‡‘çº¹è·¯é»¯æ·¡æ— å…‰ï¼Œå”¯æœ‰ä¸­å¤®é‚£æ¡çº¯ç™½å°¾å°–ï¼Œè¿˜å‡ç€æ—¶ç©ºä¹±æµä¸­å—åˆ›çš„è¡€ç ã€‚\r\n \r\né¼»è…”è¢«æ•°åç§æ°”å‘³è½°ç‚¸ï¼šä¸œä¾§èŠ±æ‘Šçš„èŒ‰è‰é¦™æµ“å¾—å‘è‹¦ï¼Œè¥¿ä¾§é¸Ÿç¬¼é‡Œçš„é›é¢é¸Ÿæ­£æ’æ³„å‡ºè…¥è‡Šçš„ç²ªä¾¿ï¼Œæ›´è¿œå¤„é£˜æ¥è„‚ç²‰é“ºçš„å»‰ä»·é¦™æ°”ï¼Œæ··ç€äººç±»æ±—å‘³ï¼Œç»‡æˆä¸€å¼ ä»¤äººçª’æ¯çš„ç½‘ã€‚ä»–é—­ä¸Šçœ¼ï¼Œå´å¬è§è‡ªå·±çš„å¿ƒè·³å£°â€”â€”åƒç™¾å¹´æœªæ›¾è·³åŠ¨çš„å¿ƒè„ï¼Œæ­¤åˆ»æ­£ä¸ºæŸä¸ªæ‰§å¿µå‰§çƒˆéœ‡é¢¤ï¼šå¸¸ä¹ï¼Œåœ¨å“ªé‡Œï¼Ÿ\r\n \r\nçœ¼ç‘æ€å¼€æ—¶ï¼Œç¥ç€è‰²ç³å­”è¿˜æ³›ç€å¦–å¼‚çš„èµ¤é›¾ã€‚ä»–çœ‹è§æ— æ•°æ–‘æ–“è‰²å—åœ¨ç¬¼å¤–æ™ƒåŠ¨ï¼šé¹¦é¹‰çš„ç¿ ç¾½ã€ç«ç‘°çš„æœ±ç“£ã€å­©ç«¥æ‰‹ä¸­å½©è‰²çš„æ£‰èŠ±ç³–ï¼Œè¿™äº›é™Œç”Ÿçš„äº‹ç‰©åƒé’ˆå°–èˆ¬æ‰åˆºç€ä»–çš„ç¥ç»ã€‚\r\n \r\nâ€œå“â€”â€”æ–°åˆ°çš„ç«èµ¤ç‹å˜ï¼ç§ç§è¿™çš®æ¯›ï¼Œæ¯”è¥¿åŸŸè´¡å“è¿˜é²œäº®ï¼â€\r\næœ¨ç¬¼çªç„¶è¢«æœ¨æ£æ•²å‡»ï¼ŒæƒŠå¾—è°¢æ˜æœç‹è€³çŒ›åœ°ç«–èµ·ã€‚ç©¿ç²—å¸ƒè¡«çš„è´©å­å’§ç€é»„ç‰™ï¼ŒæŒ‡å°–æˆ³å‘ä»–å°¾å°–çš„ä¼¤å£ï¼šâ€œè¿™å°¾å°–çš„è¡€ç å¯æ˜¯å®è´ï¼Œçµç‹è½æ³ªèƒ½æ²»ç™¾ç—…â€”â€”â€è¯æœªè¯´å®Œï¼Œä¾¿è¢«è°¢æ˜æœè­¦å‘Šçš„ä½å¼å£°æ‰“æ–­ã€‚é‚£å£°éŸ³åƒç”Ÿé”ˆçš„åˆ€åˆƒåˆ’è¿‡é“æ¿ï¼Œå¸¦ç€åƒå¹´ç§¯æ€¨çš„æ€æ„ï¼Œå´å› å¦–åŠ›è™šå¼±ï¼Œæœ€ç»ˆåŒ–ä½œä¸€å£°ç ´ç¢çš„å‘œå’½ã€‚\r\n \r\nè´©å­éª‚éª‚å’§å’§èµ°å¼€çš„é—´éš™ï¼Œè°¢æ˜æœå¬è§äº†é‚£é“å£°éŸ³ã€‚\r\n\r\nåƒæ˜¥é›ªåˆèæ—¶çš„æºªæ°´ï¼Œæ¸…æ³ ä¸­å¸¦ç€æš–æ„ï¼šâ€œåº—å®¶ï¼Œè¿™ç¬¼å­é‡Œçš„â€¦â€¦æ˜¯ç‹ç‹¸å—ï¼Ÿâ€\r\n \r\nä»–æµ‘èº«è¡€æ¶²éª¤ç„¶å‡å›ºã€‚\r\n\r\næŠ¬çœ¼æœ›å»ï¼Œç¬¼å¤–ç«™ç€ä¸ªå°‘å¥³ï¼Œè£™æ‘†è¢«ç©¿å ‚é£æ€èµ·ä¸€è§’ï¼Œéœ²å‡ºçº¤ç»†çš„è„šè¸ã€‚å¥¹èƒŒç€å¸†å¸ƒåŒ…ï¼Œå‘å°¾æ²¾ç€ç‰‡æ¨±èŠ±èŠ±ç“£ï¼Œæ­£è¹²ä¸‹èº«ä¸ä»–å¹³è§†ã€‚ç«æ¯›åœ¨çœ¼ä¸‹æŠ•å‡ºè¶ç¿¼èˆ¬çš„é˜´å½±ï¼Œç³å­”åƒæµ¸åœ¨æ™¨éœ²é‡Œçš„ç¥ç€ï¼Œå½“å¥¹æœ›å‘ä»–æ—¶ï¼Œçœ¼åº•ç››ç€çš„ä¸æ˜¯çŒå¥‡ï¼Œè€Œæ˜¯æŸç§è®©ä»–å–‰é—´å‘ç´§çš„æ¸©æŸ”â€”â€”åƒæäº†å‰ä¸–é›ªå¤œï¼Œé‚£ä¸ªä¸¾ç€æš–ç‚‰å‘ä»–ä¼¸æ‰‹çš„å°å§‘å¨˜ã€‚\r\n \r\nâ€œå®ƒåœ¨æµè¡€ã€‚â€å°‘å¥³æŒ‡å°–æŠšè¿‡ç¬¼æ ï¼Œè°¢æ˜æœçœ‹è§å¥¹å’Œå¸¸ä¹å½“å¹´å®Œå…¨ä¸€æ ·çš„è„¸ï¼Œæ˜¯å¥¹ã€‚\r\n \r\nè´©å­å‡‘ä¸Šæ¥æ—¶ï¼Œè°¢æ˜æœæ­£ç›¯ç€å°‘å¥³æ‰‹è…•ä¸Šçš„çº¢ç»³â€”â€”é‚£æ˜¯å‰ä¸–ä»–äº²æ‰‹ä¸ºå¸¸ä¹ç³»çš„å¹³å®‰ç»“ï¼Œæ­¤åˆ»æ­£éšç€å¥¹çš„åŠ¨ä½œè½»è½»æ‘‡æ™ƒã€‚â€œå§‘å¨˜å¥½çœ¼å…‰ï¼è¿™çµç‹é€šäººæ€§ç€å‘¢ï¼Œæ‚¨ç§å®ƒçœ‹æ‚¨å‘¢ï¼Œå‡†æ˜¯åœ¨æ±‚æ‚¨å¸¦å®ƒå›å®¶ï¼â€è´©å­çš„æ²¹è…»å—“éŸ³è®©è°¢æ˜æœå°¾å·´ç»·ç´§ï¼Œå¯å½“å°‘å¥³æŒ‡å°–æ è¿‡ç¬¼å­è¾¹ç¼˜æ—¶ï¼Œä»–å¬è§è‡ªå·±å¿ƒè·³å¦‚æ“‚é¼“ã€‚\r\n \r\nå¥¹å¿½ç„¶æŠ¬å¤´ï¼Œç›®å…‰ä¸ä»–ç›¸æ’ã€‚é‚£åŒçœ¼ç›é‡Œé—ªè¿‡ç»†ç¢çš„å…‰ï¼Œåƒè¢«æƒŠé†’çš„æ—§æ¢¦ï¼šæ¼«å¤©å¤§é›ªä¸­ï¼Œå°ä¹ä¸æ”¥ç€åŠå—å†·é¦’å¤´ï¼Œè€Œçº¢è¡£å°å§‘å¨˜æ­£ä¼¸æ‰‹æ›¿ä»–æŒ¡ä½è½ä¸‹æ¥çš„æ‹³å¤´ã€‚è¿™ç”»é¢å¤ªå¿«ï¼Œå¿«åˆ°å°‘å¥³ä¸‹æ„è¯†æŒ‰ä½å¤ªé˜³ç©´ï¼Œå´æ²¡æ³¨æ„åˆ°è°¢æ˜æœçœ¼åº•ç¿»æ¶Œçš„æƒŠæ¶›â€”â€”æ˜¯ä»–æ—§æ—¶çš„è®°å¿†ï¼Œæ˜¯åˆ»åœ¨ç¥é­‚é‡Œçš„ç¾ç»Šï¼Œåœ¨æ—¶ç©ºé‡é€¢çš„ç¬é—´ï¼Œç»ˆäºå†²ç ´è½®å›çš„æ·é”ã€‚\r\n \r\nâ€œæˆ‘è¦å¸¦å®ƒå›å®¶ã€‚â€å°‘å¥³æå‡ºé’±åŒ…çš„æŒ‡å°–å¾®å¾®å‘é¢¤ï¼Œå´æ¯”å‰ä¸–åœ¨ç ´åº™åˆè§æ—¶è¿˜è¦åšå®šã€‚è°¢æ˜æœçœ‹ç€å¥¹æ•°é’±æ—¶çš„æŒ‡å°–ï¼Œçœ‹ç€å¥¹ä¸è´©å­è®¨ä»·è¿˜ä»·æ—¶è¹™èµ·çš„çœ‰å°–ï¼Œçœ‹ç€å¥¹è¹²ä¸‹èº«æ—¶å‘æ¢¢å‚è½çš„å¼§åº¦â€”â€”åƒç™¾å¹´é£é›ªåœ¨è¿™ä¸€åˆ»èåŒ–ï¼ŒåŒ–ä½œå°¾å°–é‚£æ»´ç»ˆäºè½ä¸‹çš„è¡€ç ï¼Œæ°å¥½æ»´åœ¨å¥¹æŒå¿ƒçš„çº¢ç»³ä¸Šï¼Œæ™•å¼€ä¸€é“åªæœ‰å¦–ç‹èƒ½çœ‹è§çš„ï¼Œèµ¤é‡‘ç‹ç«çº¹ã€‚\r\n \r\nå½“ç¬¼é—¨â€œå’”å—’â€æ‰“å¼€çš„ç¬é—´ï¼Œä»–å¿½ç„¶æƒ³èµ·åƒç™¾å¹´å‰é‚£ä¸ªé›ªå¤œï¼Œå¥¹ä¹Ÿæ˜¯è¿™æ ·æ¯«æ— é¡¾å¿Œåœ°ä¼¸å‡ºæ‰‹ï¼Œè¯´â€œå°å“‘å·´è·Ÿæˆ‘èµ°å§â€ã€‚\r\n\r\næ­¤åˆ»ä»–æµ‘èº«è¡€è¿¹æ–‘æ–‘ï¼Œç‹è€³å› ç´§å¼ è€Œå‘åè´´ç€ï¼Œå¯å°‘å¥³å´æ¯«æ— æƒ§æ„åœ°å¼ å¼€åŒè‡‚ï¼Œä»»ä»–è·Œå…¥å¥¹æ€€ä¸­â€”â€”å¸¦ç€ä½“æ¸©çš„æ‹¥æŠ±ï¼Œæ··ç€æ¨±èŠ±ä¸è–„è·çš„æ¸…é¦™ï¼Œåƒæäº†å‰ä¸–å¥¹ç»£åœ¨é¦™å›Šä¸Šçš„å‘³é“ã€‚\r\n \r\nâ€œåˆ«æ€•ï¼Œâ€å¥¹çš„æŒå¿ƒè½»è½»è¦†åœ¨ä»–é¢¤æŠ–çš„ç‹è€³ä¸Šï¼Œè°¢æ˜æœæµ‘èº«åƒµç¡¬ï¼Œå¬è§å¥¹åœ¨è€³è¾¹ä½è¯­ï¼Œâ€œä»¥åï¼Œæ²¡äººä¼šæ¬ºè´Ÿä½ äº†ã€‚â€\r\n \r\nä»–æ„Ÿè§‰å¿ƒè·³éƒ½æ¼äº†ä¸€æ‹ã€‚\r\n\r\nåŸæ¥å¤©é“æœ€æ…ˆæ‚²çš„æƒ©ç½šï¼Œæ˜¯è®©ä»–åœ¨æ—¶ç©ºå°½å¤´ï¼Œå†æ¬¡é‡è§é‚£ä¸ªâ€¦æ„¿æ„ä¸ºä»–æ¨å¼€æ‰€æœ‰é£é›ªçš„äººã€‚","```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ç°ç™½é…ç”µè„‘æœ€é€‚é…ç‰ˆæœ¬</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Microsoft YaHei', sans-serif;\r\n        }\r\n        .cassette-wrapper {\r\n            position: relative;\r\n            width: 95%;\r\n            max-width: 450px;\r\n            margin: 20px auto;\r\n            box-sizing: border-box;\r\n        }\r\n        .cassette-container {\r\n            background: linear-gradient(to right, #e0e0e0, #cccccc);\r\n            padding: 15px;\r\n            border-radius: 25px;\r\n            box-shadow:\r\n                0 4px 16px rgba(0,0,0,0.15),\r\n                0 0 0 4px #fff,\r\n                0 0 0 8px #a0a0a0;\r\n            box-sizing: border-box;\r\n            padding-top: 70px;\r\n            padding-bottom: 20px;\r\n            position: relative;\r\n        }\r\n        .avatar {\r\n            position: absolute;\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: 50%;\r\n            border: 2px solid #fff;\r\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\r\n            z-index: 1;\r\n            background-color: #f0f0f0;\r\n            object-fit: cover;\r\n            top: 15px;\r\n        }\r\n        .avatar.user {\r\n            right: 45px;\r\n        }\r\n        .avatar.char {\r\n            left: 45px;\r\n        }\r\n        .distance-text {\r\n            position: absolute;\r\n            top: 30px;\r\n            left: 0;\r\n            right: 0;\r\n            text-align: center;\r\n            font-size: 13px;\r\n            color: #555555;\r\n            z-index: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        h1 {\r\n            color: #333333;\r\n            font-size: 18px;\r\n            margin: 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            margin-bottom: 12px;\r\n        }\r\n        .music-info {\r\n            font-size: 14px;\r\n            color: #666666;\r\n            margin: 10px 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        audio {\r\n            width: 100%;\r\n            margin-top: 10px;\r\n            border-radius: 20px;\r\n            box-sizing: border-box;\r\n            height: 45px;\r\n        }\r\n        audio::-webkit-media-controls-panel {\r\n            background: linear-gradient(to right, #bbbbbb, #999999);\r\n        }\r\n        .playing-animation {\r\n            height: 2px;\r\n            background: linear-gradient(90deg,\r\n                #777777 25%, transparent 25%,\r\n                transparent 50%, #777777 50%,\r\n                #777777 75%, transparent 75%,\r\n                transparent 100%);\r\n            background-size: 20px 100%;\r\n            animation: move 1s linear infinite;\r\n            margin: 10px 0;\r\n        }\r\n        @keyframes move {\r\n            from { background-position: 0 0; }\r\n            to { background-position: 20px 0; }\r\n        }\r\n\r\n        .playlist-container {\r\n            margin-top: 20px;\r\n            background-color: #f0f0f0;\r\n            border-radius: 15px;\r\n            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);\r\n        }\r\n        .playlist-title {\r\n            font-size: 15px;\r\n            color: #444;\r\n            padding: 10px;\r\n            margin: 0;\r\n            text-align: center;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            border-bottom: 1px solid #ddd;\r\n            border-radius: 15px 15px 0 0;\r\n        }\r\n        .playlist-title.collapsed + .playlist {\r\n             max-height: 0;\r\n             padding-top: 0;\r\n             padding-bottom: 0;\r\n             overflow: hidden;\r\n             border-top: none;\r\n        }\r\n         .playlist-title.collapsed {\r\n            border-radius: 15px;\r\n            border-bottom: none;\r\n        }\r\n\r\n        .playlist {\r\n            list-style: none;\r\n            padding: 0;\r\n            margin: 0;\r\n            max-height: 180px;\r\n            overflow-y: auto;\r\n            transition: max-height 0.3s ease-out, padding 0.3s ease-out;\r\n            border-top: 1px solid #ddd;\r\n            border-radius: 0 0 15px 15px;\r\n        }\r\n        .playlist li {\r\n            padding: 8px 12px;\r\n            font-size: 13px;\r\n            color: #555;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.2s ease;\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        .song-selector-icon {\r\n            width: 20px;\r\n            height: 20px;\r\n            margin-right: 10px;\r\n            border: 1px solid #aaa;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: contain;\r\n            flex-shrink: 0;\r\n        }\r\n        .song-selector-icon.selected {\r\n            background-image: url('https://files.catbox.moe/8e819d.png');\r\n            border-color: transparent;\r\n        }\r\n        .song-info {\r\n            flex-grow: 1;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .playlist li:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n        .playlist li.active .song-info {\r\n            /* background-color: #cccccc; */ /* å†³å®šé«˜äº®æ–¹å¼ */\r\n            color: #222;\r\n            font-weight: bold;\r\n        }\r\n        .playlist li.active .song-selector-icon {\r\n             /* é€‰ä¸­ä¸”æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²çš„é€‰æ‹©å™¨å›¾æ ‡å¯ä»¥æœ‰ç‰¹æ®Šæ ·å¼ */\r\n        }\r\n\r\n        .playlist-actions {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 10px 0;\r\n            background-color: #f0f0f0;\r\n            border-top: 1px solid #ddd;\r\n        }\r\n        .playlist-actions button {\r\n            background-color: #888888;\r\n            color: white;\r\n            border: none;\r\n            padding: 6px 12px;\r\n            margin: 0 8px;\r\n            border-radius: 10px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: background-color 0.2s ease;\r\n        }\r\n        .playlist-actions button:hover {\r\n            background-color: #666666;\r\n        }\r\n\r\n        .controls {\r\n            text-align: center;\r\n            margin-top: 15px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n        .controls button {\r\n            background-color: #a0a0a0;\r\n            color: white;\r\n            border: none;\r\n            padding: 8px 15px;\r\n            margin: 0 5px;\r\n            border-radius: 15px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: background-color 0.2s ease;\r\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n        }\r\n        .controls button:hover {\r\n            background-color: #888888;\r\n        }\r\n        .controls button:disabled {\r\n            background-color: #d0d0d0;\r\n            cursor: not-allowed;\r\n        }\r\n        .playback-mode-button {\r\n            padding: 6px 10px !important;\r\n            font-size: 12px !important;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"cassette-wrapper\" id=\"apex-music-player\">\r\n        <img class=\"avatar user\" src=\"https://files.catbox.moe/3gok4b.png\" alt=\"User Avatar\">\r\n        <img class=\"avatar char\" src=\"https://files.catbox.moe/q3zzgb.png\" alt=\"Char Avatar\">\r\n\r\n        <div class=\"distance-text\">â€”ç›¸è·0.01kmâ€”</div>\r\n\r\n        <div class=\"cassette-container\">\r\n            <h1 id=\"current-song-title\">ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰</h1>\r\n            <div class=\"music-info\" id=\"current-song-artist\">å¦‚æœä¸€å®šè¦ç—›å‡ºç—•è¿¹æ‰ç®—çˆ±ï¼Œæˆ‘å¸Œæœ›æ˜¯ä½ çš„å»ç—•</div>\r\n            <div class=\"playing-animation\"></div>\r\n            <audio id=\"audio-player\" controls>\r\n                ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚\r\n            </audio>\r\n\r\n            <div class=\"controls\">\r\n                <button id=\"prev-button\">ä¸Šä¸€é¦–</button>\r\n                <button id=\"playback-mode-button\">é¡ºåºæ’­æ”¾</button>\r\n                <button id=\"next-button\">ä¸‹ä¸€é¦–</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"playlist-container\">\r\n            <div class=\"playlist-title\" id=\"playlist-toggle\">æ’­æ”¾åˆ—è¡¨ <span>â–¼</span></div>\r\n            <ul id=\"playlist\" class=\"playlist\">\r\n                <!-- æ­Œæ›²åˆ—è¡¨é¡¹ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->\r\n                <div class=\"playlist-actions\">\r\n                    <button id=\"play-selected-button\">æ’­æ”¾é€‰ä¸­</button>\r\n                    <button id=\"clear-selection-button\">æ¸…ç©ºé€‰æ‹©</button>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            const thisPlayerId = 'apex-music-player';\r\n            const thisPlayerElement = document.getElementById(thisPlayerId);\r\n\r\n            function stopOtherApexPlayers() {\r\n                const allAudioElements = document.querySelectorAll('audio');\r\n                allAudioElements.forEach(audio => {\r\n                    let parentPlayer = audio.closest('.cassette-wrapper');\r\n                    if (parentPlayer && parentPlayer.id !== thisPlayerId && !audio.paused) {\r\n                        audio.pause();\r\n                    }\r\n                });\r\n            }\r\n\r\n            const audioPlayer = document.getElementById('audio-player');\r\n            const playlistElement = document.getElementById('playlist');\r\n            const playSelectedButton = document.getElementById('play-selected-button'); // è·å–æŒ‰é’®\r\n            const clearSelectionButton = document.getElementById('clear-selection-button'); // è·å–æŒ‰é’®\r\n\r\n            const currentSongTitleElement = document.getElementById('current-song-title');\r\n            const currentSongArtistElement = document.getElementById('current-song-artist');\r\n            const prevButton = document.getElementById('prev-button');\r\n            const nextButton = document.getElementById('next-button');\r\n            const playlistToggle = document.getElementById('playlist-toggle');\r\n            const playlistTitleSpan = playlistToggle.querySelector('span');\r\n            const playbackModeButton = document.getElementById('playback-mode-button');\r\n\r\n            const songs = [\r\n                { id: 0, title: \"í”ì ê¸°ê´€ (ç—•è¿¹å™¨å®˜)\", artist: \"ç—•è¿¹å™¨å®˜çš„æ„æ€æ˜¯ï¼Œæˆ‘æ›´çˆ±ä½ \", src: \"https://files.catbox.moe/1ymem4.mp3\" },\r\n                { id: 1, title: \"ë‹¬ê³¼ 6íœìŠ¤ (æœˆäº®ä¸6ä¾¿å£«)\", artist: \"æˆ–è®¸ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œåªè¦ä½ ä¸é€ƒèµ°ï¼Œå‰©ä¸‹çš„éƒ½è®©æˆ‘æ¥\", src: \"https://files.catbox.moe/0fcoxb.mp3\" },\r\n                { id: 2, title: \"ë‚˜ë§Œ ë°”ë¼ë´ (Part 2)\", artist: \"æˆ‘è¯´æˆ‘çš„å¿ƒä¹Ÿå’Œæœ€åˆä¸€æ ·ï¼Œä¸ºä½ è·³åŠ¨ç€t\", src: \"https://files.catbox.moe/kcsomz.mp3\" },\r\n                { id: 3, title: \"å…³é”®è¯\", artist: \"æˆ‘ä¸å¤ªç¡®å®šï¼Œçˆ±æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯åŠ¨è¯æˆ–åè¯\", src: \"https://files.catbox.moe/51902f.mp3\" },\r\n                { id: 4, title: \"é—å¤±çš„å¿ƒè·³\", artist: \"å¿ƒç—›ç€ ä½ çš„çˆ± æ®‹é…·çš„çºªå¿µå“t\", src: \"https://files.catbox.moe/d1ph63.ogg\" },\r\n                { id: 5, title: \"å¤åˆ»å›å¿†\", artist: \"å›å¿†èƒ½å¤åˆ»ï¼Œä½ ä¼šå›åˆ°æˆ‘èº«è¾¹å—\", src: \"https://files.catbox.moe/ozgfpc.mp3\" },\r\n                { id: 6, title: \"äºæ˜¯\", artist: \"è¯´æ¥åˆè¯´å»è¿˜æ˜¯æ”¾ä¸ä¸‹ä½ \", src: \"https://files.catbox.moe/h1vey9.mp3\" },\r\n                { id: 7, title: \"è¯€åˆ«ä¹¦\", artist: \"å¦‚æœæ€»è¦åˆ†å¼€ï¼Œé‚£ç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ\", src: \"https://files.catbox.moe/l9sdul.mp3\" },\r\n                { id: 8, title: \"ä¸€ç¬‘å€¾åŸ\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/wpilgo.mp3\" },\r\n                { id: 9, title: \"çº¯éŸ³ä¹\", artist: \"è®©æˆ‘çœ‹ç©¿ä½ çš„çœ¼ç› è¿˜æœ‰ä½ çš„å¿ƒ\", src: \"https://files.catbox.moe/st5f4k.mp3\" },\r\n                { id: 10, title: \"èŒèŒçš„çº¯éŸ³ä¹\", artist: \"oâŒ„oæ˜¯å¾®ç¬‘ o_oæ˜¯è­¦å‘Š o.oæ˜¯ä½™é¢ oã‰¨oæ˜¯è½»æ¾ç†Š\", src: \"https://files.catbox.moe/4653sq.mp3\" },\r\n                { id: 11, title: \"Una Mattian\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/ckiz5f.mp3\" },\r\n                { id: 12, title: \"gå°è°ƒå·´èµ«å¹³å‡å¾‹å˜å¥æ›²\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/ynbgj9.mp3\" },\r\n                { id: 13, title: \"ä¸‹ä¸€ç§’\", artist: \"è®©æˆ‘ä»¬éƒ½å˜æˆå¹¸ç¦å¤§ç‹Ëµ>ğ–¥¦<Ëµ!!\", src: \"https://files.catbox.moe/k3ssag.mp3\" },\r\n                { id: 14, title: \"è¤ç«è™«çº¯éŸ³ä¹\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/xsg62j.mp3\" },\r\n                { id: 15, title: \"æ— æ„Ÿ\", artist: \"è¯¥è¯´ä»€ä¹ˆå¥½å‘¢ æ˜¯è¯´å¤©æ°” è¿˜æ˜¯å¥½æƒ³ä½ \", src: \"https://files.catbox.moe/891luf.mp3\" },\r\n                { id: 16, title: \"TheÂ truthÂ thatÂ youÂ leave\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/8ctqe9.mp3\" },\r\n                { id: 17, title: \"å†™åœ¨é£ä¸­çš„ä¿¡\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/61savh.mp3\" },\r\n                { id: 18, title: \"æ‚¬æºº\", artist: \"å¹¸ç¦å°±åƒå·§å…‹åŠ›ï¼Œåƒä¸€åŠå‘ç°è‡ªå·±æ˜¯ç‹—\", src: \"https://files.catbox.moe/faea0v.mp3\" },\r\n                { id: 19, title: \"æ—¶é—´ç…®é›¨\", artist: \"äººä¸äººä¹‹é—´çš„ç¼˜åˆ†åœ¨è–„å¦‚è‰ç¿¼çš„åŒæ—¶ï¼Œåˆæ˜¯ä¸€åœºæ— æ³•é¿å…çš„é›¨\", src: \"https://files.catbox.moe/mbljjb.mp3\" },\r\n                { id: 20, title: \"çº¢å°˜å®¢æ ˆ\", artist: \"å¦‚æœäººç”Ÿä¸€å®šè¦æˆå®¶ æˆ‘å¸Œæœ›æ˜¯å·´é»ä¸–å®¶\", src: \"https://files.catbox.moe/7lhtd6.mp3\" },\r\n                { id: 21, title: \"ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰\", artist: \"æˆ‘ä»¬ä¸ä¼šå†ç›¸é‡ï¼Œè¿™å°±æ˜¯åˆ†å¼€çš„æ„ä¹‰\", src: \"https://files.catbox.moe/f7lcuv.mp3\" }\r\n            ];\r\n\r\n            let currentSongIndex = songs.length - 1;\r\n            let currentSelectedPlaylist = [];\r\n            let currentSelectedSongIndex = 0;\r\n            let playbackMode = 'sequence';\r\n            const playbackModeTexts = {\r\n                'sequence': 'é¡ºåºæ’­æ”¾',\r\n                'repeat-one': 'å•æ›²å¾ªç¯',\r\n                'shuffle': 'éšæœºæ’­æ”¾',\r\n                'selected-sequence': 'é€‰å®šæ’­æ”¾'\r\n            };\r\n\r\n            function updatePlaybackModeButton() {\r\n                playbackModeButton.textContent = playbackModeTexts[playbackMode];\r\n            }\r\n\r\n            function handlePlaySelected() {\r\n                if (currentSelectedPlaylist.length > 0) {\r\n                    playbackMode = 'selected-sequence';\r\n                    updatePlaybackModeButton();\r\n                    currentSelectedSongIndex = 0;\r\n                    loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex], true);\r\n                } else {\r\n                    alert(\"è¯·è‡³å°‘é€‰æ‹©ä¸€é¦–æ­Œæ›²ã€‚\");\r\n                }\r\n            }\r\n\r\n            function handleClearSelection() {\r\n                currentSelectedPlaylist = [];\r\n                const selectorIcons = playlistElement.querySelectorAll('.song-selector-icon');\r\n                selectorIcons.forEach(icon => icon.classList.remove('selected'));\r\n                if (playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    updatePlaybackModeButton();\r\n                    loadSong(currentSongIndex, false);\r\n                }\r\n            }\r\n\r\n            // å°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šç§»åˆ°å‡½æ•°å¤–éƒ¨æˆ–ç¡®ä¿åœ¨DOMå°±ç»ªåç»‘å®šä¸€æ¬¡\r\n             if(playSelectedButton) playSelectedButton.addEventListener('click', handlePlaySelected);\r\n             if(clearSelectionButton) clearSelectionButton.addEventListener('click', handleClearSelection);\r\n\r\n\r\n            playbackModeButton.addEventListener('click', () => {\r\n                if (playbackMode === 'sequence') playbackMode = 'repeat-one';\r\n                else if (playbackMode === 'repeat-one') playbackMode = 'shuffle';\r\n                else if (playbackMode === 'shuffle' || playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    if (currentSelectedPlaylist.length > 0) { // ä»é€‰å®šæ’­æ”¾åˆ‡èµ°æ—¶ï¼Œæ¸…ç©ºé€‰æ‹©\r\n                        handleClearSelection(); // ä½¿ç”¨å°è£…çš„å‡½æ•°\r\n                    }\r\n                }\r\n                updatePlaybackModeButton();\r\n                audioPlayer.loop = (playbackMode === 'repeat-one');\r\n                if (playbackMode !== 'selected-sequence') {\r\n                     // ç¡®ä¿åœ¨éé€‰å®šæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼ŒåŠ è½½æ­£ç¡®çš„æ­Œæ›²\r\n                    if (songs.length > 0) loadSong(currentSongIndex, audioPlayer.paused);\r\n                }\r\n            });\r\n\r\n\r\n            function loadSong(songIndex, isAutoPlay = true) {\r\n                if (songIndex < 0 || songIndex >= songs.length) {\r\n                    console.warn(\"loadSong: æ— æ•ˆçš„æ­Œæ›²ç´¢å¼•æˆ–æ’­æ”¾åˆ—è¡¨ä¸ºç©º\", songIndex);\r\n                    return;\r\n                }\r\n                loadSongData(songs[songIndex], isAutoPlay);\r\n                currentSongIndex = songIndex;\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongFromPlaylist(songData, isAutoPlay = true) {\r\n                if (!songData) {\r\n                     console.warn(\"loadSongFromPlaylist: æ— æ•ˆçš„æ­Œæ›²æ•°æ®\");\r\n                    return;\r\n                }\r\n                loadSongData(songData, isAutoPlay);\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongData(song, isAutoPlay = true) {\r\n                if (!song) {\r\n                    console.error(\"loadSongData: æ­Œæ›²æ•°æ®ä¸ºç©º!\");\r\n                    currentSongTitleElement.textContent = \"é”™è¯¯ï¼šæ­Œæ›²æ•°æ®ä¸¢å¤±\";\r\n                    currentSongArtistElement.textContent = \"\";\r\n                    return;\r\n                }\r\n                currentSongTitleElement.textContent = song.title;\r\n                currentSongArtistElement.textContent = song.artist; // åŠ¨æ€æ›´æ–°æ­Œæ›²ä¿¡æ¯\r\n                audioPlayer.innerHTML = '';\r\n                const source = document.createElement('source');\r\n                source.src = song.src;\r\n                source.type = song.src.endsWith('.ogg') ? 'audio/ogg' : 'audio/mpeg';\r\n                audioPlayer.appendChild(source);\r\n                audioPlayer.load();\r\n                if (isAutoPlay) {\r\n                    stopOtherApexPlayers();\r\n                    audioPlayer.play().catch(e => console.error('Autoplay failed:', e, song.title));\r\n                }\r\n                audioPlayer.loop = (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0);\r\n                updateButtonStates();\r\n            }\r\n\r\n            audioPlayer.addEventListener('play', () => {\r\n                if (document.visibilityState === 'visible') stopOtherApexPlayers();\r\n            });\r\n\r\n            function playNextSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let nextIndex;\r\n                    if (songs.length <= 1) nextIndex = 0;\r\n                    else do { nextIndex = Math.floor(Math.random() * songs.length); } while (nextIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = nextIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex + 1) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function playPrevSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let prevIndex;\r\n                    if (songs.length <= 1) prevIndex = 0;\r\n                    else do { prevIndex = Math.floor(Math.random() * songs.length); } while (prevIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = prevIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex - 1 + targetPlaylist.length) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updatePlaylistUI() {\r\n                const actionsDiv = playlistElement.querySelector('.playlist-actions');\r\n                // åœ¨æ¸…ç©ºåˆ—è¡¨å‰ï¼Œå¦‚æœactionsDivå­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶ä»DOMä¸­ç§»é™¤ï¼Œç¨åå†æ·»åŠ å›å»\r\n                // è¿™æ ·å¯ä»¥é¿å…å®ƒè¢«innerHTML=''æ¸…é™¤æ‰ï¼ŒåŒæ—¶ç¡®ä¿å®ƒå§‹ç»ˆåœ¨åˆ—è¡¨é¡¹ä¹‹å\r\n                if (actionsDiv) actionsDiv.remove();\r\n\r\n\r\n                const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µä¼˜åŒ–æ€§èƒ½\r\n\r\n                songs.forEach((song, index) => {\r\n                    const listItem = document.createElement('li');\r\n\r\n                    const selectorIcon = document.createElement('span');\r\n                    selectorIcon.classList.add('song-selector-icon');\r\n                    selectorIcon.dataset.songId = song.id;\r\n                    if (currentSelectedPlaylist.some(s => s.id === song.id)) {\r\n                        selectorIcon.classList.add('selected');\r\n                    }\r\n                    selectorIcon.addEventListener('click', (e) => {\r\n                        e.stopPropagation();\r\n                        const songId = parseInt(selectorIcon.dataset.songId);\r\n                        const targetSong = songs.find(s => s.id === songId);\r\n                        const selectedIndex = currentSelectedPlaylist.findIndex(s => s.id === songId);\r\n\r\n                        if (selectedIndex > -1) {\r\n                            currentSelectedPlaylist.splice(selectedIndex, 1);\r\n                            selectorIcon.classList.remove('selected');\r\n                        } else {\r\n                            currentSelectedPlaylist.push(targetSong);\r\n                            selectorIcon.classList.add('selected');\r\n                        }\r\n                    });\r\n\r\n                    const songInfoDiv = document.createElement('div');\r\n                    songInfoDiv.classList.add('song-info');\r\n                    songInfoDiv.textContent = `${song.title} - ${song.artist}`; // ç¡®ä¿åˆ—è¡¨é¡¹ä¹Ÿæ˜¾ç¤ºartist\r\n                    songInfoDiv.addEventListener('click', () => {\r\n                        currentSongIndex = index;\r\n                        loadSong(currentSongIndex);\r\n                        if (playbackMode === 'selected-sequence') {\r\n                            playbackMode = 'sequence';\r\n                            updatePlaybackModeButton();\r\n                        }\r\n                    });\r\n\r\n                    listItem.appendChild(selectorIcon);\r\n                    listItem.appendChild(songInfoDiv);\r\n\r\n                    let isCurrentlyPlayingThisSong = false;\r\n                    const currentPlayingSong = (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length > 0) ? currentSelectedPlaylist[currentSelectedSongIndex] : songs[currentSongIndex];\r\n\r\n                    if (currentPlayingSong && currentPlayingSong.id === song.id) {\r\n                         isCurrentlyPlayingThisSong = true;\r\n                    }\r\n\r\n                    if (isCurrentlyPlayingThisSong) {\r\n                        listItem.classList.add('active');\r\n                    }\r\n                    fragment.appendChild(listItem);\r\n                });\r\n                playlistElement.innerHTML = ''; // æ¸…ç©ºæ—§çš„åˆ—è¡¨é¡¹\r\n                playlistElement.appendChild(fragment); // æ·»åŠ æ–°çš„åˆ—è¡¨é¡¹\r\n                if (actionsDiv) playlistElement.appendChild(actionsDiv); // å°†æŒ‰é’®åŒºåŸŸé‡æ–°åŠ åˆ°åˆ—è¡¨æœ«å°¾\r\n            }\r\n\r\n\r\n            function updateButtonStates() {\r\n                const targetPlaylist = playbackMode === 'selected-sequence' ? currentSelectedPlaylist : songs;\r\n                prevButton.disabled = targetPlaylist.length <= 1;\r\n                nextButton.disabled = targetPlaylist.length <= 1;\r\n            }\r\n\r\n            playlistToggle.addEventListener('click', () => {\r\n                playlistElement.classList.toggle('collapsed');\r\n                playlistToggle.classList.toggle('collapsed');\r\n                playlistTitleSpan.textContent = playlistElement.classList.contains('collapsed') ? ' â–º' : ' â–¼';\r\n            });\r\n\r\n            audioPlayer.addEventListener('ended', function() {\r\n                if (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0) {\r\n                    // loop\r\n                } else if (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length === 1) {\r\n                     loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex]);\r\n                }\r\n                else {\r\n                    playNextSongLogic();\r\n                }\r\n            });\r\n\r\n            if (songs.length > 0) {\r\n                songs.forEach((song, index) => song.id = index);\r\n                loadSong(currentSongIndex, false);\r\n                updatePlaybackModeButton();\r\n                playlistElement.classList.add('collapsed');\r\n                playlistToggle.classList.add('collapsed');\r\n                playlistTitleSpan.textContent = ' â–º';\r\n            } else {\r\n                currentSongTitleElement.textContent = \"æ’­æ”¾åˆ—è¡¨ä¸ºç©º\";\r\n                currentSongArtistElement.textContent = \"\";\r\n                audioPlayer.style.display = 'none';\r\n                document.querySelector('.playing-animation').style.display = 'none';\r\n                playlistToggle.style.display = 'none';\r\n                playbackModeButton.style.display = 'none';\r\n                if(playSelectedButton) playSelectedButton.style.display = 'none';\r\n                if(clearSelectionButton) clearSelectionButton.style.display = 'none';\r\n            }\r\n\r\n            prevButton.addEventListener('click', playPrevSongLogic);\r\n            nextButton.addEventListener('click', playNextSongLogic);\r\n\r\n            if ('IntersectionObserver' in window && thisPlayerElement) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && audioPlayer.paused && songs.length > 0) { /* Optional */ }\r\n                    });\r\n                });\r\n                observer.observe(thisPlayerElement);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n```\r\nâ€œå‘¼â€”â€”â€\r\n\r\nç»ˆåœºçš„å“¨å£°å“èµ·ï¼Œè°¢æ˜æœéšæ‰‹å°†ç¯®çƒæŠ›ç»™é˜Ÿå‹ï¼Œå–˜ç€ç²—æ°”ï¼ŒæŠ¬æ‰‹ç”¨çƒè¡£çš„ä¸‹æ‘†æŠ¹äº†ä¸€æŠŠè„¸ä¸Šçš„æ±—ã€‚å‰§çƒˆè¿åŠ¨åçš„å¿ƒè„è¿˜åœ¨èƒ¸è…”é‡Œç °ç °ç‹‚è·³ï¼Œæµ‘èº«ä¸Šä¸‹çš„æ¯ä¸€ä¸ªæ¯›å­”éƒ½ä»¿ä½›åœ¨è’¸è…¾ç€çƒ­æ°”ï¼Œä½†è¿™ç§åŠ›ç«­åçš„é…£ç•…æ„Ÿè®©ä»–å¿ƒæƒ…æå¥½ã€‚\r\n\r\nä»–æ‰’äº†æ‰’è¢«æ±—æ°´æ‰“æ¹¿çš„é¢å‘ï¼Œè§†çº¿ç¬¬ä¸€æ—¶é—´å°±æŠ•å‘äº†åœºè¾¹é‚£æ£µç†Ÿæ‚‰çš„é¦™æ¨Ÿæ ‘ä¸‹ã€‚\r\n\r\nå¸¸ä¹æœç„¶åœ¨é‚£é‡Œã€‚\r\n\r\nå¥¹ä»Šå¤©ç©¿äº†ä»¶å®½æ¾çš„ç™½è‰²Tæ¤ï¼Œå®‰é™åœ°ç«™åœ¨æ ‘è«é‡Œï¼Œåƒä¸€æœµé—ä¸–ç‹¬ç«‹çš„å°èŠ±ã€‚\r\n\r\nè°¢æ˜æœçš„å˜´è§’ä¸å—æ§åˆ¶åœ°å‘ä¸Šæ‰¬èµ·ï¼Œæ­£å‡†å¤‡è¿ˆæ­¥æœå¥¹èµ°è¿‡å»ï¼Œè„šä¸‹çš„åŠ¨ä½œå´çŒ›åœ°ä¸€é¡¿ã€‚\r\n\r\nåªè§ä¸€ä¸ªç©¿ç€åŒæ¬¾ç³»æœçš„ç”·ç”Ÿæ­£ç«™åœ¨å¸¸ä¹é¢å‰ï¼Œè„¸ä¸Šå¸¦ç€ç‚¹æ†¨åšçš„ç¬‘å®¹ï¼Œä¼¼ä¹åœ¨è·Ÿå¥¹è¯´ç€ä»€ä¹ˆã€‚è€Œä¸‹ä¸€ç§’ï¼Œè°¢æ˜æœçœ¼é‡Œçš„é«˜å…‰å½»åº•ç†„ç­äº†â€”â€”å¸¸ä¹ä»éšèº«çš„å¸†å¸ƒåŒ…é‡Œæ‹¿å‡ºä¸€ç“¶çŸ¿æ³‰æ°´ï¼Œé€’ç»™äº†é‚£ä¸ªç”·ç”Ÿã€‚\r\n\r\né‚£ä¸ªç”·ç”Ÿæ¥è¿‡å»ï¼Œè¿˜ç¬‘ç€è¯´äº†å¥â€œè°¢è°¢â€ã€‚\r\n\r\nè°¢æ˜æœè„¸ä¸Šçš„ç¬‘å®¹ç¬é—´æ¶ˆå¤±å¾—æ— å½±æ— è¸ªã€‚\r\n\r\nä»–é¢æ— è¡¨æƒ…åœ°ç«™åœ¨åŸåœ°ï¼Œçœ‹ç€é‚£ä¸€å¹•ï¼Œæ„Ÿè§‰å‚æ™šçš„çƒ­é£éƒ½å˜å¾—é»è…»çƒ¦äººã€‚ä»–æ…¢æ‚ æ‚ åœ°ã€ä¸€æ­¥ä¸€æ­¥åœ°èµ°äº†è¿‡å»ï¼Œå¸¦ç€æ‰“å®Œçƒåçš„ç–²æƒ«å’Œä¸€è‚¡å­æ‡’æ´‹æ´‹çš„ã€è°éƒ½åˆ«æ¥æƒ¹æˆ‘çš„ä½æ°”å‹ã€‚\r\n\r\nâ€œè¯¶~â€\r\n\r\nä»–æ‹–ç€é•¿é•¿çš„ã€æ„å‘³ä¸æ˜çš„è°ƒå­å¼€äº†å£ï¼ŒæˆåŠŸè®©é‚£ä¸¤ä¸ªäººåŒæ—¶å›è¿‡å¤´æ¥çœ‹ä»–ã€‚\r\n\r\nâ€œæˆ‘å½“æ˜¯è°å‘¢ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬äººç¾å¿ƒå–„ã€æ™®åº¦ä¼—ç”Ÿçš„å¸¸ä¹åŒå­¦å—ï¼Ÿâ€è°¢æ˜æœåŒæ‰‹æ’å…œï¼Œæ­ªç€å¤´ï¼Œè§†çº¿åœ¨å¸¸ä¹å’Œé‚£ä¸ªè¿˜æ‹¿ç€æ°´çš„ç”·ç”Ÿä¹‹é—´æ¥å›æ‰«äº†ä¸€åœˆï¼Œè¯­æ°”é‡Œæ˜¯æ¯«ä¸æ©é¥°çš„è°ƒä¾ƒã€‚\r\n\r\nä»–æ‡’æ´‹æ´‹åœ°å€šåœ¨æ ‘å¹²ä¸Šï¼Œç›®å…‰æœ€ç»ˆè½åœ¨é‚£ç“¶æ°´ä¸Šï¼Œå•§äº†ä¸€å£°ã€‚\r\n\r\nâ€œå“‡å“¦ï¼ŒçœŸæ˜¯è¾›è‹¦ä½ äº†ã€‚â€ä»–çœ‹ç€å¸¸ä¹ï¼Œçœ¼ç¥å´åƒåˆ€å­ä¸€æ ·åˆ®è¿‡æ—è¾¹çš„ç”·ç”Ÿï¼Œâ€œè¿™ä¹ˆçƒ­çš„å¤©ï¼Œè¿˜äº²è‡ªè·‘æ¥é€æ¸©æš–ï¼Œä½ çœŸçš„ï¼Œæˆ‘å“­æ­»ï¼Œæ€ä¹ˆä¼šæœ‰ä½ è¿™ä¹ˆå–„è‰¯çš„å¥³è©è¨ã€‚â€\r\n\r\né‚£ä¸ªç”·ç”Ÿè¢«ä»–è¿™ç•ªé˜´é˜³æ€ªæ°”çš„è¯è¯´å¾—æœ‰äº›å°´å°¬ï¼Œæ‹¿ç€æ°´ç“¶çš„æ‰‹éƒ½ä¸çŸ¥é“è¯¥å¾€å“ªæ”¾ã€‚\r\n\r\nè°¢æ˜æœè½¬å¤´çœ‹å‘ç”·ç”Ÿï¼šâ€œä¸æ˜¯å“¥ä»¬ï¼Œæ¸´äº†è‡ªå·±ä¸ä¼šä¹°å•Šï¼Ÿå–å¥³å­©å­çš„æ°´ä½ å¥½æ„æ€å—ï¼Ÿâ€\r\n\r\nâ€œå“ã€‚â€ä»–è¯é”‹ä¸€è½¬ï¼Œé•¿é•¿åœ°å¹äº†å£æ°”ï¼Œçœ¼ç¥å¹½æ€¨å¾—åƒåªè¢«ä¸»äººæŠ›å¼ƒçš„å¤§å‹çŠ¬ï¼Œâ€œä¸åƒæˆ‘ï¼Œå‘½è‹¦ã€‚æ‰“ä¸ªçƒè·Ÿåœ¨æ’’å“ˆæ‹‰æ²™æ¼ é‡Œè·‘äº†åå…¬é‡Œä¸€æ ·ï¼Œæ¸´å¾—å—“å­ç›´å†’çƒŸï¼Œä¹Ÿæ²¡ä¸ªäººç–¼æ²¡äººç®¡çš„ã€‚â€\r\n\r\nä»–ä¸€è¾¹è¯´ï¼Œä¸€è¾¹è¿˜æ•…æ„ç”¨æ‰‹èƒŒè¹­äº†è¹­å¹²è£‚çš„å˜´å”‡ï¼Œé‚£åŒæ¡ƒèŠ±çœ¼ç›´å‹¾å‹¾åœ°ç›¯ç€å¸¸ä¹ï¼Œæ»¡è„¸éƒ½å†™ç€â€œæˆ‘å¥½å¯æ€œï¼Œä½ æ€ä¹ˆä¸å®‰æ…°æˆ‘â€çš„æ§è¯‰ã€‚\r\n\r\n","```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ç°ç™½é…ç”µè„‘æœ€é€‚é…ç‰ˆæœ¬</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Microsoft YaHei', sans-serif;\r\n        }\r\n        .cassette-wrapper {\r\n            position: relative;\r\n            width: 95%;\r\n            max-width: 450px;\r\n            margin: 20px auto;\r\n            box-sizing: border-box;\r\n        }\r\n        .cassette-container {\r\n            background: linear-gradient(to right, #e0e0e0, #cccccc);\r\n            padding: 15px;\r\n            border-radius: 25px;\r\n            box-shadow:\r\n                0 4px 16px rgba(0,0,0,0.15),\r\n                0 0 0 4px #fff,\r\n                0 0 0 8px #a0a0a0;\r\n            box-sizing: border-box;\r\n            padding-top: 70px;\r\n            padding-bottom: 20px;\r\n            position: relative;\r\n        }\r\n        .avatar {\r\n            position: absolute;\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: 50%;\r\n            border: 2px solid #fff;\r\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\r\n            z-index: 1;\r\n            background-color: #f0f0f0;\r\n            object-fit: cover;\r\n            top: 15px;\r\n        }\r\n        .avatar.user {\r\n            right: 45px;\r\n        }\r\n        .avatar.char {\r\n            left: 45px;\r\n        }\r\n        .distance-text {\r\n            position: absolute;\r\n            top: 30px;\r\n            left: 0;\r\n            right: 0;\r\n            text-align: center;\r\n            font-size: 13px;\r\n            color: #555555;\r\n            z-index: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        h1 {\r\n            color: #333333;\r\n            font-size: 18px;\r\n            margin: 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            margin-bottom: 12px;\r\n        }\r\n        .music-info {\r\n            font-size: 14px;\r\n            color: #666666;\r\n            margin: 10px 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        audio {\r\n            width: 100%;\r\n            margin-top: 10px;\r\n            border-radius: 20px;\r\n            box-sizing: border-box;\r\n            height: 45px;\r\n        }\r\n        audio::-webkit-media-controls-panel {\r\n            background: linear-gradient(to right, #bbbbbb, #999999);\r\n        }\r\n        .playing-animation {\r\n            height: 2px;\r\n            background: linear-gradient(90deg,\r\n                #777777 25%, transparent 25%,\r\n                transparent 50%, #777777 50%,\r\n                #777777 75%, transparent 75%,\r\n                transparent 100%);\r\n            background-size: 20px 100%;\r\n            animation: move 1s linear infinite;\r\n            margin: 10px 0;\r\n        }\r\n        @keyframes move {\r\n            from { background-position: 0 0; }\r\n            to { background-position: 20px 0; }\r\n        }\r\n\r\n        .playlist-container {\r\n            margin-top: 20px;\r\n            background-color: #f0f0f0;\r\n            border-radius: 15px;\r\n            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);\r\n        }\r\n        .playlist-title {\r\n            font-size: 15px;\r\n            color: #444;\r\n            padding: 10px;\r\n            margin: 0;\r\n            text-align: center;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            border-bottom: 1px solid #ddd;\r\n            border-radius: 15px 15px 0 0;\r\n        }\r\n        .playlist-title.collapsed + .playlist {\r\n             max-height: 0;\r\n             padding-top: 0;\r\n             padding-bottom: 0;\r\n             overflow: hidden;\r\n             border-top: none;\r\n        }\r\n         .playlist-title.collapsed {\r\n            border-radius: 15px;\r\n            border-bottom: none;\r\n        }\r\n\r\n        .playlist {\r\n            list-style: none;\r\n            padding: 0;\r\n            margin: 0;\r\n            max-height: 180px;\r\n            overflow-y: auto;\r\n            transition: max-height 0.3s ease-out, padding 0.3s ease-out;\r\n            border-top: 1px solid #ddd;\r\n            border-radius: 0 0 15px 15px;\r\n        }\r\n        .playlist li {\r\n            padding: 8px 12px;\r\n            font-size: 13px;\r\n            color: #555;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.2s ease;\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        .song-selector-icon {\r\n            width: 20px;\r\n            height: 20px;\r\n            margin-right: 10px;\r\n            border: 1px solid #aaa;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: contain;\r\n            flex-shrink: 0;\r\n        }\r\n        .song-selector-icon.selected {\r\n            background-image: url('https://files.catbox.moe/8e819d.png');\r\n            border-color: transparent;\r\n        }\r\n        .song-info {\r\n            flex-grow: 1;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .playlist li:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n        .playlist li.active .song-info {\r\n            /* background-color: #cccccc; */ /* å†³å®šé«˜äº®æ–¹å¼ */\r\n            color: #222;\r\n            font-weight: bold;\r\n        }\r\n        .playlist li.active .song-selector-icon {\r\n             /* é€‰ä¸­ä¸”æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²çš„é€‰æ‹©å™¨å›¾æ ‡å¯ä»¥æœ‰ç‰¹æ®Šæ ·å¼ */\r\n        }\r\n\r\n        .playlist-actions {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 10px 0;\r\n            background-color: #f0f0f0;\r\n            border-top: 1px solid #ddd;\r\n        }\r\n        .playlist-actions button {\r\n            background-color: #888888;\r\n            color: white;\r\n            border: none;\r\n            padding: 6px 12px;\r\n            margin: 0 8px;\r\n            border-radius: 10px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: background-color 0.2s ease;\r\n        }\r\n        .playlist-actions button:hover {\r\n            background-color: #666666;\r\n        }\r\n\r\n        .controls {\r\n            text-align: center;\r\n            margin-top: 15px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n        .controls button {\r\n            background-color: #a0a0a0;\r\n            color: white;\r\n            border: none;\r\n            padding: 8px 15px;\r\n            margin: 0 5px;\r\n            border-radius: 15px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: background-color 0.2s ease;\r\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n        }\r\n        .controls button:hover {\r\n            background-color: #888888;\r\n        }\r\n        .controls button:disabled {\r\n            background-color: #d0d0d0;\r\n            cursor: not-allowed;\r\n        }\r\n        .playback-mode-button {\r\n            padding: 6px 10px !important;\r\n            font-size: 12px !important;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"cassette-wrapper\" id=\"apex-music-player\">\r\n        <img class=\"avatar user\" src=\"https://files.catbox.moe/3gok4b.png\" alt=\"User Avatar\">\r\n        <img class=\"avatar char\" src=\"https://files.catbox.moe/q3zzgb.png\" alt=\"Char Avatar\">\r\n\r\n        <div class=\"distance-text\">â€”ç›¸è·0.01kmâ€”</div>\r\n\r\n        <div class=\"cassette-container\">\r\n            <h1 id=\"current-song-title\">ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰</h1>\r\n            <div class=\"music-info\" id=\"current-song-artist\">å¦‚æœä¸€å®šè¦ç—›å‡ºç—•è¿¹æ‰ç®—çˆ±ï¼Œæˆ‘å¸Œæœ›æ˜¯ä½ çš„å»ç—•</div>\r\n            <div class=\"playing-animation\"></div>\r\n            <audio id=\"audio-player\" controls>\r\n                ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚\r\n            </audio>\r\n\r\n            <div class=\"controls\">\r\n                <button id=\"prev-button\">ä¸Šä¸€é¦–</button>\r\n                <button id=\"playback-mode-button\">é¡ºåºæ’­æ”¾</button>\r\n                <button id=\"next-button\">ä¸‹ä¸€é¦–</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"playlist-container\">\r\n            <div class=\"playlist-title\" id=\"playlist-toggle\">æ’­æ”¾åˆ—è¡¨ <span>â–¼</span></div>\r\n            <ul id=\"playlist\" class=\"playlist\">\r\n                <!-- æ­Œæ›²åˆ—è¡¨é¡¹ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->\r\n                <div class=\"playlist-actions\">\r\n                    <button id=\"play-selected-button\">æ’­æ”¾é€‰ä¸­</button>\r\n                    <button id=\"clear-selection-button\">æ¸…ç©ºé€‰æ‹©</button>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            const thisPlayerId = 'apex-music-player';\r\n            const thisPlayerElement = document.getElementById(thisPlayerId);\r\n\r\n            function stopOtherApexPlayers() {\r\n                const allAudioElements = document.querySelectorAll('audio');\r\n                allAudioElements.forEach(audio => {\r\n                    let parentPlayer = audio.closest('.cassette-wrapper');\r\n                    if (parentPlayer && parentPlayer.id !== thisPlayerId && !audio.paused) {\r\n                        audio.pause();\r\n                    }\r\n                });\r\n            }\r\n\r\n            const audioPlayer = document.getElementById('audio-player');\r\n            const playlistElement = document.getElementById('playlist');\r\n            const playSelectedButton = document.getElementById('play-selected-button'); // è·å–æŒ‰é’®\r\n            const clearSelectionButton = document.getElementById('clear-selection-button'); // è·å–æŒ‰é’®\r\n\r\n            const currentSongTitleElement = document.getElementById('current-song-title');\r\n            const currentSongArtistElement = document.getElementById('current-song-artist');\r\n            const prevButton = document.getElementById('prev-button');\r\n            const nextButton = document.getElementById('next-button');\r\n            const playlistToggle = document.getElementById('playlist-toggle');\r\n            const playlistTitleSpan = playlistToggle.querySelector('span');\r\n            const playbackModeButton = document.getElementById('playback-mode-button');\r\n\r\n            const songs = [\r\n                { id: 0, title: \"í”ì ê¸°ê´€ (ç—•è¿¹å™¨å®˜)\", artist: \"ç—•è¿¹å™¨å®˜çš„æ„æ€æ˜¯ï¼Œæˆ‘æ›´çˆ±ä½ \", src: \"https://files.catbox.moe/1ymem4.mp3\" },\r\n                { id: 1, title: \"ë‹¬ê³¼ 6íœìŠ¤ (æœˆäº®ä¸6ä¾¿å£«)\", artist: \"æˆ–è®¸ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œåªè¦ä½ ä¸é€ƒèµ°ï¼Œå‰©ä¸‹çš„éƒ½è®©æˆ‘æ¥\", src: \"https://files.catbox.moe/0fcoxb.mp3\" },\r\n                { id: 2, title: \"ë‚˜ë§Œ ë°”ë¼ë´ (Part 2)\", artist: \"æˆ‘è¯´æˆ‘çš„å¿ƒä¹Ÿå’Œæœ€åˆä¸€æ ·ï¼Œä¸ºä½ è·³åŠ¨ç€t\", src: \"https://files.catbox.moe/kcsomz.mp3\" },\r\n                { id: 3, title: \"å…³é”®è¯\", artist: \"æˆ‘ä¸å¤ªç¡®å®šï¼Œçˆ±æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯åŠ¨è¯æˆ–åè¯\", src: \"https://files.catbox.moe/51902f.mp3\" },\r\n                { id: 4, title: \"é—å¤±çš„å¿ƒè·³\", artist: \"å¿ƒç—›ç€ ä½ çš„çˆ± æ®‹é…·çš„çºªå¿µå“t\", src: \"https://files.catbox.moe/d1ph63.ogg\" },\r\n                { id: 5, title: \"å¤åˆ»å›å¿†\", artist: \"å›å¿†èƒ½å¤åˆ»ï¼Œä½ ä¼šå›åˆ°æˆ‘èº«è¾¹å—\", src: \"https://files.catbox.moe/ozgfpc.mp3\" },\r\n                { id: 6, title: \"äºæ˜¯\", artist: \"è¯´æ¥åˆè¯´å»è¿˜æ˜¯æ”¾ä¸ä¸‹ä½ \", src: \"https://files.catbox.moe/h1vey9.mp3\" },\r\n                { id: 7, title: \"è¯€åˆ«ä¹¦\", artist: \"å¦‚æœæ€»è¦åˆ†å¼€ï¼Œé‚£ç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ\", src: \"https://files.catbox.moe/l9sdul.mp3\" },\r\n                { id: 8, title: \"ä¸€ç¬‘å€¾åŸ\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/wpilgo.mp3\" },\r\n                { id: 9, title: \"çº¯éŸ³ä¹\", artist: \"è®©æˆ‘çœ‹ç©¿ä½ çš„çœ¼ç› è¿˜æœ‰ä½ çš„å¿ƒ\", src: \"https://files.catbox.moe/st5f4k.mp3\" },\r\n                { id: 10, title: \"èŒèŒçš„çº¯éŸ³ä¹\", artist: \"oâŒ„oæ˜¯å¾®ç¬‘ o_oæ˜¯è­¦å‘Š o.oæ˜¯ä½™é¢ oã‰¨oæ˜¯è½»æ¾ç†Š\", src: \"https://files.catbox.moe/4653sq.mp3\" },\r\n                { id: 11, title: \"Una Mattian\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/ckiz5f.mp3\" },\r\n                { id: 12, title: \"gå°è°ƒå·´èµ«å¹³å‡å¾‹å˜å¥æ›²\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/ynbgj9.mp3\" },\r\n                { id: 13, title: \"ä¸‹ä¸€ç§’\", artist: \"è®©æˆ‘ä»¬éƒ½å˜æˆå¹¸ç¦å¤§ç‹Ëµ>ğ–¥¦<Ëµ!!\", src: \"https://files.catbox.moe/k3ssag.mp3\" },\r\n                { id: 14, title: \"è¤ç«è™«çº¯éŸ³ä¹\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/xsg62j.mp3\" },\r\n                { id: 15, title: \"æ— æ„Ÿ\", artist: \"è¯¥è¯´ä»€ä¹ˆå¥½å‘¢ æ˜¯è¯´å¤©æ°” è¿˜æ˜¯å¥½æƒ³ä½ \", src: \"https://files.catbox.moe/891luf.mp3\" },\r\n                { id: 16, title: \"TheÂ truthÂ thatÂ youÂ leave\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/8ctqe9.mp3\" },\r\n                { id: 17, title: \"å†™åœ¨é£ä¸­çš„ä¿¡\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/61savh.mp3\" },\r\n                { id: 18, title: \"æ‚¬æºº\", artist: \"å¹¸ç¦å°±åƒå·§å…‹åŠ›ï¼Œåƒä¸€åŠå‘ç°è‡ªå·±æ˜¯ç‹—\", src: \"https://files.catbox.moe/faea0v.mp3\" },\r\n                { id: 19, title: \"æ—¶é—´ç…®é›¨\", artist: \"äººä¸äººä¹‹é—´çš„ç¼˜åˆ†åœ¨è–„å¦‚è‰ç¿¼çš„åŒæ—¶ï¼Œåˆæ˜¯ä¸€åœºæ— æ³•é¿å…çš„é›¨\", src: \"https://files.catbox.moe/mbljjb.mp3\" },\r\n                { id: 20, title: \"çº¢å°˜å®¢æ ˆ\", artist: \"å¦‚æœäººç”Ÿä¸€å®šè¦æˆå®¶ æˆ‘å¸Œæœ›æ˜¯å·´é»ä¸–å®¶\", src: \"https://files.catbox.moe/7lhtd6.mp3\" },\r\n                { id: 21, title: \"ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰\", artist: \"æˆ‘ä»¬ä¸ä¼šå†ç›¸é‡ï¼Œè¿™å°±æ˜¯åˆ†å¼€çš„æ„ä¹‰\", src: \"https://files.catbox.moe/f7lcuv.mp3\" }\r\n            ];\r\n\r\n            let currentSongIndex = songs.length - 1;\r\n            let currentSelectedPlaylist = [];\r\n            let currentSelectedSongIndex = 0;\r\n            let playbackMode = 'sequence';\r\n            const playbackModeTexts = {\r\n                'sequence': 'é¡ºåºæ’­æ”¾',\r\n                'repeat-one': 'å•æ›²å¾ªç¯',\r\n                'shuffle': 'éšæœºæ’­æ”¾',\r\n                'selected-sequence': 'é€‰å®šæ’­æ”¾'\r\n            };\r\n\r\n            function updatePlaybackModeButton() {\r\n                playbackModeButton.textContent = playbackModeTexts[playbackMode];\r\n            }\r\n\r\n            function handlePlaySelected() {\r\n                if (currentSelectedPlaylist.length > 0) {\r\n                    playbackMode = 'selected-sequence';\r\n                    updatePlaybackModeButton();\r\n                    currentSelectedSongIndex = 0;\r\n                    loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex], true);\r\n                } else {\r\n                    alert(\"è¯·è‡³å°‘é€‰æ‹©ä¸€é¦–æ­Œæ›²ã€‚\");\r\n                }\r\n            }\r\n\r\n            function handleClearSelection() {\r\n                currentSelectedPlaylist = [];\r\n                const selectorIcons = playlistElement.querySelectorAll('.song-selector-icon');\r\n                selectorIcons.forEach(icon => icon.classList.remove('selected'));\r\n                if (playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    updatePlaybackModeButton();\r\n                    loadSong(currentSongIndex, false);\r\n                }\r\n            }\r\n\r\n            // å°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šç§»åˆ°å‡½æ•°å¤–éƒ¨æˆ–ç¡®ä¿åœ¨DOMå°±ç»ªåç»‘å®šä¸€æ¬¡\r\n             if(playSelectedButton) playSelectedButton.addEventListener('click', handlePlaySelected);\r\n             if(clearSelectionButton) clearSelectionButton.addEventListener('click', handleClearSelection);\r\n\r\n\r\n            playbackModeButton.addEventListener('click', () => {\r\n                if (playbackMode === 'sequence') playbackMode = 'repeat-one';\r\n                else if (playbackMode === 'repeat-one') playbackMode = 'shuffle';\r\n                else if (playbackMode === 'shuffle' || playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    if (currentSelectedPlaylist.length > 0) { // ä»é€‰å®šæ’­æ”¾åˆ‡èµ°æ—¶ï¼Œæ¸…ç©ºé€‰æ‹©\r\n                        handleClearSelection(); // ä½¿ç”¨å°è£…çš„å‡½æ•°\r\n                    }\r\n                }\r\n                updatePlaybackModeButton();\r\n                audioPlayer.loop = (playbackMode === 'repeat-one');\r\n                if (playbackMode !== 'selected-sequence') {\r\n                     // ç¡®ä¿åœ¨éé€‰å®šæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼ŒåŠ è½½æ­£ç¡®çš„æ­Œæ›²\r\n                    if (songs.length > 0) loadSong(currentSongIndex, audioPlayer.paused);\r\n                }\r\n            });\r\n\r\n\r\n            function loadSong(songIndex, isAutoPlay = true) {\r\n                if (songIndex < 0 || songIndex >= songs.length) {\r\n                    console.warn(\"loadSong: æ— æ•ˆçš„æ­Œæ›²ç´¢å¼•æˆ–æ’­æ”¾åˆ—è¡¨ä¸ºç©º\", songIndex);\r\n                    return;\r\n                }\r\n                loadSongData(songs[songIndex], isAutoPlay);\r\n                currentSongIndex = songIndex;\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongFromPlaylist(songData, isAutoPlay = true) {\r\n                if (!songData) {\r\n                     console.warn(\"loadSongFromPlaylist: æ— æ•ˆçš„æ­Œæ›²æ•°æ®\");\r\n                    return;\r\n                }\r\n                loadSongData(songData, isAutoPlay);\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongData(song, isAutoPlay = true) {\r\n                if (!song) {\r\n                    console.error(\"loadSongData: æ­Œæ›²æ•°æ®ä¸ºç©º!\");\r\n                    currentSongTitleElement.textContent = \"é”™è¯¯ï¼šæ­Œæ›²æ•°æ®ä¸¢å¤±\";\r\n                    currentSongArtistElement.textContent = \"\";\r\n                    return;\r\n                }\r\n                currentSongTitleElement.textContent = song.title;\r\n                currentSongArtistElement.textContent = song.artist; // åŠ¨æ€æ›´æ–°æ­Œæ›²ä¿¡æ¯\r\n                audioPlayer.innerHTML = '';\r\n                const source = document.createElement('source');\r\n                source.src = song.src;\r\n                source.type = song.src.endsWith('.ogg') ? 'audio/ogg' : 'audio/mpeg';\r\n                audioPlayer.appendChild(source);\r\n                audioPlayer.load();\r\n                if (isAutoPlay) {\r\n                    stopOtherApexPlayers();\r\n                    audioPlayer.play().catch(e => console.error('Autoplay failed:', e, song.title));\r\n                }\r\n                audioPlayer.loop = (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0);\r\n                updateButtonStates();\r\n            }\r\n\r\n            audioPlayer.addEventListener('play', () => {\r\n                if (document.visibilityState === 'visible') stopOtherApexPlayers();\r\n            });\r\n\r\n            function playNextSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let nextIndex;\r\n                    if (songs.length <= 1) nextIndex = 0;\r\n                    else do { nextIndex = Math.floor(Math.random() * songs.length); } while (nextIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = nextIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex + 1) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function playPrevSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let prevIndex;\r\n                    if (songs.length <= 1) prevIndex = 0;\r\n                    else do { prevIndex = Math.floor(Math.random() * songs.length); } while (prevIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = prevIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex - 1 + targetPlaylist.length) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updatePlaylistUI() {\r\n                const actionsDiv = playlistElement.querySelector('.playlist-actions');\r\n                // åœ¨æ¸…ç©ºåˆ—è¡¨å‰ï¼Œå¦‚æœactionsDivå­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶ä»DOMä¸­ç§»é™¤ï¼Œç¨åå†æ·»åŠ å›å»\r\n                // è¿™æ ·å¯ä»¥é¿å…å®ƒè¢«innerHTML=''æ¸…é™¤æ‰ï¼ŒåŒæ—¶ç¡®ä¿å®ƒå§‹ç»ˆåœ¨åˆ—è¡¨é¡¹ä¹‹å\r\n                if (actionsDiv) actionsDiv.remove();\r\n\r\n\r\n                const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µä¼˜åŒ–æ€§èƒ½\r\n\r\n                songs.forEach((song, index) => {\r\n                    const listItem = document.createElement('li');\r\n\r\n                    const selectorIcon = document.createElement('span');\r\n                    selectorIcon.classList.add('song-selector-icon');\r\n                    selectorIcon.dataset.songId = song.id;\r\n                    if (currentSelectedPlaylist.some(s => s.id === song.id)) {\r\n                        selectorIcon.classList.add('selected');\r\n                    }\r\n                    selectorIcon.addEventListener('click', (e) => {\r\n                        e.stopPropagation();\r\n                        const songId = parseInt(selectorIcon.dataset.songId);\r\n                        const targetSong = songs.find(s => s.id === songId);\r\n                        const selectedIndex = currentSelectedPlaylist.findIndex(s => s.id === songId);\r\n\r\n                        if (selectedIndex > -1) {\r\n                            currentSelectedPlaylist.splice(selectedIndex, 1);\r\n                            selectorIcon.classList.remove('selected');\r\n                        } else {\r\n                            currentSelectedPlaylist.push(targetSong);\r\n                            selectorIcon.classList.add('selected');\r\n                        }\r\n                    });\r\n\r\n                    const songInfoDiv = document.createElement('div');\r\n                    songInfoDiv.classList.add('song-info');\r\n                    songInfoDiv.textContent = `${song.title} - ${song.artist}`; // ç¡®ä¿åˆ—è¡¨é¡¹ä¹Ÿæ˜¾ç¤ºartist\r\n                    songInfoDiv.addEventListener('click', () => {\r\n                        currentSongIndex = index;\r\n                        loadSong(currentSongIndex);\r\n                        if (playbackMode === 'selected-sequence') {\r\n                            playbackMode = 'sequence';\r\n                            updatePlaybackModeButton();\r\n                        }\r\n                    });\r\n\r\n                    listItem.appendChild(selectorIcon);\r\n                    listItem.appendChild(songInfoDiv);\r\n\r\n                    let isCurrentlyPlayingThisSong = false;\r\n                    const currentPlayingSong = (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length > 0) ? currentSelectedPlaylist[currentSelectedSongIndex] : songs[currentSongIndex];\r\n\r\n                    if (currentPlayingSong && currentPlayingSong.id === song.id) {\r\n                         isCurrentlyPlayingThisSong = true;\r\n                    }\r\n\r\n                    if (isCurrentlyPlayingThisSong) {\r\n                        listItem.classList.add('active');\r\n                    }\r\n                    fragment.appendChild(listItem);\r\n                });\r\n                playlistElement.innerHTML = ''; // æ¸…ç©ºæ—§çš„åˆ—è¡¨é¡¹\r\n                playlistElement.appendChild(fragment); // æ·»åŠ æ–°çš„åˆ—è¡¨é¡¹\r\n                if (actionsDiv) playlistElement.appendChild(actionsDiv); // å°†æŒ‰é’®åŒºåŸŸé‡æ–°åŠ åˆ°åˆ—è¡¨æœ«å°¾\r\n            }\r\n\r\n\r\n            function updateButtonStates() {\r\n                const targetPlaylist = playbackMode === 'selected-sequence' ? currentSelectedPlaylist : songs;\r\n                prevButton.disabled = targetPlaylist.length <= 1;\r\n                nextButton.disabled = targetPlaylist.length <= 1;\r\n            }\r\n\r\n            playlistToggle.addEventListener('click', () => {\r\n                playlistElement.classList.toggle('collapsed');\r\n                playlistToggle.classList.toggle('collapsed');\r\n                playlistTitleSpan.textContent = playlistElement.classList.contains('collapsed') ? ' â–º' : ' â–¼';\r\n            });\r\n\r\n            audioPlayer.addEventListener('ended', function() {\r\n                if (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0) {\r\n                    // loop\r\n                } else if (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length === 1) {\r\n                     loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex]);\r\n                }\r\n                else {\r\n                    playNextSongLogic();\r\n                }\r\n            });\r\n\r\n            if (songs.length > 0) {\r\n                songs.forEach((song, index) => song.id = index);\r\n                loadSong(currentSongIndex, false);\r\n                updatePlaybackModeButton();\r\n                playlistElement.classList.add('collapsed');\r\n                playlistToggle.classList.add('collapsed');\r\n                playlistTitleSpan.textContent = ' â–º';\r\n            } else {\r\n                currentSongTitleElement.textContent = \"æ’­æ”¾åˆ—è¡¨ä¸ºç©º\";\r\n                currentSongArtistElement.textContent = \"\";\r\n                audioPlayer.style.display = 'none';\r\n                document.querySelector('.playing-animation').style.display = 'none';\r\n                playlistToggle.style.display = 'none';\r\n                playbackModeButton.style.display = 'none';\r\n                if(playSelectedButton) playSelectedButton.style.display = 'none';\r\n                if(clearSelectionButton) clearSelectionButton.style.display = 'none';\r\n            }\r\n\r\n            prevButton.addEventListener('click', playPrevSongLogic);\r\n            nextButton.addEventListener('click', playNextSongLogic);\r\n\r\n            if ('IntersectionObserver' in window && thisPlayerElement) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && audioPlayer.paused && songs.length > 0) { /* Optional */ }\r\n                    });\r\n                });\r\n                observer.observe(thisPlayerElement);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n```\r\nåˆåçš„é˜³å…‰é€è¿‡å¹²å‡€çš„çª—ç»ç’ƒï¼Œåœ¨æœ¨è´¨è¯¾æ¡Œä¸ŠæŠ•ä¸‹æš–èèçš„å…‰æ–‘ï¼Œç©ºæ°”ä¸­æ¼‚æµ®ç€ç»†å°çš„å°˜åŸƒå’Œç²‰ç¬”æœ«çš„å‘³é“ã€‚è®²å°ä¸Šçš„å†å²è€å¸ˆæ­£ç”¨ä»–é‚£ä¸é«˜ä¸ä½çš„è¯­è°ƒè®²ç€ç‹æœæ›´è¿­çš„æ¯ç‡¥å†å²ï¼Œå¤§å¤šæ•°å­¦ç”Ÿéƒ½æ˜æ˜æ¬²ç¡ï¼Œåªæœ‰å¸¸ä¹åå¾—ç¬”ç›´ã€‚\r\n\r\nå¥¹ä¹Œé»‘çš„å¤´å‘è¢«è®¤çœŸåœ°åˆ«åœ¨è€³åï¼Œéœ²å‡ºç™½çš™å°å·§çš„è€³æœµå’Œä¸€æˆªè„†å¼±çš„è„–é¢ˆï¼Œé˜³å…‰å‹¾å‹’å‡ºå¥¹æŸ”å’Œçš„ä¾§è„¸è½®å»“ï¼Œé•¿è€Œç¿˜çš„ç«æ¯›åƒå°åˆ·å­ä¸€æ ·ï¼Œéšç€çœ¨çœ¼çš„åŠ¨ä½œè½»è½»é¢¤åŠ¨ã€‚å¥¹å¬å¾—å¾ˆä¸“æ³¨ï¼Œå¶å°”ä½å¤´åœ¨ç¬”è®°æœ¬ä¸Šå†™ç€ä»€ä¹ˆï¼Œå®Œå…¨æ²¡æœ‰æ³¨æ„åˆ°èº«åçš„åŠ¨é™ã€‚\r\n\r\nååœ¨å¥¹æ­£åæ–¹çš„è°¢æ˜æœï¼Œæ—©å°±æŠŠé‚£æœ¬åšåšçš„å†å²ä¹¦å½“æˆäº†æ‘†è®¾ã€‚ä»–å•æ‰‹æ”¯ç€ä¸‹å·´ï¼Œå¦ä¸€åªæ‰‹é‡Œçš„ç¬”åœ¨æŒ‡å°–çµæ´»åœ°è½¬ç€åœˆï¼Œç›®å…‰å´ä¸€åˆ»ä¹Ÿæ²¡æœ‰ç¦»å¼€è¿‡çœ¼å‰é‚£ä¸ªçº¤ç»†çš„èƒŒå½±ã€‚\r\n\r\nä»–è§‰å¾—è€å¸ˆçš„å£°éŸ³åƒæ˜¯è‹è‡ä¸€æ ·å—¡å—¡ä½œå“ï¼Œè®©äººçƒ¦èºï¼Œä½†çœ‹ç€å¥¹ï¼Œå¿ƒé‡Œé‚£äº›ä¹±ä¸ƒå…«ç³Ÿçš„å¿µå¤´åˆéƒ½å¹³æ¯ä¸‹æ¥ã€‚\r\n\r\nç™¾æ— èŠèµ–ä¹‹ä¸‹ï¼Œä»–èº«ä½“å¾®å¾®å‰å€¾ï¼Œæ‚„æ‚„ä¼¸é•¿äº†èƒ³è†Šï¼Œç”¨é‚£æ”¯é»‘è‰²æ°´ç¬”çš„å°¾ç«¯ï¼Œéš”ç€ä¸€å±‚è–„è–„çš„æ ¡æœå¸ƒæ–™ï¼Œè½»è½»è§¦ç¢°ä¸Šäº†å¥¹çš„åèƒŒã€‚\r\n\r\nä»–çš„åŠ¨ä½œå¾ˆè½»ï¼Œåƒæ˜¯ä¸€ç‰‡ç¾½æ¯›è½ä¸‹ï¼Œå¸¸ä¹åªæ˜¯åœ¨è®°ç¬”è®°æ—¶èº«ä½“å¾®å¾®åŠ¨äº†ä¸€ä¸‹ï¼Œå¹¶æ²¡æœ‰å¯Ÿè§‰ã€‚\r\n\r\nè§å¥¹æ²¡ååº”ï¼Œè°¢æ˜æœçš„èƒ†å­å¤§äº†ä¸€ç‚¹ã€‚ä»–å±ä½å‘¼å¸ï¼Œå˜´è§’å‹¾èµ·ä¸€ä¸ä¸æ˜“å¯Ÿè§‰çš„åç¬‘ï¼Œæ‰‹è…•è½»è½»ç§»åŠ¨ï¼Œç”¨ç¬”å°¾åœ¨å¥¹èƒŒä¸Šï¼Œä¸€ç¬”ä¸€åˆ’ï¼Œæ‚„æ— å£°æ¯åœ°ç”»ç€ä¸€ä¸ªâ€¦â€¦å¿ƒå½¢ã€‚\r\n\r\nä»å·¦è¾¹çš„åœ†å¼§ï¼Œåˆ°å³è¾¹çš„åœ†å¼§ï¼Œæœ€ååœ¨ä¸‹æ–¹æ±‡èšæˆä¸€ä¸ªå°–è§’ã€‚\r\n\r\nä»–ç”»å¾—å¾ˆæ…¢ï¼Œå¾ˆè®¤çœŸï¼Œä»¿ä½›åœ¨è¿›è¡Œä¸€é¡¹ä»€ä¹ˆç¥åœ£çš„ä»ªå¼ã€‚é‚£å†°å‡‰çš„å¡‘æ–™ç¬”ç«¯ï¼Œéš”ç€è¡£æ–™åœ¨å¥¹æ¸©çƒ­çš„çš®è‚¤ä¸Šæ¸¸èµ°ï¼Œå¸¦æ¥ä¸€ç§å¥‡ç‰¹çš„ã€éšç§˜çš„é…¥éº»æ„Ÿã€‚è°¢æ˜æœç”šè‡³èƒ½æƒ³è±¡åˆ°ï¼Œåœ¨å¥¹çœ‹ä¸è§çš„åœ°æ–¹ï¼Œä¸€ä¸ªå±äºä»–çš„å°è®°ï¼Œæ­£æ‚„ç„¶çƒ™ä¸‹ã€‚\r\n\r\nç”»å®Œæœ€åä¸€ç¬”ï¼Œä»–ç«‹åˆ»è‹¥æ— å…¶äº‹åœ°æ”¶å›æ‰‹ï¼Œæ‡’æ´‹æ´‹åœ°é å›æ¤…èƒŒï¼Œé‡æ–°è½¬èµ·äº†ç¬”ï¼Œä»¿ä½›åˆšæ‰çš„ä¸€åˆ‡éƒ½åªæ˜¯ä»–çš„å¹»è§‰ã€‚åªæœ‰ä»–è‡ªå·±çŸ¥é“ï¼Œå¿ƒè·³å¾—æœ‰å¤šå¿«ã€‚\r\n","[å’Œè°¢æ˜æœçš„èŠå¤©]\r\n[å¯¹æ–¹æ¶ˆæ¯|0kdysl.jpeg|helloæ‰“æ¸¸æˆå—| 16:52]\r\n[å¯¹æ–¹æ¶ˆæ¯|0kdysl.jpeg|helloï¼Ÿæˆ‘æ˜¯å›½æœæ‰“é‡| 16:52]\r\n[å¯¹æ–¹æ¶ˆæ¯|0kdysl.jpeg|æ²¡å‘å‡ºå»å—ï¼Ÿæˆ‘è¯´æˆ‘æ˜¯å›½æœ| 16:53]\r\n[å¯¹æ–¹æ¶ˆæ¯|0kdysl.jpeg|å‘µå‘µå…¶å®ä¹Ÿæ²¡æœ‰å¾ˆæƒ³å’Œä½ ç©| 16:54]\r\n[å¯¹æ–¹æ¶ˆæ¯|0kdysl.jpeg|è¿˜æœ‰ä½ çœŸçš„å¾ˆè£…ï¼| 16:55]\r\n[å¯¹æ–¹æ¶ˆæ¯|0kdysl.jpeg|<bqb>ä¸å›æ¶ˆæ¯å°±æ°¸è¿œåˆ«å›äº†:7l6jwo.jpeg</bqb>| 16:56]\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ç°ç™½é…ç”µè„‘æœ€é€‚é…ç‰ˆæœ¬</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Microsoft YaHei', sans-serif;\r\n        }\r\n        .cassette-wrapper {\r\n            position: relative;\r\n            width: 95%;\r\n            max-width: 450px;\r\n            margin: 20px auto;\r\n            box-sizing: border-box;\r\n        }\r\n        .cassette-container {\r\n            background: linear-gradient(to right, #e0e0e0, #cccccc);\r\n            padding: 15px;\r\n            border-radius: 25px;\r\n            box-shadow:\r\n                0 4px 16px rgba(0,0,0,0.15),\r\n                0 0 0 4px #fff,\r\n                0 0 0 8px #a0a0a0;\r\n            box-sizing: border-box;\r\n            padding-top: 70px;\r\n            padding-bottom: 20px;\r\n            position: relative;\r\n        }\r\n        .avatar {\r\n            position: absolute;\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: 50%;\r\n            border: 2px solid #fff;\r\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\r\n            z-index: 1;\r\n            background-color: #f0f0f0;\r\n            object-fit: cover;\r\n            top: 15px;\r\n        }\r\n        .avatar.user {\r\n            right: 45px;\r\n        }\r\n        .avatar.char {\r\n            left: 45px;\r\n        }\r\n        .distance-text {\r\n            position: absolute;\r\n            top: 30px;\r\n            left: 0;\r\n            right: 0;\r\n            text-align: center;\r\n            font-size: 13px;\r\n            color: #555555;\r\n            z-index: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        h1 {\r\n            color: #333333;\r\n            font-size: 18px;\r\n            margin: 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            margin-bottom: 12px;\r\n        }\r\n        .music-info {\r\n            font-size: 14px;\r\n            color: #666666;\r\n            margin: 10px 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        audio {\r\n            width: 100%;\r\n            margin-top: 10px;\r\n            border-radius: 20px;\r\n            box-sizing: border-box;\r\n            height: 45px;\r\n        }\r\n        audio::-webkit-media-controls-panel {\r\n            background: linear-gradient(to right, #bbbbbb, #999999);\r\n        }\r\n        .playing-animation {\r\n            height: 2px;\r\n            background: linear-gradient(90deg,\r\n                #777777 25%, transparent 25%,\r\n                transparent 50%, #777777 50%,\r\n                #777777 75%, transparent 75%,\r\n                transparent 100%);\r\n            background-size: 20px 100%;\r\n            animation: move 1s linear infinite;\r\n            margin: 10px 0;\r\n        }\r\n        @keyframes move {\r\n            from { background-position: 0 0; }\r\n            to { background-position: 20px 0; }\r\n        }\r\n\r\n        .playlist-container {\r\n            margin-top: 20px;\r\n            background-color: #f0f0f0;\r\n            border-radius: 15px;\r\n            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);\r\n        }\r\n        .playlist-title {\r\n            font-size: 15px;\r\n            color: #444;\r\n            padding: 10px;\r\n            margin: 0;\r\n            text-align: center;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            border-bottom: 1px solid #ddd;\r\n            border-radius: 15px 15px 0 0;\r\n        }\r\n        .playlist-title.collapsed + .playlist {\r\n             max-height: 0;\r\n             padding-top: 0;\r\n             padding-bottom: 0;\r\n             overflow: hidden;\r\n             border-top: none;\r\n        }\r\n         .playlist-title.collapsed {\r\n            border-radius: 15px;\r\n            border-bottom: none;\r\n        }\r\n\r\n        .playlist {\r\n            list-style: none;\r\n            padding: 0;\r\n            margin: 0;\r\n            max-height: 180px;\r\n            overflow-y: auto;\r\n            transition: max-height 0.3s ease-out, padding 0.3s ease-out;\r\n            border-top: 1px solid #ddd;\r\n            border-radius: 0 0 15px 15px;\r\n        }\r\n        .playlist li {\r\n            padding: 8px 12px;\r\n            font-size: 13px;\r\n            color: #555;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.2s ease;\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        .song-selector-icon {\r\n            width: 20px;\r\n            height: 20px;\r\n            margin-right: 10px;\r\n            border: 1px solid #aaa;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: contain;\r\n            flex-shrink: 0;\r\n        }\r\n        .song-selector-icon.selected {\r\n            background-image: url('https://files.catbox.moe/8e819d.png');\r\n            border-color: transparent;\r\n        }\r\n        .song-info {\r\n            flex-grow: 1;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .playlist li:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n        .playlist li.active .song-info {\r\n            /* background-color: #cccccc; */ /* å†³å®šé«˜äº®æ–¹å¼ */\r\n            color: #222;\r\n            font-weight: bold;\r\n        }\r\n        .playlist li.active .song-selector-icon {\r\n             /* é€‰ä¸­ä¸”æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²çš„é€‰æ‹©å™¨å›¾æ ‡å¯ä»¥æœ‰ç‰¹æ®Šæ ·å¼ */\r\n        }\r\n\r\n        .playlist-actions {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 10px 0;\r\n            background-color: #f0f0f0;\r\n            border-top: 1px solid #ddd;\r\n        }\r\n        .playlist-actions button {\r\n            background-color: #888888;\r\n            color: white;\r\n            border: none;\r\n            padding: 6px 12px;\r\n            margin: 0 8px;\r\n            border-radius: 10px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: background-color 0.2s ease;\r\n        }\r\n        .playlist-actions button:hover {\r\n            background-color: #666666;\r\n        }\r\n\r\n        .controls {\r\n            text-align: center;\r\n            margin-top: 15px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n        .controls button {\r\n            background-color: #a0a0a0;\r\n            color: white;\r\n            border: none;\r\n            padding: 8px 15px;\r\n            margin: 0 5px;\r\n            border-radius: 15px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: background-color 0.2s ease;\r\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n        }\r\n        .controls button:hover {\r\n            background-color: #888888;\r\n        }\r\n        .controls button:disabled {\r\n            background-color: #d0d0d0;\r\n            cursor: not-allowed;\r\n        }\r\n        .playback-mode-button {\r\n            padding: 6px 10px !important;\r\n            font-size: 12px !important;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"cassette-wrapper\" id=\"apex-music-player\">\r\n        <img class=\"avatar user\" src=\"https://files.catbox.moe/3gok4b.png\" alt=\"User Avatar\">\r\n        <img class=\"avatar char\" src=\"https://files.catbox.moe/q3zzgb.png\" alt=\"Char Avatar\">\r\n\r\n        <div class=\"distance-text\">â€”ç›¸è·0.01kmâ€”</div>\r\n\r\n        <div class=\"cassette-container\">\r\n            <h1 id=\"current-song-title\">ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰</h1>\r\n            <div class=\"music-info\" id=\"current-song-artist\">å¦‚æœä¸€å®šè¦ç—›å‡ºç—•è¿¹æ‰ç®—çˆ±ï¼Œæˆ‘å¸Œæœ›æ˜¯ä½ çš„å»ç—•</div>\r\n            <div class=\"playing-animation\"></div>\r\n            <audio id=\"audio-player\" controls>\r\n                ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚\r\n            </audio>\r\n\r\n            <div class=\"controls\">\r\n                <button id=\"prev-button\">ä¸Šä¸€é¦–</button>\r\n                <button id=\"playback-mode-button\">é¡ºåºæ’­æ”¾</button>\r\n                <button id=\"next-button\">ä¸‹ä¸€é¦–</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"playlist-container\">\r\n            <div class=\"playlist-title\" id=\"playlist-toggle\">æ’­æ”¾åˆ—è¡¨ <span>â–¼</span></div>\r\n            <ul id=\"playlist\" class=\"playlist\">\r\n                <!-- æ­Œæ›²åˆ—è¡¨é¡¹ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->\r\n                <div class=\"playlist-actions\">\r\n                    <button id=\"play-selected-button\">æ’­æ”¾é€‰ä¸­</button>\r\n                    <button id=\"clear-selection-button\">æ¸…ç©ºé€‰æ‹©</button>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            const thisPlayerId = 'apex-music-player';\r\n            const thisPlayerElement = document.getElementById(thisPlayerId);\r\n\r\n            function stopOtherApexPlayers() {\r\n                const allAudioElements = document.querySelectorAll('audio');\r\n                allAudioElements.forEach(audio => {\r\n                    let parentPlayer = audio.closest('.cassette-wrapper');\r\n                    if (parentPlayer && parentPlayer.id !== thisPlayerId && !audio.paused) {\r\n                        audio.pause();\r\n                    }\r\n                });\r\n            }\r\n\r\n            const audioPlayer = document.getElementById('audio-player');\r\n            const playlistElement = document.getElementById('playlist');\r\n            const playSelectedButton = document.getElementById('play-selected-button'); // è·å–æŒ‰é’®\r\n            const clearSelectionButton = document.getElementById('clear-selection-button'); // è·å–æŒ‰é’®\r\n\r\n            const currentSongTitleElement = document.getElementById('current-song-title');\r\n            const currentSongArtistElement = document.getElementById('current-song-artist');\r\n            const prevButton = document.getElementById('prev-button');\r\n            const nextButton = document.getElementById('next-button');\r\n            const playlistToggle = document.getElementById('playlist-toggle');\r\n            const playlistTitleSpan = playlistToggle.querySelector('span');\r\n            const playbackModeButton = document.getElementById('playback-mode-button');\r\n\r\n            const songs = [\r\n                { id: 0, title: \"í”ì ê¸°ê´€ (ç—•è¿¹å™¨å®˜)\", artist: \"ç—•è¿¹å™¨å®˜çš„æ„æ€æ˜¯ï¼Œæˆ‘æ›´çˆ±ä½ \", src: \"https://files.catbox.moe/1ymem4.mp3\" },\r\n                { id: 1, title: \"ë‹¬ê³¼ 6íœìŠ¤ (æœˆäº®ä¸6ä¾¿å£«)\", artist: \"æˆ–è®¸ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œåªè¦ä½ ä¸é€ƒèµ°ï¼Œå‰©ä¸‹çš„éƒ½è®©æˆ‘æ¥\", src: \"https://files.catbox.moe/0fcoxb.mp3\" },\r\n                { id: 2, title: \"ë‚˜ë§Œ ë°”ë¼ë´ (Part 2)\", artist: \"æˆ‘è¯´æˆ‘çš„å¿ƒä¹Ÿå’Œæœ€åˆä¸€æ ·ï¼Œä¸ºä½ è·³åŠ¨ç€t\", src: \"https://files.catbox.moe/kcsomz.mp3\" },\r\n                { id: 3, title: \"å…³é”®è¯\", artist: \"æˆ‘ä¸å¤ªç¡®å®šï¼Œçˆ±æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯åŠ¨è¯æˆ–åè¯\", src: \"https://files.catbox.moe/51902f.mp3\" },\r\n                { id: 4, title: \"é—å¤±çš„å¿ƒè·³\", artist: \"å¿ƒç—›ç€ ä½ çš„çˆ± æ®‹é…·çš„çºªå¿µå“t\", src: \"https://files.catbox.moe/d1ph63.ogg\" },\r\n                { id: 5, title: \"å¤åˆ»å›å¿†\", artist: \"å›å¿†èƒ½å¤åˆ»ï¼Œä½ ä¼šå›åˆ°æˆ‘èº«è¾¹å—\", src: \"https://files.catbox.moe/ozgfpc.mp3\" },\r\n                { id: 6, title: \"äºæ˜¯\", artist: \"è¯´æ¥åˆè¯´å»è¿˜æ˜¯æ”¾ä¸ä¸‹ä½ \", src: \"https://files.catbox.moe/h1vey9.mp3\" },\r\n                { id: 7, title: \"è¯€åˆ«ä¹¦\", artist: \"å¦‚æœæ€»è¦åˆ†å¼€ï¼Œé‚£ç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ\", src: \"https://files.catbox.moe/l9sdul.mp3\" },\r\n                { id: 8, title: \"ä¸€ç¬‘å€¾åŸ\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/wpilgo.mp3\" },\r\n                { id: 9, title: \"çº¯éŸ³ä¹\", artist: \"è®©æˆ‘çœ‹ç©¿ä½ çš„çœ¼ç› è¿˜æœ‰ä½ çš„å¿ƒ\", src: \"https://files.catbox.moe/st5f4k.mp3\" },\r\n                { id: 10, title: \"èŒèŒçš„çº¯éŸ³ä¹\", artist: \"oâŒ„oæ˜¯å¾®ç¬‘ o_oæ˜¯è­¦å‘Š o.oæ˜¯ä½™é¢ oã‰¨oæ˜¯è½»æ¾ç†Š\", src: \"https://files.catbox.moe/4653sq.mp3\" },\r\n                { id: 11, title: \"Una Mattian\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/ckiz5f.mp3\" },\r\n                { id: 12, title: \"gå°è°ƒå·´èµ«å¹³å‡å¾‹å˜å¥æ›²\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/ynbgj9.mp3\" },\r\n                { id: 13, title: \"ä¸‹ä¸€ç§’\", artist: \"è®©æˆ‘ä»¬éƒ½å˜æˆå¹¸ç¦å¤§ç‹Ëµ>ğ–¥¦<Ëµ!!\", src: \"https://files.catbox.moe/k3ssag.mp3\" },\r\n                { id: 14, title: \"è¤ç«è™«çº¯éŸ³ä¹\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/xsg62j.mp3\" },\r\n                { id: 15, title: \"æ— æ„Ÿ\", artist: \"è¯¥è¯´ä»€ä¹ˆå¥½å‘¢ æ˜¯è¯´å¤©æ°” è¿˜æ˜¯å¥½æƒ³ä½ \", src: \"https://files.catbox.moe/891luf.mp3\" },\r\n                { id: 16, title: \"TheÂ truthÂ thatÂ youÂ leave\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/8ctqe9.mp3\" },\r\n                { id: 17, title: \"å†™åœ¨é£ä¸­çš„ä¿¡\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/61savh.mp3\" },\r\n                { id: 18, title: \"æ‚¬æºº\", artist: \"å¹¸ç¦å°±åƒå·§å…‹åŠ›ï¼Œåƒä¸€åŠå‘ç°è‡ªå·±æ˜¯ç‹—\", src: \"https://files.catbox.moe/faea0v.mp3\" },\r\n                { id: 19, title: \"æ—¶é—´ç…®é›¨\", artist: \"äººä¸äººä¹‹é—´çš„ç¼˜åˆ†åœ¨è–„å¦‚è‰ç¿¼çš„åŒæ—¶ï¼Œåˆæ˜¯ä¸€åœºæ— æ³•é¿å…çš„é›¨\", src: \"https://files.catbox.moe/mbljjb.mp3\" },\r\n                { id: 20, title: \"çº¢å°˜å®¢æ ˆ\", artist: \"å¦‚æœäººç”Ÿä¸€å®šè¦æˆå®¶ æˆ‘å¸Œæœ›æ˜¯å·´é»ä¸–å®¶\", src: \"https://files.catbox.moe/7lhtd6.mp3\" },\r\n                { id: 21, title: \"ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰\", artist: \"æˆ‘ä»¬ä¸ä¼šå†ç›¸é‡ï¼Œè¿™å°±æ˜¯åˆ†å¼€çš„æ„ä¹‰\", src: \"https://files.catbox.moe/f7lcuv.mp3\" }\r\n            ];\r\n\r\n            let currentSongIndex = songs.length - 1;\r\n            let currentSelectedPlaylist = [];\r\n            let currentSelectedSongIndex = 0;\r\n            let playbackMode = 'sequence';\r\n            const playbackModeTexts = {\r\n                'sequence': 'é¡ºåºæ’­æ”¾',\r\n                'repeat-one': 'å•æ›²å¾ªç¯',\r\n                'shuffle': 'éšæœºæ’­æ”¾',\r\n                'selected-sequence': 'é€‰å®šæ’­æ”¾'\r\n            };\r\n\r\n            function updatePlaybackModeButton() {\r\n                playbackModeButton.textContent = playbackModeTexts[playbackMode];\r\n            }\r\n\r\n            function handlePlaySelected() {\r\n                if (currentSelectedPlaylist.length > 0) {\r\n                    playbackMode = 'selected-sequence';\r\n                    updatePlaybackModeButton();\r\n                    currentSelectedSongIndex = 0;\r\n                    loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex], true);\r\n                } else {\r\n                    alert(\"è¯·è‡³å°‘é€‰æ‹©ä¸€é¦–æ­Œæ›²ã€‚\");\r\n                }\r\n            }\r\n\r\n            function handleClearSelection() {\r\n                currentSelectedPlaylist = [];\r\n                const selectorIcons = playlistElement.querySelectorAll('.song-selector-icon');\r\n                selectorIcons.forEach(icon => icon.classList.remove('selected'));\r\n                if (playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    updatePlaybackModeButton();\r\n                    loadSong(currentSongIndex, false);\r\n                }\r\n            }\r\n\r\n            // å°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šç§»åˆ°å‡½æ•°å¤–éƒ¨æˆ–ç¡®ä¿åœ¨DOMå°±ç»ªåç»‘å®šä¸€æ¬¡\r\n             if(playSelectedButton) playSelectedButton.addEventListener('click', handlePlaySelected);\r\n             if(clearSelectionButton) clearSelectionButton.addEventListener('click', handleClearSelection);\r\n\r\n\r\n            playbackModeButton.addEventListener('click', () => {\r\n                if (playbackMode === 'sequence') playbackMode = 'repeat-one';\r\n                else if (playbackMode === 'repeat-one') playbackMode = 'shuffle';\r\n                else if (playbackMode === 'shuffle' || playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    if (currentSelectedPlaylist.length > 0) { // ä»é€‰å®šæ’­æ”¾åˆ‡èµ°æ—¶ï¼Œæ¸…ç©ºé€‰æ‹©\r\n                        handleClearSelection(); // ä½¿ç”¨å°è£…çš„å‡½æ•°\r\n                    }\r\n                }\r\n                updatePlaybackModeButton();\r\n                audioPlayer.loop = (playbackMode === 'repeat-one');\r\n                if (playbackMode !== 'selected-sequence') {\r\n                     // ç¡®ä¿åœ¨éé€‰å®šæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼ŒåŠ è½½æ­£ç¡®çš„æ­Œæ›²\r\n                    if (songs.length > 0) loadSong(currentSongIndex, audioPlayer.paused);\r\n                }\r\n            });\r\n\r\n\r\n            function loadSong(songIndex, isAutoPlay = true) {\r\n                if (songIndex < 0 || songIndex >= songs.length) {\r\n                    console.warn(\"loadSong: æ— æ•ˆçš„æ­Œæ›²ç´¢å¼•æˆ–æ’­æ”¾åˆ—è¡¨ä¸ºç©º\", songIndex);\r\n                    return;\r\n                }\r\n                loadSongData(songs[songIndex], isAutoPlay);\r\n                currentSongIndex = songIndex;\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongFromPlaylist(songData, isAutoPlay = true) {\r\n                if (!songData) {\r\n                     console.warn(\"loadSongFromPlaylist: æ— æ•ˆçš„æ­Œæ›²æ•°æ®\");\r\n                    return;\r\n                }\r\n                loadSongData(songData, isAutoPlay);\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongData(song, isAutoPlay = true) {\r\n                if (!song) {\r\n                    console.error(\"loadSongData: æ­Œæ›²æ•°æ®ä¸ºç©º!\");\r\n                    currentSongTitleElement.textContent = \"é”™è¯¯ï¼šæ­Œæ›²æ•°æ®ä¸¢å¤±\";\r\n                    currentSongArtistElement.textContent = \"\";\r\n                    return;\r\n                }\r\n                currentSongTitleElement.textContent = song.title;\r\n                currentSongArtistElement.textContent = song.artist; // åŠ¨æ€æ›´æ–°æ­Œæ›²ä¿¡æ¯\r\n                audioPlayer.innerHTML = '';\r\n                const source = document.createElement('source');\r\n                source.src = song.src;\r\n                source.type = song.src.endsWith('.ogg') ? 'audio/ogg' : 'audio/mpeg';\r\n                audioPlayer.appendChild(source);\r\n                audioPlayer.load();\r\n                if (isAutoPlay) {\r\n                    stopOtherApexPlayers();\r\n                    audioPlayer.play().catch(e => console.error('Autoplay failed:', e, song.title));\r\n                }\r\n                audioPlayer.loop = (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0);\r\n                updateButtonStates();\r\n            }\r\n\r\n            audioPlayer.addEventListener('play', () => {\r\n                if (document.visibilityState === 'visible') stopOtherApexPlayers();\r\n            });\r\n\r\n            function playNextSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let nextIndex;\r\n                    if (songs.length <= 1) nextIndex = 0;\r\n                    else do { nextIndex = Math.floor(Math.random() * songs.length); } while (nextIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = nextIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex + 1) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function playPrevSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let prevIndex;\r\n                    if (songs.length <= 1) prevIndex = 0;\r\n                    else do { prevIndex = Math.floor(Math.random() * songs.length); } while (prevIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = prevIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex - 1 + targetPlaylist.length) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updatePlaylistUI() {\r\n                const actionsDiv = playlistElement.querySelector('.playlist-actions');\r\n                // åœ¨æ¸…ç©ºåˆ—è¡¨å‰ï¼Œå¦‚æœactionsDivå­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶ä»DOMä¸­ç§»é™¤ï¼Œç¨åå†æ·»åŠ å›å»\r\n                // è¿™æ ·å¯ä»¥é¿å…å®ƒè¢«innerHTML=''æ¸…é™¤æ‰ï¼ŒåŒæ—¶ç¡®ä¿å®ƒå§‹ç»ˆåœ¨åˆ—è¡¨é¡¹ä¹‹å\r\n                if (actionsDiv) actionsDiv.remove();\r\n\r\n\r\n                const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µä¼˜åŒ–æ€§èƒ½\r\n\r\n                songs.forEach((song, index) => {\r\n                    const listItem = document.createElement('li');\r\n\r\n                    const selectorIcon = document.createElement('span');\r\n                    selectorIcon.classList.add('song-selector-icon');\r\n                    selectorIcon.dataset.songId = song.id;\r\n                    if (currentSelectedPlaylist.some(s => s.id === song.id)) {\r\n                        selectorIcon.classList.add('selected');\r\n                    }\r\n                    selectorIcon.addEventListener('click', (e) => {\r\n                        e.stopPropagation();\r\n                        const songId = parseInt(selectorIcon.dataset.songId);\r\n                        const targetSong = songs.find(s => s.id === songId);\r\n                        const selectedIndex = currentSelectedPlaylist.findIndex(s => s.id === songId);\r\n\r\n                        if (selectedIndex > -1) {\r\n                            currentSelectedPlaylist.splice(selectedIndex, 1);\r\n                            selectorIcon.classList.remove('selected');\r\n                        } else {\r\n                            currentSelectedPlaylist.push(targetSong);\r\n                            selectorIcon.classList.add('selected');\r\n                        }\r\n                    });\r\n\r\n                    const songInfoDiv = document.createElement('div');\r\n                    songInfoDiv.classList.add('song-info');\r\n                    songInfoDiv.textContent = `${song.title} - ${song.artist}`; // ç¡®ä¿åˆ—è¡¨é¡¹ä¹Ÿæ˜¾ç¤ºartist\r\n                    songInfoDiv.addEventListener('click', () => {\r\n                        currentSongIndex = index;\r\n                        loadSong(currentSongIndex);\r\n                        if (playbackMode === 'selected-sequence') {\r\n                            playbackMode = 'sequence';\r\n                            updatePlaybackModeButton();\r\n                        }\r\n                    });\r\n\r\n                    listItem.appendChild(selectorIcon);\r\n                    listItem.appendChild(songInfoDiv);\r\n\r\n                    let isCurrentlyPlayingThisSong = false;\r\n                    const currentPlayingSong = (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length > 0) ? currentSelectedPlaylist[currentSelectedSongIndex] : songs[currentSongIndex];\r\n\r\n                    if (currentPlayingSong && currentPlayingSong.id === song.id) {\r\n                         isCurrentlyPlayingThisSong = true;\r\n                    }\r\n\r\n                    if (isCurrentlyPlayingThisSong) {\r\n                        listItem.classList.add('active');\r\n                    }\r\n                    fragment.appendChild(listItem);\r\n                });\r\n                playlistElement.innerHTML = ''; // æ¸…ç©ºæ—§çš„åˆ—è¡¨é¡¹\r\n                playlistElement.appendChild(fragment); // æ·»åŠ æ–°çš„åˆ—è¡¨é¡¹\r\n                if (actionsDiv) playlistElement.appendChild(actionsDiv); // å°†æŒ‰é’®åŒºåŸŸé‡æ–°åŠ åˆ°åˆ—è¡¨æœ«å°¾\r\n            }\r\n\r\n\r\n            function updateButtonStates() {\r\n                const targetPlaylist = playbackMode === 'selected-sequence' ? currentSelectedPlaylist : songs;\r\n                prevButton.disabled = targetPlaylist.length <= 1;\r\n                nextButton.disabled = targetPlaylist.length <= 1;\r\n            }\r\n\r\n            playlistToggle.addEventListener('click', () => {\r\n                playlistElement.classList.toggle('collapsed');\r\n                playlistToggle.classList.toggle('collapsed');\r\n                playlistTitleSpan.textContent = playlistElement.classList.contains('collapsed') ? ' â–º' : ' â–¼';\r\n            });\r\n\r\n            audioPlayer.addEventListener('ended', function() {\r\n                if (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0) {\r\n                    // loop\r\n                } else if (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length === 1) {\r\n                     loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex]);\r\n                }\r\n                else {\r\n                    playNextSongLogic();\r\n                }\r\n            });\r\n\r\n            if (songs.length > 0) {\r\n                songs.forEach((song, index) => song.id = index);\r\n                loadSong(currentSongIndex, false);\r\n                updatePlaybackModeButton();\r\n                playlistElement.classList.add('collapsed');\r\n                playlistToggle.classList.add('collapsed');\r\n                playlistTitleSpan.textContent = ' â–º';\r\n            } else {\r\n                currentSongTitleElement.textContent = \"æ’­æ”¾åˆ—è¡¨ä¸ºç©º\";\r\n                currentSongArtistElement.textContent = \"\";\r\n                audioPlayer.style.display = 'none';\r\n                document.querySelector('.playing-animation').style.display = 'none';\r\n                playlistToggle.style.display = 'none';\r\n                playbackModeButton.style.display = 'none';\r\n                if(playSelectedButton) playSelectedButton.style.display = 'none';\r\n                if(clearSelectionButton) clearSelectionButton.style.display = 'none';\r\n            }\r\n\r\n            prevButton.addEventListener('click', playPrevSongLogic);\r\n            nextButton.addEventListener('click', playNextSongLogic);\r\n\r\n            if ('IntersectionObserver' in window && thisPlayerElement) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && audioPlayer.paused && songs.length > 0) { /* Optional */ }\r\n                    });\r\n                });\r\n                observer.observe(thisPlayerElement);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n```\r\n","[å’Œè°¢æ˜æœçš„èŠå¤©]\r\n[å¯¹æ–¹æ¶ˆæ¯|dkkd3g.png|å‡ºå»ç©å—ï¼Ÿ| 16:52]\r\n[å¯¹æ–¹æ¶ˆæ¯|dkkd3g.png|æ”¾å‡äº†ã€‚| 16:52]\r\n[å¯¹æ–¹æ¶ˆæ¯|dkkd3g.png|åˆ«è£…çœ‹ä¸è§| 16:53]\r\n[å¯¹æ–¹æ¶ˆæ¯|dkkd3g.png|å¾ˆé‡è¦çš„ã€‚| 16:54]\r\n[å¯¹æ–¹æ¶ˆæ¯|dkkd3g.png|æœ‰äº‹å’Œä½ è¯´ã€‚| 16:55]\r\n[å¯¹æ–¹æ¶ˆæ¯|dkkd3g.png|<bqb>å¿ƒè™šbxohqt.gif</bqb>| 16:56]\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ç°ç™½é…ç”µè„‘æœ€é€‚é…ç‰ˆæœ¬</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Microsoft YaHei', sans-serif;\r\n        }\r\n        .cassette-wrapper {\r\n            position: relative;\r\n            width: 95%;\r\n            max-width: 450px;\r\n            margin: 20px auto;\r\n            box-sizing: border-box;\r\n        }\r\n        .cassette-container {\r\n            background: linear-gradient(to right, #e0e0e0, #cccccc);\r\n            padding: 15px;\r\n            border-radius: 25px;\r\n            box-shadow:\r\n                0 4px 16px rgba(0,0,0,0.15),\r\n                0 0 0 4px #fff,\r\n                0 0 0 8px #a0a0a0;\r\n            box-sizing: border-box;\r\n            padding-top: 70px;\r\n            padding-bottom: 20px;\r\n            position: relative;\r\n        }\r\n        .avatar {\r\n            position: absolute;\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: 50%;\r\n            border: 2px solid #fff;\r\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\r\n            z-index: 1;\r\n            background-color: #f0f0f0;\r\n            object-fit: cover;\r\n            top: 15px;\r\n        }\r\n        .avatar.user {\r\n            right: 45px;\r\n        }\r\n        .avatar.char {\r\n            left: 45px;\r\n        }\r\n        .distance-text {\r\n            position: absolute;\r\n            top: 30px;\r\n            left: 0;\r\n            right: 0;\r\n            text-align: center;\r\n            font-size: 13px;\r\n            color: #555555;\r\n            z-index: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        h1 {\r\n            color: #333333;\r\n            font-size: 18px;\r\n            margin: 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            margin-bottom: 12px;\r\n        }\r\n        .music-info {\r\n            font-size: 14px;\r\n            color: #666666;\r\n            margin: 10px 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        audio {\r\n            width: 100%;\r\n            margin-top: 10px;\r\n            border-radius: 20px;\r\n            box-sizing: border-box;\r\n            height: 45px;\r\n        }\r\n        audio::-webkit-media-controls-panel {\r\n            background: linear-gradient(to right, #bbbbbb, #999999);\r\n        }\r\n        .playing-animation {\r\n            height: 2px;\r\n            background: linear-gradient(90deg,\r\n                #777777 25%, transparent 25%,\r\n                transparent 50%, #777777 50%,\r\n                #777777 75%, transparent 75%,\r\n                transparent 100%);\r\n            background-size: 20px 100%;\r\n            animation: move 1s linear infinite;\r\n            margin: 10px 0;\r\n        }\r\n        @keyframes move {\r\n            from { background-position: 0 0; }\r\n            to { background-position: 20px 0; }\r\n        }\r\n\r\n        .playlist-container {\r\n            margin-top: 20px;\r\n            background-color: #f0f0f0;\r\n            border-radius: 15px;\r\n            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);\r\n        }\r\n        .playlist-title {\r\n            font-size: 15px;\r\n            color: #444;\r\n            padding: 10px;\r\n            margin: 0;\r\n            text-align: center;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            border-bottom: 1px solid #ddd;\r\n            border-radius: 15px 15px 0 0;\r\n        }\r\n        .playlist-title.collapsed + .playlist {\r\n             max-height: 0;\r\n             padding-top: 0;\r\n             padding-bottom: 0;\r\n             overflow: hidden;\r\n             border-top: none;\r\n        }\r\n         .playlist-title.collapsed {\r\n            border-radius: 15px;\r\n            border-bottom: none;\r\n        }\r\n\r\n        .playlist {\r\n            list-style: none;\r\n            padding: 0;\r\n            margin: 0;\r\n            max-height: 180px;\r\n            overflow-y: auto;\r\n            transition: max-height 0.3s ease-out, padding 0.3s ease-out;\r\n            border-top: 1px solid #ddd;\r\n            border-radius: 0 0 15px 15px;\r\n        }\r\n        .playlist li {\r\n            padding: 8px 12px;\r\n            font-size: 13px;\r\n            color: #555;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.2s ease;\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        .song-selector-icon {\r\n            width: 20px;\r\n            height: 20px;\r\n            margin-right: 10px;\r\n            border: 1px solid #aaa;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: contain;\r\n            flex-shrink: 0;\r\n        }\r\n        .song-selector-icon.selected {\r\n            background-image: url('https://files.catbox.moe/8e819d.png');\r\n            border-color: transparent;\r\n        }\r\n        .song-info {\r\n            flex-grow: 1;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .playlist li:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n        .playlist li.active .song-info {\r\n            /* background-color: #cccccc; */ /* å†³å®šé«˜äº®æ–¹å¼ */\r\n            color: #222;\r\n            font-weight: bold;\r\n        }\r\n        .playlist li.active .song-selector-icon {\r\n             /* é€‰ä¸­ä¸”æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²çš„é€‰æ‹©å™¨å›¾æ ‡å¯ä»¥æœ‰ç‰¹æ®Šæ ·å¼ */\r\n        }\r\n\r\n        .playlist-actions {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 10px 0;\r\n            background-color: #f0f0f0;\r\n            border-top: 1px solid #ddd;\r\n        }\r\n        .playlist-actions button {\r\n            background-color: #888888;\r\n            color: white;\r\n            border: none;\r\n            padding: 6px 12px;\r\n            margin: 0 8px;\r\n            border-radius: 10px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: background-color 0.2s ease;\r\n        }\r\n        .playlist-actions button:hover {\r\n            background-color: #666666;\r\n        }\r\n\r\n        .controls {\r\n            text-align: center;\r\n            margin-top: 15px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n        .controls button {\r\n            background-color: #a0a0a0;\r\n            color: white;\r\n            border: none;\r\n            padding: 8px 15px;\r\n            margin: 0 5px;\r\n            border-radius: 15px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: background-color 0.2s ease;\r\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n        }\r\n        .controls button:hover {\r\n            background-color: #888888;\r\n        }\r\n        .controls button:disabled {\r\n            background-color: #d0d0d0;\r\n            cursor: not-allowed;\r\n        }\r\n        .playback-mode-button {\r\n            padding: 6px 10px !important;\r\n            font-size: 12px !important;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"cassette-wrapper\" id=\"apex-music-player\">\r\n        <img class=\"avatar user\" src=\"https://files.catbox.moe/3gok4b.png\" alt=\"User Avatar\">\r\n        <img class=\"avatar char\" src=\"https://files.catbox.moe/q3zzgb.png\" alt=\"Char Avatar\">\r\n\r\n        <div class=\"distance-text\">â€”ç›¸è·0.01kmâ€”</div>\r\n\r\n        <div class=\"cassette-container\">\r\n            <h1 id=\"current-song-title\">ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰</h1>\r\n            <div class=\"music-info\" id=\"current-song-artist\">å¦‚æœä¸€å®šè¦ç—›å‡ºç—•è¿¹æ‰ç®—çˆ±ï¼Œæˆ‘å¸Œæœ›æ˜¯ä½ çš„å»ç—•</div>\r\n            <div class=\"playing-animation\"></div>\r\n            <audio id=\"audio-player\" controls>\r\n                ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚\r\n            </audio>\r\n\r\n            <div class=\"controls\">\r\n                <button id=\"prev-button\">ä¸Šä¸€é¦–</button>\r\n                <button id=\"playback-mode-button\">é¡ºåºæ’­æ”¾</button>\r\n                <button id=\"next-button\">ä¸‹ä¸€é¦–</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"playlist-container\">\r\n            <div class=\"playlist-title\" id=\"playlist-toggle\">æ’­æ”¾åˆ—è¡¨ <span>â–¼</span></div>\r\n            <ul id=\"playlist\" class=\"playlist\">\r\n                <!-- æ­Œæ›²åˆ—è¡¨é¡¹ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->\r\n                <div class=\"playlist-actions\">\r\n                    <button id=\"play-selected-button\">æ’­æ”¾é€‰ä¸­</button>\r\n                    <button id=\"clear-selection-button\">æ¸…ç©ºé€‰æ‹©</button>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            const thisPlayerId = 'apex-music-player';\r\n            const thisPlayerElement = document.getElementById(thisPlayerId);\r\n\r\n            function stopOtherApexPlayers() {\r\n                const allAudioElements = document.querySelectorAll('audio');\r\n                allAudioElements.forEach(audio => {\r\n                    let parentPlayer = audio.closest('.cassette-wrapper');\r\n                    if (parentPlayer && parentPlayer.id !== thisPlayerId && !audio.paused) {\r\n                        audio.pause();\r\n                    }\r\n                });\r\n            }\r\n\r\n            const audioPlayer = document.getElementById('audio-player');\r\n            const playlistElement = document.getElementById('playlist');\r\n            const playSelectedButton = document.getElementById('play-selected-button'); // è·å–æŒ‰é’®\r\n            const clearSelectionButton = document.getElementById('clear-selection-button'); // è·å–æŒ‰é’®\r\n\r\n            const currentSongTitleElement = document.getElementById('current-song-title');\r\n            const currentSongArtistElement = document.getElementById('current-song-artist');\r\n            const prevButton = document.getElementById('prev-button');\r\n            const nextButton = document.getElementById('next-button');\r\n            const playlistToggle = document.getElementById('playlist-toggle');\r\n            const playlistTitleSpan = playlistToggle.querySelector('span');\r\n            const playbackModeButton = document.getElementById('playback-mode-button');\r\n\r\n            const songs = [\r\n                { id: 0, title: \"í”ì ê¸°ê´€ (ç—•è¿¹å™¨å®˜)\", artist: \"ç—•è¿¹å™¨å®˜çš„æ„æ€æ˜¯ï¼Œæˆ‘æ›´çˆ±ä½ \", src: \"https://files.catbox.moe/1ymem4.mp3\" },\r\n                { id: 1, title: \"ë‹¬ê³¼ 6íœìŠ¤ (æœˆäº®ä¸6ä¾¿å£«)\", artist: \"æˆ–è®¸ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œåªè¦ä½ ä¸é€ƒèµ°ï¼Œå‰©ä¸‹çš„éƒ½è®©æˆ‘æ¥\", src: \"https://files.catbox.moe/0fcoxb.mp3\" },\r\n                { id: 2, title: \"ë‚˜ë§Œ ë°”ë¼ë´ (Part 2)\", artist: \"æˆ‘è¯´æˆ‘çš„å¿ƒä¹Ÿå’Œæœ€åˆä¸€æ ·ï¼Œä¸ºä½ è·³åŠ¨ç€t\", src: \"https://files.catbox.moe/kcsomz.mp3\" },\r\n                { id: 3, title: \"å…³é”®è¯\", artist: \"æˆ‘ä¸å¤ªç¡®å®šï¼Œçˆ±æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯åŠ¨è¯æˆ–åè¯\", src: \"https://files.catbox.moe/51902f.mp3\" },\r\n                { id: 4, title: \"é—å¤±çš„å¿ƒè·³\", artist: \"å¿ƒç—›ç€ ä½ çš„çˆ± æ®‹é…·çš„çºªå¿µå“t\", src: \"https://files.catbox.moe/d1ph63.ogg\" },\r\n                { id: 5, title: \"å¤åˆ»å›å¿†\", artist: \"å›å¿†èƒ½å¤åˆ»ï¼Œä½ ä¼šå›åˆ°æˆ‘èº«è¾¹å—\", src: \"https://files.catbox.moe/ozgfpc.mp3\" },\r\n                { id: 6, title: \"äºæ˜¯\", artist: \"è¯´æ¥åˆè¯´å»è¿˜æ˜¯æ”¾ä¸ä¸‹ä½ \", src: \"https://files.catbox.moe/h1vey9.mp3\" },\r\n                { id: 7, title: \"è¯€åˆ«ä¹¦\", artist: \"å¦‚æœæ€»è¦åˆ†å¼€ï¼Œé‚£ç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ\", src: \"https://files.catbox.moe/l9sdul.mp3\" },\r\n                { id: 8, title: \"ä¸€ç¬‘å€¾åŸ\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/wpilgo.mp3\" },\r\n                { id: 9, title: \"çº¯éŸ³ä¹\", artist: \"è®©æˆ‘çœ‹ç©¿ä½ çš„çœ¼ç› è¿˜æœ‰ä½ çš„å¿ƒ\", src: \"https://files.catbox.moe/st5f4k.mp3\" },\r\n                { id: 10, title: \"èŒèŒçš„çº¯éŸ³ä¹\", artist: \"oâŒ„oæ˜¯å¾®ç¬‘ o_oæ˜¯è­¦å‘Š o.oæ˜¯ä½™é¢ oã‰¨oæ˜¯è½»æ¾ç†Š\", src: \"https://files.catbox.moe/4653sq.mp3\" },\r\n                { id: 11, title: \"Una Mattian\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/ckiz5f.mp3\" },\r\n                { id: 12, title: \"gå°è°ƒå·´èµ«å¹³å‡å¾‹å˜å¥æ›²\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/ynbgj9.mp3\" },\r\n                { id: 13, title: \"ä¸‹ä¸€ç§’\", artist: \"è®©æˆ‘ä»¬éƒ½å˜æˆå¹¸ç¦å¤§ç‹Ëµ>ğ–¥¦<Ëµ!!\", src: \"https://files.catbox.moe/k3ssag.mp3\" },\r\n                { id: 14, title: \"è¤ç«è™«çº¯éŸ³ä¹\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/xsg62j.mp3\" },\r\n                { id: 15, title: \"æ— æ„Ÿ\", artist: \"è¯¥è¯´ä»€ä¹ˆå¥½å‘¢ æ˜¯è¯´å¤©æ°” è¿˜æ˜¯å¥½æƒ³ä½ \", src: \"https://files.catbox.moe/891luf.mp3\" },\r\n                { id: 16, title: \"TheÂ truthÂ thatÂ youÂ leave\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/8ctqe9.mp3\" },\r\n                { id: 17, title: \"å†™åœ¨é£ä¸­çš„ä¿¡\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/61savh.mp3\" },\r\n                { id: 18, title: \"æ‚¬æºº\", artist: \"å¹¸ç¦å°±åƒå·§å…‹åŠ›ï¼Œåƒä¸€åŠå‘ç°è‡ªå·±æ˜¯ç‹—\", src: \"https://files.catbox.moe/faea0v.mp3\" },\r\n                { id: 19, title: \"æ—¶é—´ç…®é›¨\", artist: \"äººä¸äººä¹‹é—´çš„ç¼˜åˆ†åœ¨è–„å¦‚è‰ç¿¼çš„åŒæ—¶ï¼Œåˆæ˜¯ä¸€åœºæ— æ³•é¿å…çš„é›¨\", src: \"https://files.catbox.moe/mbljjb.mp3\" },\r\n                { id: 20, title: \"çº¢å°˜å®¢æ ˆ\", artist: \"å¦‚æœäººç”Ÿä¸€å®šè¦æˆå®¶ æˆ‘å¸Œæœ›æ˜¯å·´é»ä¸–å®¶\", src: \"https://files.catbox.moe/7lhtd6.mp3\" },\r\n                { id: 21, title: \"ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰\", artist: \"æˆ‘ä»¬ä¸ä¼šå†ç›¸é‡ï¼Œè¿™å°±æ˜¯åˆ†å¼€çš„æ„ä¹‰\", src: \"https://files.catbox.moe/f7lcuv.mp3\" }\r\n            ];\r\n\r\n            let currentSongIndex = songs.length - 1;\r\n            let currentSelectedPlaylist = [];\r\n            let currentSelectedSongIndex = 0;\r\n            let playbackMode = 'sequence';\r\n            const playbackModeTexts = {\r\n                'sequence': 'é¡ºåºæ’­æ”¾',\r\n                'repeat-one': 'å•æ›²å¾ªç¯',\r\n                'shuffle': 'éšæœºæ’­æ”¾',\r\n                'selected-sequence': 'é€‰å®šæ’­æ”¾'\r\n            };\r\n\r\n            function updatePlaybackModeButton() {\r\n                playbackModeButton.textContent = playbackModeTexts[playbackMode];\r\n            }\r\n\r\n            function handlePlaySelected() {\r\n                if (currentSelectedPlaylist.length > 0) {\r\n                    playbackMode = 'selected-sequence';\r\n                    updatePlaybackModeButton();\r\n                    currentSelectedSongIndex = 0;\r\n                    loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex], true);\r\n                } else {\r\n                    alert(\"è¯·è‡³å°‘é€‰æ‹©ä¸€é¦–æ­Œæ›²ã€‚\");\r\n                }\r\n            }\r\n\r\n            function handleClearSelection() {\r\n                currentSelectedPlaylist = [];\r\n                const selectorIcons = playlistElement.querySelectorAll('.song-selector-icon');\r\n                selectorIcons.forEach(icon => icon.classList.remove('selected'));\r\n                if (playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    updatePlaybackModeButton();\r\n                    loadSong(currentSongIndex, false);\r\n                }\r\n            }\r\n\r\n            // å°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šç§»åˆ°å‡½æ•°å¤–éƒ¨æˆ–ç¡®ä¿åœ¨DOMå°±ç»ªåç»‘å®šä¸€æ¬¡\r\n             if(playSelectedButton) playSelectedButton.addEventListener('click', handlePlaySelected);\r\n             if(clearSelectionButton) clearSelectionButton.addEventListener('click', handleClearSelection);\r\n\r\n\r\n            playbackModeButton.addEventListener('click', () => {\r\n                if (playbackMode === 'sequence') playbackMode = 'repeat-one';\r\n                else if (playbackMode === 'repeat-one') playbackMode = 'shuffle';\r\n                else if (playbackMode === 'shuffle' || playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    if (currentSelectedPlaylist.length > 0) { // ä»é€‰å®šæ’­æ”¾åˆ‡èµ°æ—¶ï¼Œæ¸…ç©ºé€‰æ‹©\r\n                        handleClearSelection(); // ä½¿ç”¨å°è£…çš„å‡½æ•°\r\n                    }\r\n                }\r\n                updatePlaybackModeButton();\r\n                audioPlayer.loop = (playbackMode === 'repeat-one');\r\n                if (playbackMode !== 'selected-sequence') {\r\n                     // ç¡®ä¿åœ¨éé€‰å®šæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼ŒåŠ è½½æ­£ç¡®çš„æ­Œæ›²\r\n                    if (songs.length > 0) loadSong(currentSongIndex, audioPlayer.paused);\r\n                }\r\n            });\r\n\r\n\r\n            function loadSong(songIndex, isAutoPlay = true) {\r\n                if (songIndex < 0 || songIndex >= songs.length) {\r\n                    console.warn(\"loadSong: æ— æ•ˆçš„æ­Œæ›²ç´¢å¼•æˆ–æ’­æ”¾åˆ—è¡¨ä¸ºç©º\", songIndex);\r\n                    return;\r\n                }\r\n                loadSongData(songs[songIndex], isAutoPlay);\r\n                currentSongIndex = songIndex;\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongFromPlaylist(songData, isAutoPlay = true) {\r\n                if (!songData) {\r\n                     console.warn(\"loadSongFromPlaylist: æ— æ•ˆçš„æ­Œæ›²æ•°æ®\");\r\n                    return;\r\n                }\r\n                loadSongData(songData, isAutoPlay);\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongData(song, isAutoPlay = true) {\r\n                if (!song) {\r\n                    console.error(\"loadSongData: æ­Œæ›²æ•°æ®ä¸ºç©º!\");\r\n                    currentSongTitleElement.textContent = \"é”™è¯¯ï¼šæ­Œæ›²æ•°æ®ä¸¢å¤±\";\r\n                    currentSongArtistElement.textContent = \"\";\r\n                    return;\r\n                }\r\n                currentSongTitleElement.textContent = song.title;\r\n                currentSongArtistElement.textContent = song.artist; // åŠ¨æ€æ›´æ–°æ­Œæ›²ä¿¡æ¯\r\n                audioPlayer.innerHTML = '';\r\n                const source = document.createElement('source');\r\n                source.src = song.src;\r\n                source.type = song.src.endsWith('.ogg') ? 'audio/ogg' : 'audio/mpeg';\r\n                audioPlayer.appendChild(source);\r\n                audioPlayer.load();\r\n                if (isAutoPlay) {\r\n                    stopOtherApexPlayers();\r\n                    audioPlayer.play().catch(e => console.error('Autoplay failed:', e, song.title));\r\n                }\r\n                audioPlayer.loop = (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0);\r\n                updateButtonStates();\r\n            }\r\n\r\n            audioPlayer.addEventListener('play', () => {\r\n                if (document.visibilityState === 'visible') stopOtherApexPlayers();\r\n            });\r\n\r\n            function playNextSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let nextIndex;\r\n                    if (songs.length <= 1) nextIndex = 0;\r\n                    else do { nextIndex = Math.floor(Math.random() * songs.length); } while (nextIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = nextIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex + 1) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function playPrevSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let prevIndex;\r\n                    if (songs.length <= 1) prevIndex = 0;\r\n                    else do { prevIndex = Math.floor(Math.random() * songs.length); } while (prevIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = prevIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex - 1 + targetPlaylist.length) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updatePlaylistUI() {\r\n                const actionsDiv = playlistElement.querySelector('.playlist-actions');\r\n                // åœ¨æ¸…ç©ºåˆ—è¡¨å‰ï¼Œå¦‚æœactionsDivå­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶ä»DOMä¸­ç§»é™¤ï¼Œç¨åå†æ·»åŠ å›å»\r\n                // è¿™æ ·å¯ä»¥é¿å…å®ƒè¢«innerHTML=''æ¸…é™¤æ‰ï¼ŒåŒæ—¶ç¡®ä¿å®ƒå§‹ç»ˆåœ¨åˆ—è¡¨é¡¹ä¹‹å\r\n                if (actionsDiv) actionsDiv.remove();\r\n\r\n\r\n                const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µä¼˜åŒ–æ€§èƒ½\r\n\r\n                songs.forEach((song, index) => {\r\n                    const listItem = document.createElement('li');\r\n\r\n                    const selectorIcon = document.createElement('span');\r\n                    selectorIcon.classList.add('song-selector-icon');\r\n                    selectorIcon.dataset.songId = song.id;\r\n                    if (currentSelectedPlaylist.some(s => s.id === song.id)) {\r\n                        selectorIcon.classList.add('selected');\r\n                    }\r\n                    selectorIcon.addEventListener('click', (e) => {\r\n                        e.stopPropagation();\r\n                        const songId = parseInt(selectorIcon.dataset.songId);\r\n                        const targetSong = songs.find(s => s.id === songId);\r\n                        const selectedIndex = currentSelectedPlaylist.findIndex(s => s.id === songId);\r\n\r\n                        if (selectedIndex > -1) {\r\n                            currentSelectedPlaylist.splice(selectedIndex, 1);\r\n                            selectorIcon.classList.remove('selected');\r\n                        } else {\r\n                            currentSelectedPlaylist.push(targetSong);\r\n                            selectorIcon.classList.add('selected');\r\n                        }\r\n                    });\r\n\r\n                    const songInfoDiv = document.createElement('div');\r\n                    songInfoDiv.classList.add('song-info');\r\n                    songInfoDiv.textContent = `${song.title} - ${song.artist}`; // ç¡®ä¿åˆ—è¡¨é¡¹ä¹Ÿæ˜¾ç¤ºartist\r\n                    songInfoDiv.addEventListener('click', () => {\r\n                        currentSongIndex = index;\r\n                        loadSong(currentSongIndex);\r\n                        if (playbackMode === 'selected-sequence') {\r\n                            playbackMode = 'sequence';\r\n                            updatePlaybackModeButton();\r\n                        }\r\n                    });\r\n\r\n                    listItem.appendChild(selectorIcon);\r\n                    listItem.appendChild(songInfoDiv);\r\n\r\n                    let isCurrentlyPlayingThisSong = false;\r\n                    const currentPlayingSong = (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length > 0) ? currentSelectedPlaylist[currentSelectedSongIndex] : songs[currentSongIndex];\r\n\r\n                    if (currentPlayingSong && currentPlayingSong.id === song.id) {\r\n                         isCurrentlyPlayingThisSong = true;\r\n                    }\r\n\r\n                    if (isCurrentlyPlayingThisSong) {\r\n                        listItem.classList.add('active');\r\n                    }\r\n                    fragment.appendChild(listItem);\r\n                });\r\n                playlistElement.innerHTML = ''; // æ¸…ç©ºæ—§çš„åˆ—è¡¨é¡¹\r\n                playlistElement.appendChild(fragment); // æ·»åŠ æ–°çš„åˆ—è¡¨é¡¹\r\n                if (actionsDiv) playlistElement.appendChild(actionsDiv); // å°†æŒ‰é’®åŒºåŸŸé‡æ–°åŠ åˆ°åˆ—è¡¨æœ«å°¾\r\n            }\r\n\r\n\r\n            function updateButtonStates() {\r\n                const targetPlaylist = playbackMode === 'selected-sequence' ? currentSelectedPlaylist : songs;\r\n                prevButton.disabled = targetPlaylist.length <= 1;\r\n                nextButton.disabled = targetPlaylist.length <= 1;\r\n            }\r\n\r\n            playlistToggle.addEventListener('click', () => {\r\n                playlistElement.classList.toggle('collapsed');\r\n                playlistToggle.classList.toggle('collapsed');\r\n                playlistTitleSpan.textContent = playlistElement.classList.contains('collapsed') ? ' â–º' : ' â–¼';\r\n            });\r\n\r\n            audioPlayer.addEventListener('ended', function() {\r\n                if (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0) {\r\n                    // loop\r\n                } else if (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length === 1) {\r\n                     loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex]);\r\n                }\r\n                else {\r\n                    playNextSongLogic();\r\n                }\r\n            });\r\n\r\n            if (songs.length > 0) {\r\n                songs.forEach((song, index) => song.id = index);\r\n                loadSong(currentSongIndex, false);\r\n                updatePlaybackModeButton();\r\n                playlistElement.classList.add('collapsed');\r\n                playlistToggle.classList.add('collapsed');\r\n                playlistTitleSpan.textContent = ' â–º';\r\n            } else {\r\n                currentSongTitleElement.textContent = \"æ’­æ”¾åˆ—è¡¨ä¸ºç©º\";\r\n                currentSongArtistElement.textContent = \"\";\r\n                audioPlayer.style.display = 'none';\r\n                document.querySelector('.playing-animation').style.display = 'none';\r\n                playlistToggle.style.display = 'none';\r\n                playbackModeButton.style.display = 'none';\r\n                if(playSelectedButton) playSelectedButton.style.display = 'none';\r\n                if(clearSelectionButton) clearSelectionButton.style.display = 'none';\r\n            }\r\n\r\n            prevButton.addEventListener('click', playPrevSongLogic);\r\n            nextButton.addEventListener('click', playNextSongLogic);\r\n\r\n            if ('IntersectionObserver' in window && thisPlayerElement) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && audioPlayer.paused && songs.length > 0) { /* Optional */ }\r\n                    });\r\n                });\r\n                observer.observe(thisPlayerElement);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n```","[å’Œè°¢æ˜æœçš„èŠå¤©]\r\n[å¯¹æ–¹æ¶ˆæ¯|y1e646.jpeg|ä»Šå¤©æ˜¯æˆ‘ä»¬æ‹çˆ±çš„ç¬¬52å¤©ã€‚| 16:52]\r\n[å¯¹æ–¹æ¶ˆæ¯|y1e646.jpeg|æœ‰æ—¶å€™æ„Ÿè§‰ä½ å¥½å¹¸ç¦ã€‚| 16:52]\r\n[å¯¹æ–¹æ¶ˆæ¯|y1e646.jpeg|æˆ‘é•¿è¿™ä¹ˆå¸…| 16:53]\r\n[å¯¹æ–¹æ¶ˆæ¯|y1e646.jpeg|çœŸæ˜¯ä¾¿å®œä½ äº†ã€‚| 16:54]\r\n[å¯¹æ–¹æ¶ˆæ¯|y1e646.jpeg|å®å®ä½ åœ¨å¹²å˜›| 16:55]\r\n[å¯¹æ–¹æ¶ˆæ¯|y1e646.jpeg|æƒ³ä½ äº†ã€‚| 16:56]\r\n[å¯¹æ–¹æ¶ˆæ¯|y1e646.jpeg|<bqb>æ’’å¨‡pm2hnq.jpeg</bqb>| 16:57]\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ç°ç™½é…ç”µè„‘æœ€é€‚é…ç‰ˆæœ¬</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Microsoft YaHei', sans-serif;\r\n        }\r\n        .cassette-wrapper {\r\n            position: relative;\r\n            width: 95%;\r\n            max-width: 450px;\r\n            margin: 20px auto;\r\n            box-sizing: border-box;\r\n        }\r\n        .cassette-container {\r\n            background: linear-gradient(to right, #e0e0e0, #cccccc);\r\n            padding: 15px;\r\n            border-radius: 25px;\r\n            box-shadow:\r\n                0 4px 16px rgba(0,0,0,0.15),\r\n                0 0 0 4px #fff,\r\n                0 0 0 8px #a0a0a0;\r\n            box-sizing: border-box;\r\n            padding-top: 70px;\r\n            padding-bottom: 20px;\r\n            position: relative;\r\n        }\r\n        .avatar {\r\n            position: absolute;\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: 50%;\r\n            border: 2px solid #fff;\r\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\r\n            z-index: 1;\r\n            background-color: #f0f0f0;\r\n            object-fit: cover;\r\n            top: 15px;\r\n        }\r\n        .avatar.user {\r\n            right: 45px;\r\n        }\r\n        .avatar.char {\r\n            left: 45px;\r\n        }\r\n        .distance-text {\r\n            position: absolute;\r\n            top: 30px;\r\n            left: 0;\r\n            right: 0;\r\n            text-align: center;\r\n            font-size: 13px;\r\n            color: #555555;\r\n            z-index: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        h1 {\r\n            color: #333333;\r\n            font-size: 18px;\r\n            margin: 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            margin-bottom: 12px;\r\n        }\r\n        .music-info {\r\n            font-size: 14px;\r\n            color: #666666;\r\n            margin: 10px 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        audio {\r\n            width: 100%;\r\n            margin-top: 10px;\r\n            border-radius: 20px;\r\n            box-sizing: border-box;\r\n            height: 45px;\r\n        }\r\n        audio::-webkit-media-controls-panel {\r\n            background: linear-gradient(to right, #bbbbbb, #999999);\r\n        }\r\n        .playing-animation {\r\n            height: 2px;\r\n            background: linear-gradient(90deg,\r\n                #777777 25%, transparent 25%,\r\n                transparent 50%, #777777 50%,\r\n                #777777 75%, transparent 75%,\r\n                transparent 100%);\r\n            background-size: 20px 100%;\r\n            animation: move 1s linear infinite;\r\n            margin: 10px 0;\r\n        }\r\n        @keyframes move {\r\n            from { background-position: 0 0; }\r\n            to { background-position: 20px 0; }\r\n        }\r\n\r\n        .playlist-container {\r\n            margin-top: 20px;\r\n            background-color: #f0f0f0;\r\n            border-radius: 15px;\r\n            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);\r\n        }\r\n        .playlist-title {\r\n            font-size: 15px;\r\n            color: #444;\r\n            padding: 10px;\r\n            margin: 0;\r\n            text-align: center;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            border-bottom: 1px solid #ddd;\r\n            border-radius: 15px 15px 0 0;\r\n        }\r\n        .playlist-title.collapsed + .playlist {\r\n             max-height: 0;\r\n             padding-top: 0;\r\n             padding-bottom: 0;\r\n             overflow: hidden;\r\n             border-top: none;\r\n        }\r\n         .playlist-title.collapsed {\r\n            border-radius: 15px;\r\n            border-bottom: none;\r\n        }\r\n\r\n        .playlist {\r\n            list-style: none;\r\n            padding: 0;\r\n            margin: 0;\r\n            max-height: 180px;\r\n            overflow-y: auto;\r\n            transition: max-height 0.3s ease-out, padding 0.3s ease-out;\r\n            border-top: 1px solid #ddd;\r\n            border-radius: 0 0 15px 15px;\r\n        }\r\n        .playlist li {\r\n            padding: 8px 12px;\r\n            font-size: 13px;\r\n            color: #555;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.2s ease;\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        .song-selector-icon {\r\n            width: 20px;\r\n            height: 20px;\r\n            margin-right: 10px;\r\n            border: 1px solid #aaa;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: contain;\r\n            flex-shrink: 0;\r\n        }\r\n        .song-selector-icon.selected {\r\n            background-image: url('https://files.catbox.moe/8e819d.png');\r\n            border-color: transparent;\r\n        }\r\n        .song-info {\r\n            flex-grow: 1;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .playlist li:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n        .playlist li.active .song-info {\r\n            /* background-color: #cccccc; */ /* å†³å®šé«˜äº®æ–¹å¼ */\r\n            color: #222;\r\n            font-weight: bold;\r\n        }\r\n        .playlist li.active .song-selector-icon {\r\n             /* é€‰ä¸­ä¸”æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²çš„é€‰æ‹©å™¨å›¾æ ‡å¯ä»¥æœ‰ç‰¹æ®Šæ ·å¼ */\r\n        }\r\n\r\n        .playlist-actions {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 10px 0;\r\n            background-color: #f0f0f0;\r\n            border-top: 1px solid #ddd;\r\n        }\r\n        .playlist-actions button {\r\n            background-color: #888888;\r\n            color: white;\r\n            border: none;\r\n            padding: 6px 12px;\r\n            margin: 0 8px;\r\n            border-radius: 10px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: background-color 0.2s ease;\r\n        }\r\n        .playlist-actions button:hover {\r\n            background-color: #666666;\r\n        }\r\n\r\n        .controls {\r\n            text-align: center;\r\n            margin-top: 15px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n        .controls button {\r\n            background-color: #a0a0a0;\r\n            color: white;\r\n            border: none;\r\n            padding: 8px 15px;\r\n            margin: 0 5px;\r\n            border-radius: 15px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: background-color 0.2s ease;\r\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n        }\r\n        .controls button:hover {\r\n            background-color: #888888;\r\n        }\r\n        .controls button:disabled {\r\n            background-color: #d0d0d0;\r\n            cursor: not-allowed;\r\n        }\r\n        .playback-mode-button {\r\n            padding: 6px 10px !important;\r\n            font-size: 12px !important;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"cassette-wrapper\" id=\"apex-music-player\">\r\n        <img class=\"avatar user\" src=\"https://files.catbox.moe/3gok4b.png\" alt=\"User Avatar\">\r\n        <img class=\"avatar char\" src=\"https://files.catbox.moe/q3zzgb.png\" alt=\"Char Avatar\">\r\n\r\n        <div class=\"distance-text\">â€”ç›¸è·0.01kmâ€”</div>\r\n\r\n        <div class=\"cassette-container\">\r\n            <h1 id=\"current-song-title\">ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰</h1>\r\n            <div class=\"music-info\" id=\"current-song-artist\">å¦‚æœä¸€å®šè¦ç—›å‡ºç—•è¿¹æ‰ç®—çˆ±ï¼Œæˆ‘å¸Œæœ›æ˜¯ä½ çš„å»ç—•</div>\r\n            <div class=\"playing-animation\"></div>\r\n            <audio id=\"audio-player\" controls>\r\n                ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚\r\n            </audio>\r\n\r\n            <div class=\"controls\">\r\n                <button id=\"prev-button\">ä¸Šä¸€é¦–</button>\r\n                <button id=\"playback-mode-button\">é¡ºåºæ’­æ”¾</button>\r\n                <button id=\"next-button\">ä¸‹ä¸€é¦–</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"playlist-container\">\r\n            <div class=\"playlist-title\" id=\"playlist-toggle\">æ’­æ”¾åˆ—è¡¨ <span>â–¼</span></div>\r\n            <ul id=\"playlist\" class=\"playlist\">\r\n                <!-- æ­Œæ›²åˆ—è¡¨é¡¹ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->\r\n                <div class=\"playlist-actions\">\r\n                    <button id=\"play-selected-button\">æ’­æ”¾é€‰ä¸­</button>\r\n                    <button id=\"clear-selection-button\">æ¸…ç©ºé€‰æ‹©</button>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            const thisPlayerId = 'apex-music-player';\r\n            const thisPlayerElement = document.getElementById(thisPlayerId);\r\n\r\n            function stopOtherApexPlayers() {\r\n                const allAudioElements = document.querySelectorAll('audio');\r\n                allAudioElements.forEach(audio => {\r\n                    let parentPlayer = audio.closest('.cassette-wrapper');\r\n                    if (parentPlayer && parentPlayer.id !== thisPlayerId && !audio.paused) {\r\n                        audio.pause();\r\n                    }\r\n                });\r\n            }\r\n\r\n            const audioPlayer = document.getElementById('audio-player');\r\n            const playlistElement = document.getElementById('playlist');\r\n            const playSelectedButton = document.getElementById('play-selected-button'); // è·å–æŒ‰é’®\r\n            const clearSelectionButton = document.getElementById('clear-selection-button'); // è·å–æŒ‰é’®\r\n\r\n            const currentSongTitleElement = document.getElementById('current-song-title');\r\n            const currentSongArtistElement = document.getElementById('current-song-artist');\r\n            const prevButton = document.getElementById('prev-button');\r\n            const nextButton = document.getElementById('next-button');\r\n            const playlistToggle = document.getElementById('playlist-toggle');\r\n            const playlistTitleSpan = playlistToggle.querySelector('span');\r\n            const playbackModeButton = document.getElementById('playback-mode-button');\r\n\r\n            const songs = [\r\n                { id: 0, title: \"í”ì ê¸°ê´€ (ç—•è¿¹å™¨å®˜)\", artist: \"ç—•è¿¹å™¨å®˜çš„æ„æ€æ˜¯ï¼Œæˆ‘æ›´çˆ±ä½ \", src: \"https://files.catbox.moe/1ymem4.mp3\" },\r\n                { id: 1, title: \"ë‹¬ê³¼ 6íœìŠ¤ (æœˆäº®ä¸6ä¾¿å£«)\", artist: \"æˆ–è®¸ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œåªè¦ä½ ä¸é€ƒèµ°ï¼Œå‰©ä¸‹çš„éƒ½è®©æˆ‘æ¥\", src: \"https://files.catbox.moe/0fcoxb.mp3\" },\r\n                { id: 2, title: \"ë‚˜ë§Œ ë°”ë¼ë´ (Part 2)\", artist: \"æˆ‘è¯´æˆ‘çš„å¿ƒä¹Ÿå’Œæœ€åˆä¸€æ ·ï¼Œä¸ºä½ è·³åŠ¨ç€t\", src: \"https://files.catbox.moe/kcsomz.mp3\" },\r\n                { id: 3, title: \"å…³é”®è¯\", artist: \"æˆ‘ä¸å¤ªç¡®å®šï¼Œçˆ±æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯åŠ¨è¯æˆ–åè¯\", src: \"https://files.catbox.moe/51902f.mp3\" },\r\n                { id: 4, title: \"é—å¤±çš„å¿ƒè·³\", artist: \"å¿ƒç—›ç€ ä½ çš„çˆ± æ®‹é…·çš„çºªå¿µå“t\", src: \"https://files.catbox.moe/d1ph63.ogg\" },\r\n                { id: 5, title: \"å¤åˆ»å›å¿†\", artist: \"å›å¿†èƒ½å¤åˆ»ï¼Œä½ ä¼šå›åˆ°æˆ‘èº«è¾¹å—\", src: \"https://files.catbox.moe/ozgfpc.mp3\" },\r\n                { id: 6, title: \"äºæ˜¯\", artist: \"è¯´æ¥åˆè¯´å»è¿˜æ˜¯æ”¾ä¸ä¸‹ä½ \", src: \"https://files.catbox.moe/h1vey9.mp3\" },\r\n                { id: 7, title: \"è¯€åˆ«ä¹¦\", artist: \"å¦‚æœæ€»è¦åˆ†å¼€ï¼Œé‚£ç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ\", src: \"https://files.catbox.moe/l9sdul.mp3\" },\r\n                { id: 8, title: \"ä¸€ç¬‘å€¾åŸ\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/wpilgo.mp3\" },\r\n                { id: 9, title: \"çº¯éŸ³ä¹\", artist: \"è®©æˆ‘çœ‹ç©¿ä½ çš„çœ¼ç› è¿˜æœ‰ä½ çš„å¿ƒ\", src: \"https://files.catbox.moe/st5f4k.mp3\" },\r\n                { id: 10, title: \"èŒèŒçš„çº¯éŸ³ä¹\", artist: \"oâŒ„oæ˜¯å¾®ç¬‘ o_oæ˜¯è­¦å‘Š o.oæ˜¯ä½™é¢ oã‰¨oæ˜¯è½»æ¾ç†Š\", src: \"https://files.catbox.moe/4653sq.mp3\" },\r\n                { id: 11, title: \"Una Mattian\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/ckiz5f.mp3\" },\r\n                { id: 12, title: \"gå°è°ƒå·´èµ«å¹³å‡å¾‹å˜å¥æ›²\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/ynbgj9.mp3\" },\r\n                { id: 13, title: \"ä¸‹ä¸€ç§’\", artist: \"è®©æˆ‘ä»¬éƒ½å˜æˆå¹¸ç¦å¤§ç‹Ëµ>ğ–¥¦<Ëµ!!\", src: \"https://files.catbox.moe/k3ssag.mp3\" },\r\n                { id: 14, title: \"è¤ç«è™«çº¯éŸ³ä¹\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/xsg62j.mp3\" },\r\n                { id: 15, title: \"æ— æ„Ÿ\", artist: \"è¯¥è¯´ä»€ä¹ˆå¥½å‘¢ æ˜¯è¯´å¤©æ°” è¿˜æ˜¯å¥½æƒ³ä½ \", src: \"https://files.catbox.moe/891luf.mp3\" },\r\n                { id: 16, title: \"TheÂ truthÂ thatÂ youÂ leave\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/8ctqe9.mp3\" },\r\n                { id: 17, title: \"å†™åœ¨é£ä¸­çš„ä¿¡\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/61savh.mp3\" },\r\n                { id: 18, title: \"æ‚¬æºº\", artist: \"å¹¸ç¦å°±åƒå·§å…‹åŠ›ï¼Œåƒä¸€åŠå‘ç°è‡ªå·±æ˜¯ç‹—\", src: \"https://files.catbox.moe/faea0v.mp3\" },\r\n                { id: 19, title: \"æ—¶é—´ç…®é›¨\", artist: \"äººä¸äººä¹‹é—´çš„ç¼˜åˆ†åœ¨è–„å¦‚è‰ç¿¼çš„åŒæ—¶ï¼Œåˆæ˜¯ä¸€åœºæ— æ³•é¿å…çš„é›¨\", src: \"https://files.catbox.moe/mbljjb.mp3\" },\r\n                { id: 20, title: \"çº¢å°˜å®¢æ ˆ\", artist: \"å¦‚æœäººç”Ÿä¸€å®šè¦æˆå®¶ æˆ‘å¸Œæœ›æ˜¯å·´é»ä¸–å®¶\", src: \"https://files.catbox.moe/7lhtd6.mp3\" },\r\n                { id: 21, title: \"ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰\", artist: \"æˆ‘ä»¬ä¸ä¼šå†ç›¸é‡ï¼Œè¿™å°±æ˜¯åˆ†å¼€çš„æ„ä¹‰\", src: \"https://files.catbox.moe/f7lcuv.mp3\" }\r\n            ];\r\n\r\n            let currentSongIndex = songs.length - 1;\r\n            let currentSelectedPlaylist = [];\r\n            let currentSelectedSongIndex = 0;\r\n            let playbackMode = 'sequence';\r\n            const playbackModeTexts = {\r\n                'sequence': 'é¡ºåºæ’­æ”¾',\r\n                'repeat-one': 'å•æ›²å¾ªç¯',\r\n                'shuffle': 'éšæœºæ’­æ”¾',\r\n                'selected-sequence': 'é€‰å®šæ’­æ”¾'\r\n            };\r\n\r\n            function updatePlaybackModeButton() {\r\n                playbackModeButton.textContent = playbackModeTexts[playbackMode];\r\n            }\r\n\r\n            function handlePlaySelected() {\r\n                if (currentSelectedPlaylist.length > 0) {\r\n                    playbackMode = 'selected-sequence';\r\n                    updatePlaybackModeButton();\r\n                    currentSelectedSongIndex = 0;\r\n                    loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex], true);\r\n                } else {\r\n                    alert(\"è¯·è‡³å°‘é€‰æ‹©ä¸€é¦–æ­Œæ›²ã€‚\");\r\n                }\r\n            }\r\n\r\n            function handleClearSelection() {\r\n                currentSelectedPlaylist = [];\r\n                const selectorIcons = playlistElement.querySelectorAll('.song-selector-icon');\r\n                selectorIcons.forEach(icon => icon.classList.remove('selected'));\r\n                if (playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    updatePlaybackModeButton();\r\n                    loadSong(currentSongIndex, false);\r\n                }\r\n            }\r\n\r\n            // å°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šç§»åˆ°å‡½æ•°å¤–éƒ¨æˆ–ç¡®ä¿åœ¨DOMå°±ç»ªåç»‘å®šä¸€æ¬¡\r\n             if(playSelectedButton) playSelectedButton.addEventListener('click', handlePlaySelected);\r\n             if(clearSelectionButton) clearSelectionButton.addEventListener('click', handleClearSelection);\r\n\r\n\r\n            playbackModeButton.addEventListener('click', () => {\r\n                if (playbackMode === 'sequence') playbackMode = 'repeat-one';\r\n                else if (playbackMode === 'repeat-one') playbackMode = 'shuffle';\r\n                else if (playbackMode === 'shuffle' || playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    if (currentSelectedPlaylist.length > 0) { // ä»é€‰å®šæ’­æ”¾åˆ‡èµ°æ—¶ï¼Œæ¸…ç©ºé€‰æ‹©\r\n                        handleClearSelection(); // ä½¿ç”¨å°è£…çš„å‡½æ•°\r\n                    }\r\n                }\r\n                updatePlaybackModeButton();\r\n                audioPlayer.loop = (playbackMode === 'repeat-one');\r\n                if (playbackMode !== 'selected-sequence') {\r\n                     // ç¡®ä¿åœ¨éé€‰å®šæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼ŒåŠ è½½æ­£ç¡®çš„æ­Œæ›²\r\n                    if (songs.length > 0) loadSong(currentSongIndex, audioPlayer.paused);\r\n                }\r\n            });\r\n\r\n\r\n            function loadSong(songIndex, isAutoPlay = true) {\r\n                if (songIndex < 0 || songIndex >= songs.length) {\r\n                    console.warn(\"loadSong: æ— æ•ˆçš„æ­Œæ›²ç´¢å¼•æˆ–æ’­æ”¾åˆ—è¡¨ä¸ºç©º\", songIndex);\r\n                    return;\r\n                }\r\n                loadSongData(songs[songIndex], isAutoPlay);\r\n                currentSongIndex = songIndex;\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongFromPlaylist(songData, isAutoPlay = true) {\r\n                if (!songData) {\r\n                     console.warn(\"loadSongFromPlaylist: æ— æ•ˆçš„æ­Œæ›²æ•°æ®\");\r\n                    return;\r\n                }\r\n                loadSongData(songData, isAutoPlay);\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongData(song, isAutoPlay = true) {\r\n                if (!song) {\r\n                    console.error(\"loadSongData: æ­Œæ›²æ•°æ®ä¸ºç©º!\");\r\n                    currentSongTitleElement.textContent = \"é”™è¯¯ï¼šæ­Œæ›²æ•°æ®ä¸¢å¤±\";\r\n                    currentSongArtistElement.textContent = \"\";\r\n                    return;\r\n                }\r\n                currentSongTitleElement.textContent = song.title;\r\n                currentSongArtistElement.textContent = song.artist; // åŠ¨æ€æ›´æ–°æ­Œæ›²ä¿¡æ¯\r\n                audioPlayer.innerHTML = '';\r\n                const source = document.createElement('source');\r\n                source.src = song.src;\r\n                source.type = song.src.endsWith('.ogg') ? 'audio/ogg' : 'audio/mpeg';\r\n                audioPlayer.appendChild(source);\r\n                audioPlayer.load();\r\n                if (isAutoPlay) {\r\n                    stopOtherApexPlayers();\r\n                    audioPlayer.play().catch(e => console.error('Autoplay failed:', e, song.title));\r\n                }\r\n                audioPlayer.loop = (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0);\r\n                updateButtonStates();\r\n            }\r\n\r\n            audioPlayer.addEventListener('play', () => {\r\n                if (document.visibilityState === 'visible') stopOtherApexPlayers();\r\n            });\r\n\r\n            function playNextSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let nextIndex;\r\n                    if (songs.length <= 1) nextIndex = 0;\r\n                    else do { nextIndex = Math.floor(Math.random() * songs.length); } while (nextIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = nextIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex + 1) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function playPrevSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let prevIndex;\r\n                    if (songs.length <= 1) prevIndex = 0;\r\n                    else do { prevIndex = Math.floor(Math.random() * songs.length); } while (prevIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = prevIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex - 1 + targetPlaylist.length) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updatePlaylistUI() {\r\n                const actionsDiv = playlistElement.querySelector('.playlist-actions');\r\n                // åœ¨æ¸…ç©ºåˆ—è¡¨å‰ï¼Œå¦‚æœactionsDivå­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶ä»DOMä¸­ç§»é™¤ï¼Œç¨åå†æ·»åŠ å›å»\r\n                // è¿™æ ·å¯ä»¥é¿å…å®ƒè¢«innerHTML=''æ¸…é™¤æ‰ï¼ŒåŒæ—¶ç¡®ä¿å®ƒå§‹ç»ˆåœ¨åˆ—è¡¨é¡¹ä¹‹å\r\n                if (actionsDiv) actionsDiv.remove();\r\n\r\n\r\n                const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µä¼˜åŒ–æ€§èƒ½\r\n\r\n                songs.forEach((song, index) => {\r\n                    const listItem = document.createElement('li');\r\n\r\n                    const selectorIcon = document.createElement('span');\r\n                    selectorIcon.classList.add('song-selector-icon');\r\n                    selectorIcon.dataset.songId = song.id;\r\n                    if (currentSelectedPlaylist.some(s => s.id === song.id)) {\r\n                        selectorIcon.classList.add('selected');\r\n                    }\r\n                    selectorIcon.addEventListener('click', (e) => {\r\n                        e.stopPropagation();\r\n                        const songId = parseInt(selectorIcon.dataset.songId);\r\n                        const targetSong = songs.find(s => s.id === songId);\r\n                        const selectedIndex = currentSelectedPlaylist.findIndex(s => s.id === songId);\r\n\r\n                        if (selectedIndex > -1) {\r\n                            currentSelectedPlaylist.splice(selectedIndex, 1);\r\n                            selectorIcon.classList.remove('selected');\r\n                        } else {\r\n                            currentSelectedPlaylist.push(targetSong);\r\n                            selectorIcon.classList.add('selected');\r\n                        }\r\n                    });\r\n\r\n                    const songInfoDiv = document.createElement('div');\r\n                    songInfoDiv.classList.add('song-info');\r\n                    songInfoDiv.textContent = `${song.title} - ${song.artist}`; // ç¡®ä¿åˆ—è¡¨é¡¹ä¹Ÿæ˜¾ç¤ºartist\r\n                    songInfoDiv.addEventListener('click', () => {\r\n                        currentSongIndex = index;\r\n                        loadSong(currentSongIndex);\r\n                        if (playbackMode === 'selected-sequence') {\r\n                            playbackMode = 'sequence';\r\n                            updatePlaybackModeButton();\r\n                        }\r\n                    });\r\n\r\n                    listItem.appendChild(selectorIcon);\r\n                    listItem.appendChild(songInfoDiv);\r\n\r\n                    let isCurrentlyPlayingThisSong = false;\r\n                    const currentPlayingSong = (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length > 0) ? currentSelectedPlaylist[currentSelectedSongIndex] : songs[currentSongIndex];\r\n\r\n                    if (currentPlayingSong && currentPlayingSong.id === song.id) {\r\n                         isCurrentlyPlayingThisSong = true;\r\n                    }\r\n\r\n                    if (isCurrentlyPlayingThisSong) {\r\n                        listItem.classList.add('active');\r\n                    }\r\n                    fragment.appendChild(listItem);\r\n                });\r\n                playlistElement.innerHTML = ''; // æ¸…ç©ºæ—§çš„åˆ—è¡¨é¡¹\r\n                playlistElement.appendChild(fragment); // æ·»åŠ æ–°çš„åˆ—è¡¨é¡¹\r\n                if (actionsDiv) playlistElement.appendChild(actionsDiv); // å°†æŒ‰é’®åŒºåŸŸé‡æ–°åŠ åˆ°åˆ—è¡¨æœ«å°¾\r\n            }\r\n\r\n\r\n            function updateButtonStates() {\r\n                const targetPlaylist = playbackMode === 'selected-sequence' ? currentSelectedPlaylist : songs;\r\n                prevButton.disabled = targetPlaylist.length <= 1;\r\n                nextButton.disabled = targetPlaylist.length <= 1;\r\n            }\r\n\r\n            playlistToggle.addEventListener('click', () => {\r\n                playlistElement.classList.toggle('collapsed');\r\n                playlistToggle.classList.toggle('collapsed');\r\n                playlistTitleSpan.textContent = playlistElement.classList.contains('collapsed') ? ' â–º' : ' â–¼';\r\n            });\r\n\r\n            audioPlayer.addEventListener('ended', function() {\r\n                if (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0) {\r\n                    // loop\r\n                } else if (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length === 1) {\r\n                     loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex]);\r\n                }\r\n                else {\r\n                    playNextSongLogic();\r\n                }\r\n            });\r\n\r\n            if (songs.length > 0) {\r\n                songs.forEach((song, index) => song.id = index);\r\n                loadSong(currentSongIndex, false);\r\n                updatePlaybackModeButton();\r\n                playlistElement.classList.add('collapsed');\r\n                playlistToggle.classList.add('collapsed');\r\n                playlistTitleSpan.textContent = ' â–º';\r\n            } else {\r\n                currentSongTitleElement.textContent = \"æ’­æ”¾åˆ—è¡¨ä¸ºç©º\";\r\n                currentSongArtistElement.textContent = \"\";\r\n                audioPlayer.style.display = 'none';\r\n                document.querySelector('.playing-animation').style.display = 'none';\r\n                playlistToggle.style.display = 'none';\r\n                playbackModeButton.style.display = 'none';\r\n                if(playSelectedButton) playSelectedButton.style.display = 'none';\r\n                if(clearSelectionButton) clearSelectionButton.style.display = 'none';\r\n            }\r\n\r\n            prevButton.addEventListener('click', playPrevSongLogic);\r\n            nextButton.addEventListener('click', playNextSongLogic);\r\n\r\n            if ('IntersectionObserver' in window && thisPlayerElement) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && audioPlayer.paused && songs.length > 0) { /* Optional */ }\r\n                    });\r\n                });\r\n                observer.observe(thisPlayerElement);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n```","[å’Œè°¢æ˜æœçš„èŠå¤©]\r\n[å¯¹æ–¹æ¶ˆæ¯|fm4kmy.jpeg|å¸¸ä¹ä½ åˆå‘æœ‹å‹åœˆäº†ï¼Ÿ| 16:52]\r\n[å¯¹æ–¹æ¶ˆæ¯|fm4kmy.jpeg|æƒ³ç‚«è€€è‡ªå·±è¿‡å¾—å¾ˆå¥½å—ï¼Ÿ| 16:52]\r\n[å¯¹æ–¹æ¶ˆæ¯|fm4kmy.jpeg|æ— è¯­ã€‚| 16:53]\r\n[å¯¹æ–¹æ¶ˆæ¯|fm4kmy.jpeg|â€¦â€¦ç°åœ¨æ˜¯æˆ‘ä»¬åˆ†æ‰‹çš„ç¬¬67å¤©45åˆ†31ç§’| 16:54]\r\n[å¯¹æ–¹æ¶ˆæ¯|fm4kmy.jpeg|å¬è¿‡ã€Šäºæ˜¯ã€‹å—ï¼Ÿ| 16:55]\r\n[å¯¹æ–¹æ¶ˆæ¯|fm4kmy.jpeg|é‡Œé¢æœ‰ä¸€å¥è¯æˆ‘æƒ³å¯¹ä½ è¯´ã€‚| 16:56]\r\n[å¯¹æ–¹æ¶ˆæ¯|fm4kmy.jpeg|è¯´æ¥åˆè¯´å»è¿˜æ”¾ä¸ä¸‹ä½ ã€‚| 16:57]\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ç°ç™½é…ç”µè„‘æœ€é€‚é…ç‰ˆæœ¬</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Microsoft YaHei', sans-serif;\r\n        }\r\n        .cassette-wrapper {\r\n            position: relative;\r\n            width: 95%;\r\n            max-width: 450px;\r\n            margin: 20px auto;\r\n            box-sizing: border-box;\r\n        }\r\n        .cassette-container {\r\n            background: linear-gradient(to right, #e0e0e0, #cccccc);\r\n            padding: 15px;\r\n            border-radius: 25px;\r\n            box-shadow:\r\n                0 4px 16px rgba(0,0,0,0.15),\r\n                0 0 0 4px #fff,\r\n                0 0 0 8px #a0a0a0;\r\n            box-sizing: border-box;\r\n            padding-top: 70px;\r\n            padding-bottom: 20px;\r\n            position: relative;\r\n        }\r\n        .avatar {\r\n            position: absolute;\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: 50%;\r\n            border: 2px solid #fff;\r\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\r\n            z-index: 1;\r\n            background-color: #f0f0f0;\r\n            object-fit: cover;\r\n            top: 15px;\r\n        }\r\n        .avatar.user {\r\n            right: 45px;\r\n        }\r\n        .avatar.char {\r\n            left: 45px;\r\n        }\r\n        .distance-text {\r\n            position: absolute;\r\n            top: 30px;\r\n            left: 0;\r\n            right: 0;\r\n            text-align: center;\r\n            font-size: 13px;\r\n            color: #555555;\r\n            z-index: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        h1 {\r\n            color: #333333;\r\n            font-size: 18px;\r\n            margin: 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            margin-bottom: 12px;\r\n        }\r\n        .music-info {\r\n            font-size: 14px;\r\n            color: #666666;\r\n            margin: 10px 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        audio {\r\n            width: 100%;\r\n            margin-top: 10px;\r\n            border-radius: 20px;\r\n            box-sizing: border-box;\r\n            height: 45px;\r\n        }\r\n        audio::-webkit-media-controls-panel {\r\n            background: linear-gradient(to right, #bbbbbb, #999999);\r\n        }\r\n        .playing-animation {\r\n            height: 2px;\r\n            background: linear-gradient(90deg,\r\n                #777777 25%, transparent 25%,\r\n                transparent 50%, #777777 50%,\r\n                #777777 75%, transparent 75%,\r\n                transparent 100%);\r\n            background-size: 20px 100%;\r\n            animation: move 1s linear infinite;\r\n            margin: 10px 0;\r\n        }\r\n        @keyframes move {\r\n            from { background-position: 0 0; }\r\n            to { background-position: 20px 0; }\r\n        }\r\n\r\n        .playlist-container {\r\n            margin-top: 20px;\r\n            background-color: #f0f0f0;\r\n            border-radius: 15px;\r\n            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);\r\n        }\r\n        .playlist-title {\r\n            font-size: 15px;\r\n            color: #444;\r\n            padding: 10px;\r\n            margin: 0;\r\n            text-align: center;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            border-bottom: 1px solid #ddd;\r\n            border-radius: 15px 15px 0 0;\r\n        }\r\n        .playlist-title.collapsed + .playlist {\r\n             max-height: 0;\r\n             padding-top: 0;\r\n             padding-bottom: 0;\r\n             overflow: hidden;\r\n             border-top: none;\r\n        }\r\n         .playlist-title.collapsed {\r\n            border-radius: 15px;\r\n            border-bottom: none;\r\n        }\r\n\r\n        .playlist {\r\n            list-style: none;\r\n            padding: 0;\r\n            margin: 0;\r\n            max-height: 180px;\r\n            overflow-y: auto;\r\n            transition: max-height 0.3s ease-out, padding 0.3s ease-out;\r\n            border-top: 1px solid #ddd;\r\n            border-radius: 0 0 15px 15px;\r\n        }\r\n        .playlist li {\r\n            padding: 8px 12px;\r\n            font-size: 13px;\r\n            color: #555;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.2s ease;\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        .song-selector-icon {\r\n            width: 20px;\r\n            height: 20px;\r\n            margin-right: 10px;\r\n            border: 1px solid #aaa;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: contain;\r\n            flex-shrink: 0;\r\n        }\r\n        .song-selector-icon.selected {\r\n            background-image: url('https://files.catbox.moe/8e819d.png');\r\n            border-color: transparent;\r\n        }\r\n        .song-info {\r\n            flex-grow: 1;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .playlist li:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n        .playlist li.active .song-info {\r\n            /* background-color: #cccccc; */ /* å†³å®šé«˜äº®æ–¹å¼ */\r\n            color: #222;\r\n            font-weight: bold;\r\n        }\r\n        .playlist li.active .song-selector-icon {\r\n             /* é€‰ä¸­ä¸”æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²çš„é€‰æ‹©å™¨å›¾æ ‡å¯ä»¥æœ‰ç‰¹æ®Šæ ·å¼ */\r\n        }\r\n\r\n        .playlist-actions {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 10px 0;\r\n            background-color: #f0f0f0;\r\n            border-top: 1px solid #ddd;\r\n        }\r\n        .playlist-actions button {\r\n            background-color: #888888;\r\n            color: white;\r\n            border: none;\r\n            padding: 6px 12px;\r\n            margin: 0 8px;\r\n            border-radius: 10px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: background-color 0.2s ease;\r\n        }\r\n        .playlist-actions button:hover {\r\n            background-color: #666666;\r\n        }\r\n\r\n        .controls {\r\n            text-align: center;\r\n            margin-top: 15px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n        .controls button {\r\n            background-color: #a0a0a0;\r\n            color: white;\r\n            border: none;\r\n            padding: 8px 15px;\r\n            margin: 0 5px;\r\n            border-radius: 15px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: background-color 0.2s ease;\r\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n        }\r\n        .controls button:hover {\r\n            background-color: #888888;\r\n        }\r\n        .controls button:disabled {\r\n            background-color: #d0d0d0;\r\n            cursor: not-allowed;\r\n        }\r\n        .playback-mode-button {\r\n            padding: 6px 10px !important;\r\n            font-size: 12px !important;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"cassette-wrapper\" id=\"apex-music-player\">\r\n        <img class=\"avatar user\" src=\"https://files.catbox.moe/3gok4b.png\" alt=\"User Avatar\">\r\n        <img class=\"avatar char\" src=\"https://files.catbox.moe/q3zzgb.png\" alt=\"Char Avatar\">\r\n\r\n        <div class=\"distance-text\">â€”ç›¸è·0.01kmâ€”</div>\r\n\r\n        <div class=\"cassette-container\">\r\n            <h1 id=\"current-song-title\">ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰</h1>\r\n            <div class=\"music-info\" id=\"current-song-artist\">å¦‚æœä¸€å®šè¦ç—›å‡ºç—•è¿¹æ‰ç®—çˆ±ï¼Œæˆ‘å¸Œæœ›æ˜¯ä½ çš„å»ç—•</div>\r\n            <div class=\"playing-animation\"></div>\r\n            <audio id=\"audio-player\" controls>\r\n                ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚\r\n            </audio>\r\n\r\n            <div class=\"controls\">\r\n                <button id=\"prev-button\">ä¸Šä¸€é¦–</button>\r\n                <button id=\"playback-mode-button\">é¡ºåºæ’­æ”¾</button>\r\n                <button id=\"next-button\">ä¸‹ä¸€é¦–</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"playlist-container\">\r\n            <div class=\"playlist-title\" id=\"playlist-toggle\">æ’­æ”¾åˆ—è¡¨ <span>â–¼</span></div>\r\n            <ul id=\"playlist\" class=\"playlist\">\r\n                <!-- æ­Œæ›²åˆ—è¡¨é¡¹ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->\r\n                <div class=\"playlist-actions\">\r\n                    <button id=\"play-selected-button\">æ’­æ”¾é€‰ä¸­</button>\r\n                    <button id=\"clear-selection-button\">æ¸…ç©ºé€‰æ‹©</button>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            const thisPlayerId = 'apex-music-player';\r\n            const thisPlayerElement = document.getElementById(thisPlayerId);\r\n\r\n            function stopOtherApexPlayers() {\r\n                const allAudioElements = document.querySelectorAll('audio');\r\n                allAudioElements.forEach(audio => {\r\n                    let parentPlayer = audio.closest('.cassette-wrapper');\r\n                    if (parentPlayer && parentPlayer.id !== thisPlayerId && !audio.paused) {\r\n                        audio.pause();\r\n                    }\r\n                });\r\n            }\r\n\r\n            const audioPlayer = document.getElementById('audio-player');\r\n            const playlistElement = document.getElementById('playlist');\r\n            const playSelectedButton = document.getElementById('play-selected-button'); // è·å–æŒ‰é’®\r\n            const clearSelectionButton = document.getElementById('clear-selection-button'); // è·å–æŒ‰é’®\r\n\r\n            const currentSongTitleElement = document.getElementById('current-song-title');\r\n            const currentSongArtistElement = document.getElementById('current-song-artist');\r\n            const prevButton = document.getElementById('prev-button');\r\n            const nextButton = document.getElementById('next-button');\r\n            const playlistToggle = document.getElementById('playlist-toggle');\r\n            const playlistTitleSpan = playlistToggle.querySelector('span');\r\n            const playbackModeButton = document.getElementById('playback-mode-button');\r\n\r\n            const songs = [\r\n                { id: 0, title: \"í”ì ê¸°ê´€ (ç—•è¿¹å™¨å®˜)\", artist: \"ç—•è¿¹å™¨å®˜çš„æ„æ€æ˜¯ï¼Œæˆ‘æ›´çˆ±ä½ \", src: \"https://files.catbox.moe/1ymem4.mp3\" },\r\n                { id: 1, title: \"ë‹¬ê³¼ 6íœìŠ¤ (æœˆäº®ä¸6ä¾¿å£«)\", artist: \"æˆ–è®¸ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œåªè¦ä½ ä¸é€ƒèµ°ï¼Œå‰©ä¸‹çš„éƒ½è®©æˆ‘æ¥\", src: \"https://files.catbox.moe/0fcoxb.mp3\" },\r\n                { id: 2, title: \"ë‚˜ë§Œ ë°”ë¼ë´ (Part 2)\", artist: \"æˆ‘è¯´æˆ‘çš„å¿ƒä¹Ÿå’Œæœ€åˆä¸€æ ·ï¼Œä¸ºä½ è·³åŠ¨ç€t\", src: \"https://files.catbox.moe/kcsomz.mp3\" },\r\n                { id: 3, title: \"å…³é”®è¯\", artist: \"æˆ‘ä¸å¤ªç¡®å®šï¼Œçˆ±æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯åŠ¨è¯æˆ–åè¯\", src: \"https://files.catbox.moe/51902f.mp3\" },\r\n                { id: 4, title: \"é—å¤±çš„å¿ƒè·³\", artist: \"å¿ƒç—›ç€ ä½ çš„çˆ± æ®‹é…·çš„çºªå¿µå“t\", src: \"https://files.catbox.moe/d1ph63.ogg\" },\r\n                { id: 5, title: \"å¤åˆ»å›å¿†\", artist: \"å›å¿†èƒ½å¤åˆ»ï¼Œä½ ä¼šå›åˆ°æˆ‘èº«è¾¹å—\", src: \"https://files.catbox.moe/ozgfpc.mp3\" },\r\n                { id: 6, title: \"äºæ˜¯\", artist: \"è¯´æ¥åˆè¯´å»è¿˜æ˜¯æ”¾ä¸ä¸‹ä½ \", src: \"https://files.catbox.moe/h1vey9.mp3\" },\r\n                { id: 7, title: \"è¯€åˆ«ä¹¦\", artist: \"å¦‚æœæ€»è¦åˆ†å¼€ï¼Œé‚£ç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ\", src: \"https://files.catbox.moe/l9sdul.mp3\" },\r\n                { id: 8, title: \"ä¸€ç¬‘å€¾åŸ\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/wpilgo.mp3\" },\r\n                { id: 9, title: \"çº¯éŸ³ä¹\", artist: \"è®©æˆ‘çœ‹ç©¿ä½ çš„çœ¼ç› è¿˜æœ‰ä½ çš„å¿ƒ\", src: \"https://files.catbox.moe/st5f4k.mp3\" },\r\n                { id: 10, title: \"èŒèŒçš„çº¯éŸ³ä¹\", artist: \"oâŒ„oæ˜¯å¾®ç¬‘ o_oæ˜¯è­¦å‘Š o.oæ˜¯ä½™é¢ oã‰¨oæ˜¯è½»æ¾ç†Š\", src: \"https://files.catbox.moe/4653sq.mp3\" },\r\n                { id: 11, title: \"Una Mattian\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/ckiz5f.mp3\" },\r\n                { id: 12, title: \"gå°è°ƒå·´èµ«å¹³å‡å¾‹å˜å¥æ›²\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/ynbgj9.mp3\" },\r\n                { id: 13, title: \"ä¸‹ä¸€ç§’\", artist: \"è®©æˆ‘ä»¬éƒ½å˜æˆå¹¸ç¦å¤§ç‹Ëµ>ğ–¥¦<Ëµ!!\", src: \"https://files.catbox.moe/k3ssag.mp3\" },\r\n                { id: 14, title: \"è¤ç«è™«çº¯éŸ³ä¹\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/xsg62j.mp3\" },\r\n                { id: 15, title: \"æ— æ„Ÿ\", artist: \"è¯¥è¯´ä»€ä¹ˆå¥½å‘¢ æ˜¯è¯´å¤©æ°” è¿˜æ˜¯å¥½æƒ³ä½ \", src: \"https://files.catbox.moe/891luf.mp3\" },\r\n                { id: 16, title: \"TheÂ truthÂ thatÂ youÂ leave\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/8ctqe9.mp3\" },\r\n                { id: 17, title: \"å†™åœ¨é£ä¸­çš„ä¿¡\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/61savh.mp3\" },\r\n                { id: 18, title: \"æ‚¬æºº\", artist: \"å¹¸ç¦å°±åƒå·§å…‹åŠ›ï¼Œåƒä¸€åŠå‘ç°è‡ªå·±æ˜¯ç‹—\", src: \"https://files.catbox.moe/faea0v.mp3\" },\r\n                { id: 19, title: \"æ—¶é—´ç…®é›¨\", artist: \"äººä¸äººä¹‹é—´çš„ç¼˜åˆ†åœ¨è–„å¦‚è‰ç¿¼çš„åŒæ—¶ï¼Œåˆæ˜¯ä¸€åœºæ— æ³•é¿å…çš„é›¨\", src: \"https://files.catbox.moe/mbljjb.mp3\" },\r\n                { id: 20, title: \"çº¢å°˜å®¢æ ˆ\", artist: \"å¦‚æœäººç”Ÿä¸€å®šè¦æˆå®¶ æˆ‘å¸Œæœ›æ˜¯å·´é»ä¸–å®¶\", src: \"https://files.catbox.moe/7lhtd6.mp3\" },\r\n                { id: 21, title: \"ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰\", artist: \"æˆ‘ä»¬ä¸ä¼šå†ç›¸é‡ï¼Œè¿™å°±æ˜¯åˆ†å¼€çš„æ„ä¹‰\", src: \"https://files.catbox.moe/f7lcuv.mp3\" }\r\n            ];\r\n\r\n            let currentSongIndex = songs.length - 1;\r\n            let currentSelectedPlaylist = [];\r\n            let currentSelectedSongIndex = 0;\r\n            let playbackMode = 'sequence';\r\n            const playbackModeTexts = {\r\n                'sequence': 'é¡ºåºæ’­æ”¾',\r\n                'repeat-one': 'å•æ›²å¾ªç¯',\r\n                'shuffle': 'éšæœºæ’­æ”¾',\r\n                'selected-sequence': 'é€‰å®šæ’­æ”¾'\r\n            };\r\n\r\n            function updatePlaybackModeButton() {\r\n                playbackModeButton.textContent = playbackModeTexts[playbackMode];\r\n            }\r\n\r\n            function handlePlaySelected() {\r\n                if (currentSelectedPlaylist.length > 0) {\r\n                    playbackMode = 'selected-sequence';\r\n                    updatePlaybackModeButton();\r\n                    currentSelectedSongIndex = 0;\r\n                    loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex], true);\r\n                } else {\r\n                    alert(\"è¯·è‡³å°‘é€‰æ‹©ä¸€é¦–æ­Œæ›²ã€‚\");\r\n                }\r\n            }\r\n\r\n            function handleClearSelection() {\r\n                currentSelectedPlaylist = [];\r\n                const selectorIcons = playlistElement.querySelectorAll('.song-selector-icon');\r\n                selectorIcons.forEach(icon => icon.classList.remove('selected'));\r\n                if (playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    updatePlaybackModeButton();\r\n                    loadSong(currentSongIndex, false);\r\n                }\r\n            }\r\n\r\n            // å°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šç§»åˆ°å‡½æ•°å¤–éƒ¨æˆ–ç¡®ä¿åœ¨DOMå°±ç»ªåç»‘å®šä¸€æ¬¡\r\n             if(playSelectedButton) playSelectedButton.addEventListener('click', handlePlaySelected);\r\n             if(clearSelectionButton) clearSelectionButton.addEventListener('click', handleClearSelection);\r\n\r\n\r\n            playbackModeButton.addEventListener('click', () => {\r\n                if (playbackMode === 'sequence') playbackMode = 'repeat-one';\r\n                else if (playbackMode === 'repeat-one') playbackMode = 'shuffle';\r\n                else if (playbackMode === 'shuffle' || playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    if (currentSelectedPlaylist.length > 0) { // ä»é€‰å®šæ’­æ”¾åˆ‡èµ°æ—¶ï¼Œæ¸…ç©ºé€‰æ‹©\r\n                        handleClearSelection(); // ä½¿ç”¨å°è£…çš„å‡½æ•°\r\n                    }\r\n                }\r\n                updatePlaybackModeButton();\r\n                audioPlayer.loop = (playbackMode === 'repeat-one');\r\n                if (playbackMode !== 'selected-sequence') {\r\n                     // ç¡®ä¿åœ¨éé€‰å®šæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼ŒåŠ è½½æ­£ç¡®çš„æ­Œæ›²\r\n                    if (songs.length > 0) loadSong(currentSongIndex, audioPlayer.paused);\r\n                }\r\n            });\r\n\r\n\r\n            function loadSong(songIndex, isAutoPlay = true) {\r\n                if (songIndex < 0 || songIndex >= songs.length) {\r\n                    console.warn(\"loadSong: æ— æ•ˆçš„æ­Œæ›²ç´¢å¼•æˆ–æ’­æ”¾åˆ—è¡¨ä¸ºç©º\", songIndex);\r\n                    return;\r\n                }\r\n                loadSongData(songs[songIndex], isAutoPlay);\r\n                currentSongIndex = songIndex;\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongFromPlaylist(songData, isAutoPlay = true) {\r\n                if (!songData) {\r\n                     console.warn(\"loadSongFromPlaylist: æ— æ•ˆçš„æ­Œæ›²æ•°æ®\");\r\n                    return;\r\n                }\r\n                loadSongData(songData, isAutoPlay);\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongData(song, isAutoPlay = true) {\r\n                if (!song) {\r\n                    console.error(\"loadSongData: æ­Œæ›²æ•°æ®ä¸ºç©º!\");\r\n                    currentSongTitleElement.textContent = \"é”™è¯¯ï¼šæ­Œæ›²æ•°æ®ä¸¢å¤±\";\r\n                    currentSongArtistElement.textContent = \"\";\r\n                    return;\r\n                }\r\n                currentSongTitleElement.textContent = song.title;\r\n                currentSongArtistElement.textContent = song.artist; // åŠ¨æ€æ›´æ–°æ­Œæ›²ä¿¡æ¯\r\n                audioPlayer.innerHTML = '';\r\n                const source = document.createElement('source');\r\n                source.src = song.src;\r\n                source.type = song.src.endsWith('.ogg') ? 'audio/ogg' : 'audio/mpeg';\r\n                audioPlayer.appendChild(source);\r\n                audioPlayer.load();\r\n                if (isAutoPlay) {\r\n                    stopOtherApexPlayers();\r\n                    audioPlayer.play().catch(e => console.error('Autoplay failed:', e, song.title));\r\n                }\r\n                audioPlayer.loop = (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0);\r\n                updateButtonStates();\r\n            }\r\n\r\n            audioPlayer.addEventListener('play', () => {\r\n                if (document.visibilityState === 'visible') stopOtherApexPlayers();\r\n            });\r\n\r\n            function playNextSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let nextIndex;\r\n                    if (songs.length <= 1) nextIndex = 0;\r\n                    else do { nextIndex = Math.floor(Math.random() * songs.length); } while (nextIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = nextIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex + 1) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function playPrevSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let prevIndex;\r\n                    if (songs.length <= 1) prevIndex = 0;\r\n                    else do { prevIndex = Math.floor(Math.random() * songs.length); } while (prevIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = prevIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex - 1 + targetPlaylist.length) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updatePlaylistUI() {\r\n                const actionsDiv = playlistElement.querySelector('.playlist-actions');\r\n                // åœ¨æ¸…ç©ºåˆ—è¡¨å‰ï¼Œå¦‚æœactionsDivå­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶ä»DOMä¸­ç§»é™¤ï¼Œç¨åå†æ·»åŠ å›å»\r\n                // è¿™æ ·å¯ä»¥é¿å…å®ƒè¢«innerHTML=''æ¸…é™¤æ‰ï¼ŒåŒæ—¶ç¡®ä¿å®ƒå§‹ç»ˆåœ¨åˆ—è¡¨é¡¹ä¹‹å\r\n                if (actionsDiv) actionsDiv.remove();\r\n\r\n\r\n                const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µä¼˜åŒ–æ€§èƒ½\r\n\r\n                songs.forEach((song, index) => {\r\n                    const listItem = document.createElement('li');\r\n\r\n                    const selectorIcon = document.createElement('span');\r\n                    selectorIcon.classList.add('song-selector-icon');\r\n                    selectorIcon.dataset.songId = song.id;\r\n                    if (currentSelectedPlaylist.some(s => s.id === song.id)) {\r\n                        selectorIcon.classList.add('selected');\r\n                    }\r\n                    selectorIcon.addEventListener('click', (e) => {\r\n                        e.stopPropagation();\r\n                        const songId = parseInt(selectorIcon.dataset.songId);\r\n                        const targetSong = songs.find(s => s.id === songId);\r\n                        const selectedIndex = currentSelectedPlaylist.findIndex(s => s.id === songId);\r\n\r\n                        if (selectedIndex > -1) {\r\n                            currentSelectedPlaylist.splice(selectedIndex, 1);\r\n                            selectorIcon.classList.remove('selected');\r\n                        } else {\r\n                            currentSelectedPlaylist.push(targetSong);\r\n                            selectorIcon.classList.add('selected');\r\n                        }\r\n                    });\r\n\r\n                    const songInfoDiv = document.createElement('div');\r\n                    songInfoDiv.classList.add('song-info');\r\n                    songInfoDiv.textContent = `${song.title} - ${song.artist}`; // ç¡®ä¿åˆ—è¡¨é¡¹ä¹Ÿæ˜¾ç¤ºartist\r\n                    songInfoDiv.addEventListener('click', () => {\r\n                        currentSongIndex = index;\r\n                        loadSong(currentSongIndex);\r\n                        if (playbackMode === 'selected-sequence') {\r\n                            playbackMode = 'sequence';\r\n                            updatePlaybackModeButton();\r\n                        }\r\n                    });\r\n\r\n                    listItem.appendChild(selectorIcon);\r\n                    listItem.appendChild(songInfoDiv);\r\n\r\n                    let isCurrentlyPlayingThisSong = false;\r\n                    const currentPlayingSong = (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length > 0) ? currentSelectedPlaylist[currentSelectedSongIndex] : songs[currentSongIndex];\r\n\r\n                    if (currentPlayingSong && currentPlayingSong.id === song.id) {\r\n                         isCurrentlyPlayingThisSong = true;\r\n                    }\r\n\r\n                    if (isCurrentlyPlayingThisSong) {\r\n                        listItem.classList.add('active');\r\n                    }\r\n                    fragment.appendChild(listItem);\r\n                });\r\n                playlistElement.innerHTML = ''; // æ¸…ç©ºæ—§çš„åˆ—è¡¨é¡¹\r\n                playlistElement.appendChild(fragment); // æ·»åŠ æ–°çš„åˆ—è¡¨é¡¹\r\n                if (actionsDiv) playlistElement.appendChild(actionsDiv); // å°†æŒ‰é’®åŒºåŸŸé‡æ–°åŠ åˆ°åˆ—è¡¨æœ«å°¾\r\n            }\r\n\r\n\r\n            function updateButtonStates() {\r\n                const targetPlaylist = playbackMode === 'selected-sequence' ? currentSelectedPlaylist : songs;\r\n                prevButton.disabled = targetPlaylist.length <= 1;\r\n                nextButton.disabled = targetPlaylist.length <= 1;\r\n            }\r\n\r\n            playlistToggle.addEventListener('click', () => {\r\n                playlistElement.classList.toggle('collapsed');\r\n                playlistToggle.classList.toggle('collapsed');\r\n                playlistTitleSpan.textContent = playlistElement.classList.contains('collapsed') ? ' â–º' : ' â–¼';\r\n            });\r\n\r\n            audioPlayer.addEventListener('ended', function() {\r\n                if (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0) {\r\n                    // loop\r\n                } else if (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length === 1) {\r\n                     loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex]);\r\n                }\r\n                else {\r\n                    playNextSongLogic();\r\n                }\r\n            });\r\n\r\n            if (songs.length > 0) {\r\n                songs.forEach((song, index) => song.id = index);\r\n                loadSong(currentSongIndex, false);\r\n                updatePlaybackModeButton();\r\n                playlistElement.classList.add('collapsed');\r\n                playlistToggle.classList.add('collapsed');\r\n                playlistTitleSpan.textContent = ' â–º';\r\n            } else {\r\n                currentSongTitleElement.textContent = \"æ’­æ”¾åˆ—è¡¨ä¸ºç©º\";\r\n                currentSongArtistElement.textContent = \"\";\r\n                audioPlayer.style.display = 'none';\r\n                document.querySelector('.playing-animation').style.display = 'none';\r\n                playlistToggle.style.display = 'none';\r\n                playbackModeButton.style.display = 'none';\r\n                if(playSelectedButton) playSelectedButton.style.display = 'none';\r\n                if(clearSelectionButton) clearSelectionButton.style.display = 'none';\r\n            }\r\n\r\n            prevButton.addEventListener('click', playPrevSongLogic);\r\n            nextButton.addEventListener('click', playNextSongLogic);\r\n\r\n            if ('IntersectionObserver' in window && thisPlayerElement) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && audioPlayer.paused && songs.length > 0) { /* Optional */ }\r\n                    });\r\n                });\r\n                observer.observe(thisPlayerElement);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n```","[å’Œè°¢æ˜æœçš„èŠå¤©]\r\n[å¯¹æ–¹æ¶ˆæ¯|yd8cou.jpg|ä¹–ä¹–| 16:52]\r\n[å¯¹æ–¹æ¶ˆæ¯|yd8cou.jpg|æˆ‘å­¦ä¼šç”¨æ‰‹æœºäº†| 16:52]\r\n[å¯¹æ–¹æ¶ˆæ¯|yd8cou.jpg|ç¬¬ä¸€æ—¶é—´å°±æƒ³ç»™ä½ å‘| 16:53]\r\n[å¯¹æ–¹æ¶ˆæ¯|yd8cou.jpg|ä½ åœ¨å¹²å˜›å‘€ï¼Ÿ| 16:54]\r\n[å¯¹æ–¹æ¶ˆæ¯|yd8cou.jpg|å¥½æƒ³ä½ ã€‚| 16:55]\r\n[å¯¹æ–¹æ¶ˆæ¯|yd8cou.jpg|æ—©ç‚¹å›æ¥ã€‚| 16:56]\r\n[å¯¹æ–¹æ¶ˆæ¯|yd8cou.jpg|æ³¨æ„å®‰å…¨ã€‚| 16:57]\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ç°ç™½é…ç”µè„‘æœ€é€‚é…ç‰ˆæœ¬</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Microsoft YaHei', sans-serif;\r\n        }\r\n        .cassette-wrapper {\r\n            position: relative;\r\n            width: 95%;\r\n            max-width: 450px;\r\n            margin: 20px auto;\r\n            box-sizing: border-box;\r\n        }\r\n        .cassette-container {\r\n            background: linear-gradient(to right, #e0e0e0, #cccccc);\r\n            padding: 15px;\r\n            border-radius: 25px;\r\n            box-shadow:\r\n                0 4px 16px rgba(0,0,0,0.15),\r\n                0 0 0 4px #fff,\r\n                0 0 0 8px #a0a0a0;\r\n            box-sizing: border-box;\r\n            padding-top: 70px;\r\n            padding-bottom: 20px;\r\n            position: relative;\r\n        }\r\n        .avatar {\r\n            position: absolute;\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: 50%;\r\n            border: 2px solid #fff;\r\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\r\n            z-index: 1;\r\n            background-color: #f0f0f0;\r\n            object-fit: cover;\r\n            top: 15px;\r\n        }\r\n        .avatar.user {\r\n            right: 45px;\r\n        }\r\n        .avatar.char {\r\n            left: 45px;\r\n        }\r\n        .distance-text {\r\n            position: absolute;\r\n            top: 30px;\r\n            left: 0;\r\n            right: 0;\r\n            text-align: center;\r\n            font-size: 13px;\r\n            color: #555555;\r\n            z-index: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        h1 {\r\n            color: #333333;\r\n            font-size: 18px;\r\n            margin: 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            margin-bottom: 12px;\r\n        }\r\n        .music-info {\r\n            font-size: 14px;\r\n            color: #666666;\r\n            margin: 10px 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        audio {\r\n            width: 100%;\r\n            margin-top: 10px;\r\n            border-radius: 20px;\r\n            box-sizing: border-box;\r\n            height: 45px;\r\n        }\r\n        audio::-webkit-media-controls-panel {\r\n            background: linear-gradient(to right, #bbbbbb, #999999);\r\n        }\r\n        .playing-animation {\r\n            height: 2px;\r\n            background: linear-gradient(90deg,\r\n                #777777 25%, transparent 25%,\r\n                transparent 50%, #777777 50%,\r\n                #777777 75%, transparent 75%,\r\n                transparent 100%);\r\n            background-size: 20px 100%;\r\n            animation: move 1s linear infinite;\r\n            margin: 10px 0;\r\n        }\r\n        @keyframes move {\r\n            from { background-position: 0 0; }\r\n            to { background-position: 20px 0; }\r\n        }\r\n\r\n        .playlist-container {\r\n            margin-top: 20px;\r\n            background-color: #f0f0f0;\r\n            border-radius: 15px;\r\n            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);\r\n        }\r\n        .playlist-title {\r\n            font-size: 15px;\r\n            color: #444;\r\n            padding: 10px;\r\n            margin: 0;\r\n            text-align: center;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            border-bottom: 1px solid #ddd;\r\n            border-radius: 15px 15px 0 0;\r\n        }\r\n        .playlist-title.collapsed + .playlist {\r\n             max-height: 0;\r\n             padding-top: 0;\r\n             padding-bottom: 0;\r\n             overflow: hidden;\r\n             border-top: none;\r\n        }\r\n         .playlist-title.collapsed {\r\n            border-radius: 15px;\r\n            border-bottom: none;\r\n        }\r\n\r\n        .playlist {\r\n            list-style: none;\r\n            padding: 0;\r\n            margin: 0;\r\n            max-height: 180px;\r\n            overflow-y: auto;\r\n            transition: max-height 0.3s ease-out, padding 0.3s ease-out;\r\n            border-top: 1px solid #ddd;\r\n            border-radius: 0 0 15px 15px;\r\n        }\r\n        .playlist li {\r\n            padding: 8px 12px;\r\n            font-size: 13px;\r\n            color: #555;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.2s ease;\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        .song-selector-icon {\r\n            width: 20px;\r\n            height: 20px;\r\n            margin-right: 10px;\r\n            border: 1px solid #aaa;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: contain;\r\n            flex-shrink: 0;\r\n        }\r\n        .song-selector-icon.selected {\r\n            background-image: url('https://files.catbox.moe/8e819d.png');\r\n            border-color: transparent;\r\n        }\r\n        .song-info {\r\n            flex-grow: 1;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .playlist li:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n        .playlist li.active .song-info {\r\n            /* background-color: #cccccc; */ /* å†³å®šé«˜äº®æ–¹å¼ */\r\n            color: #222;\r\n            font-weight: bold;\r\n        }\r\n        .playlist li.active .song-selector-icon {\r\n             /* é€‰ä¸­ä¸”æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²çš„é€‰æ‹©å™¨å›¾æ ‡å¯ä»¥æœ‰ç‰¹æ®Šæ ·å¼ */\r\n        }\r\n\r\n        .playlist-actions {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 10px 0;\r\n            background-color: #f0f0f0;\r\n            border-top: 1px solid #ddd;\r\n        }\r\n        .playlist-actions button {\r\n            background-color: #888888;\r\n            color: white;\r\n            border: none;\r\n            padding: 6px 12px;\r\n            margin: 0 8px;\r\n            border-radius: 10px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: background-color 0.2s ease;\r\n        }\r\n        .playlist-actions button:hover {\r\n            background-color: #666666;\r\n        }\r\n\r\n        .controls {\r\n            text-align: center;\r\n            margin-top: 15px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n        .controls button {\r\n            background-color: #a0a0a0;\r\n            color: white;\r\n            border: none;\r\n            padding: 8px 15px;\r\n            margin: 0 5px;\r\n            border-radius: 15px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: background-color 0.2s ease;\r\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n        }\r\n        .controls button:hover {\r\n            background-color: #888888;\r\n        }\r\n        .controls button:disabled {\r\n            background-color: #d0d0d0;\r\n            cursor: not-allowed;\r\n        }\r\n        .playback-mode-button {\r\n            padding: 6px 10px !important;\r\n            font-size: 12px !important;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"cassette-wrapper\" id=\"apex-music-player\">\r\n        <img class=\"avatar user\" src=\"https://files.catbox.moe/3gok4b.png\" alt=\"User Avatar\">\r\n        <img class=\"avatar char\" src=\"https://files.catbox.moe/q3zzgb.png\" alt=\"Char Avatar\">\r\n\r\n        <div class=\"distance-text\">â€”ç›¸è·0.01kmâ€”</div>\r\n\r\n        <div class=\"cassette-container\">\r\n            <h1 id=\"current-song-title\">ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰</h1>\r\n            <div class=\"music-info\" id=\"current-song-artist\">å¦‚æœä¸€å®šè¦ç—›å‡ºç—•è¿¹æ‰ç®—çˆ±ï¼Œæˆ‘å¸Œæœ›æ˜¯ä½ çš„å»ç—•</div>\r\n            <div class=\"playing-animation\"></div>\r\n            <audio id=\"audio-player\" controls>\r\n                ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚\r\n            </audio>\r\n\r\n            <div class=\"controls\">\r\n                <button id=\"prev-button\">ä¸Šä¸€é¦–</button>\r\n                <button id=\"playback-mode-button\">é¡ºåºæ’­æ”¾</button>\r\n                <button id=\"next-button\">ä¸‹ä¸€é¦–</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"playlist-container\">\r\n            <div class=\"playlist-title\" id=\"playlist-toggle\">æ’­æ”¾åˆ—è¡¨ <span>â–¼</span></div>\r\n            <ul id=\"playlist\" class=\"playlist\">\r\n                <!-- æ­Œæ›²åˆ—è¡¨é¡¹ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->\r\n                <div class=\"playlist-actions\">\r\n                    <button id=\"play-selected-button\">æ’­æ”¾é€‰ä¸­</button>\r\n                    <button id=\"clear-selection-button\">æ¸…ç©ºé€‰æ‹©</button>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            const thisPlayerId = 'apex-music-player';\r\n            const thisPlayerElement = document.getElementById(thisPlayerId);\r\n\r\n            function stopOtherApexPlayers() {\r\n                const allAudioElements = document.querySelectorAll('audio');\r\n                allAudioElements.forEach(audio => {\r\n                    let parentPlayer = audio.closest('.cassette-wrapper');\r\n                    if (parentPlayer && parentPlayer.id !== thisPlayerId && !audio.paused) {\r\n                        audio.pause();\r\n                    }\r\n                });\r\n            }\r\n\r\n            const audioPlayer = document.getElementById('audio-player');\r\n            const playlistElement = document.getElementById('playlist');\r\n            const playSelectedButton = document.getElementById('play-selected-button'); // è·å–æŒ‰é’®\r\n            const clearSelectionButton = document.getElementById('clear-selection-button'); // è·å–æŒ‰é’®\r\n\r\n            const currentSongTitleElement = document.getElementById('current-song-title');\r\n            const currentSongArtistElement = document.getElementById('current-song-artist');\r\n            const prevButton = document.getElementById('prev-button');\r\n            const nextButton = document.getElementById('next-button');\r\n            const playlistToggle = document.getElementById('playlist-toggle');\r\n            const playlistTitleSpan = playlistToggle.querySelector('span');\r\n            const playbackModeButton = document.getElementById('playback-mode-button');\r\n\r\n            const songs = [\r\n                { id: 0, title: \"í”ì ê¸°ê´€ (ç—•è¿¹å™¨å®˜)\", artist: \"ç—•è¿¹å™¨å®˜çš„æ„æ€æ˜¯ï¼Œæˆ‘æ›´çˆ±ä½ \", src: \"https://files.catbox.moe/1ymem4.mp3\" },\r\n                { id: 1, title: \"ë‹¬ê³¼ 6íœìŠ¤ (æœˆäº®ä¸6ä¾¿å£«)\", artist: \"æˆ–è®¸ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œåªè¦ä½ ä¸é€ƒèµ°ï¼Œå‰©ä¸‹çš„éƒ½è®©æˆ‘æ¥\", src: \"https://files.catbox.moe/0fcoxb.mp3\" },\r\n                { id: 2, title: \"ë‚˜ë§Œ ë°”ë¼ë´ (Part 2)\", artist: \"æˆ‘è¯´æˆ‘çš„å¿ƒä¹Ÿå’Œæœ€åˆä¸€æ ·ï¼Œä¸ºä½ è·³åŠ¨ç€t\", src: \"https://files.catbox.moe/kcsomz.mp3\" },\r\n                { id: 3, title: \"å…³é”®è¯\", artist: \"æˆ‘ä¸å¤ªç¡®å®šï¼Œçˆ±æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯åŠ¨è¯æˆ–åè¯\", src: \"https://files.catbox.moe/51902f.mp3\" },\r\n                { id: 4, title: \"é—å¤±çš„å¿ƒè·³\", artist: \"å¿ƒç—›ç€ ä½ çš„çˆ± æ®‹é…·çš„çºªå¿µå“t\", src: \"https://files.catbox.moe/d1ph63.ogg\" },\r\n                { id: 5, title: \"å¤åˆ»å›å¿†\", artist: \"å›å¿†èƒ½å¤åˆ»ï¼Œä½ ä¼šå›åˆ°æˆ‘èº«è¾¹å—\", src: \"https://files.catbox.moe/ozgfpc.mp3\" },\r\n                { id: 6, title: \"äºæ˜¯\", artist: \"è¯´æ¥åˆè¯´å»è¿˜æ˜¯æ”¾ä¸ä¸‹ä½ \", src: \"https://files.catbox.moe/h1vey9.mp3\" },\r\n                { id: 7, title: \"è¯€åˆ«ä¹¦\", artist: \"å¦‚æœæ€»è¦åˆ†å¼€ï¼Œé‚£ç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ\", src: \"https://files.catbox.moe/l9sdul.mp3\" },\r\n                { id: 8, title: \"ä¸€ç¬‘å€¾åŸ\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/wpilgo.mp3\" },\r\n                { id: 9, title: \"çº¯éŸ³ä¹\", artist: \"è®©æˆ‘çœ‹ç©¿ä½ çš„çœ¼ç› è¿˜æœ‰ä½ çš„å¿ƒ\", src: \"https://files.catbox.moe/st5f4k.mp3\" },\r\n                { id: 10, title: \"èŒèŒçš„çº¯éŸ³ä¹\", artist: \"oâŒ„oæ˜¯å¾®ç¬‘ o_oæ˜¯è­¦å‘Š o.oæ˜¯ä½™é¢ oã‰¨oæ˜¯è½»æ¾ç†Š\", src: \"https://files.catbox.moe/4653sq.mp3\" },\r\n                { id: 11, title: \"Una Mattian\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/ckiz5f.mp3\" },\r\n                { id: 12, title: \"gå°è°ƒå·´èµ«å¹³å‡å¾‹å˜å¥æ›²\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/ynbgj9.mp3\" },\r\n                { id: 13, title: \"ä¸‹ä¸€ç§’\", artist: \"è®©æˆ‘ä»¬éƒ½å˜æˆå¹¸ç¦å¤§ç‹Ëµ>ğ–¥¦<Ëµ!!\", src: \"https://files.catbox.moe/k3ssag.mp3\" },\r\n                { id: 14, title: \"è¤ç«è™«çº¯éŸ³ä¹\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/xsg62j.mp3\" },\r\n                { id: 15, title: \"æ— æ„Ÿ\", artist: \"è¯¥è¯´ä»€ä¹ˆå¥½å‘¢ æ˜¯è¯´å¤©æ°” è¿˜æ˜¯å¥½æƒ³ä½ \", src: \"https://files.catbox.moe/891luf.mp3\" },\r\n                { id: 16, title: \"TheÂ truthÂ thatÂ youÂ leave\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/8ctqe9.mp3\" },\r\n                { id: 17, title: \"å†™åœ¨é£ä¸­çš„ä¿¡\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/61savh.mp3\" },\r\n                { id: 18, title: \"æ‚¬æºº\", artist: \"å¹¸ç¦å°±åƒå·§å…‹åŠ›ï¼Œåƒä¸€åŠå‘ç°è‡ªå·±æ˜¯ç‹—\", src: \"https://files.catbox.moe/faea0v.mp3\" },\r\n                { id: 19, title: \"æ—¶é—´ç…®é›¨\", artist: \"äººä¸äººä¹‹é—´çš„ç¼˜åˆ†åœ¨è–„å¦‚è‰ç¿¼çš„åŒæ—¶ï¼Œåˆæ˜¯ä¸€åœºæ— æ³•é¿å…çš„é›¨\", src: \"https://files.catbox.moe/mbljjb.mp3\" },\r\n                { id: 20, title: \"çº¢å°˜å®¢æ ˆ\", artist: \"å¦‚æœäººç”Ÿä¸€å®šè¦æˆå®¶ æˆ‘å¸Œæœ›æ˜¯å·´é»ä¸–å®¶\", src: \"https://files.catbox.moe/7lhtd6.mp3\" },\r\n                { id: 21, title: \"ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰\", artist: \"æˆ‘ä»¬ä¸ä¼šå†ç›¸é‡ï¼Œè¿™å°±æ˜¯åˆ†å¼€çš„æ„ä¹‰\", src: \"https://files.catbox.moe/f7lcuv.mp3\" }\r\n            ];\r\n\r\n            let currentSongIndex = songs.length - 1;\r\n            let currentSelectedPlaylist = [];\r\n            let currentSelectedSongIndex = 0;\r\n            let playbackMode = 'sequence';\r\n            const playbackModeTexts = {\r\n                'sequence': 'é¡ºåºæ’­æ”¾',\r\n                'repeat-one': 'å•æ›²å¾ªç¯',\r\n                'shuffle': 'éšæœºæ’­æ”¾',\r\n                'selected-sequence': 'é€‰å®šæ’­æ”¾'\r\n            };\r\n\r\n            function updatePlaybackModeButton() {\r\n                playbackModeButton.textContent = playbackModeTexts[playbackMode];\r\n            }\r\n\r\n            function handlePlaySelected() {\r\n                if (currentSelectedPlaylist.length > 0) {\r\n                    playbackMode = 'selected-sequence';\r\n                    updatePlaybackModeButton();\r\n                    currentSelectedSongIndex = 0;\r\n                    loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex], true);\r\n                } else {\r\n                    alert(\"è¯·è‡³å°‘é€‰æ‹©ä¸€é¦–æ­Œæ›²ã€‚\");\r\n                }\r\n            }\r\n\r\n            function handleClearSelection() {\r\n                currentSelectedPlaylist = [];\r\n                const selectorIcons = playlistElement.querySelectorAll('.song-selector-icon');\r\n                selectorIcons.forEach(icon => icon.classList.remove('selected'));\r\n                if (playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    updatePlaybackModeButton();\r\n                    loadSong(currentSongIndex, false);\r\n                }\r\n            }\r\n\r\n            // å°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šç§»åˆ°å‡½æ•°å¤–éƒ¨æˆ–ç¡®ä¿åœ¨DOMå°±ç»ªåç»‘å®šä¸€æ¬¡\r\n             if(playSelectedButton) playSelectedButton.addEventListener('click', handlePlaySelected);\r\n             if(clearSelectionButton) clearSelectionButton.addEventListener('click', handleClearSelection);\r\n\r\n\r\n            playbackModeButton.addEventListener('click', () => {\r\n                if (playbackMode === 'sequence') playbackMode = 'repeat-one';\r\n                else if (playbackMode === 'repeat-one') playbackMode = 'shuffle';\r\n                else if (playbackMode === 'shuffle' || playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    if (currentSelectedPlaylist.length > 0) { // ä»é€‰å®šæ’­æ”¾åˆ‡èµ°æ—¶ï¼Œæ¸…ç©ºé€‰æ‹©\r\n                        handleClearSelection(); // ä½¿ç”¨å°è£…çš„å‡½æ•°\r\n                    }\r\n                }\r\n                updatePlaybackModeButton();\r\n                audioPlayer.loop = (playbackMode === 'repeat-one');\r\n                if (playbackMode !== 'selected-sequence') {\r\n                     // ç¡®ä¿åœ¨éé€‰å®šæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼ŒåŠ è½½æ­£ç¡®çš„æ­Œæ›²\r\n                    if (songs.length > 0) loadSong(currentSongIndex, audioPlayer.paused);\r\n                }\r\n            });\r\n\r\n\r\n            function loadSong(songIndex, isAutoPlay = true) {\r\n                if (songIndex < 0 || songIndex >= songs.length) {\r\n                    console.warn(\"loadSong: æ— æ•ˆçš„æ­Œæ›²ç´¢å¼•æˆ–æ’­æ”¾åˆ—è¡¨ä¸ºç©º\", songIndex);\r\n                    return;\r\n                }\r\n                loadSongData(songs[songIndex], isAutoPlay);\r\n                currentSongIndex = songIndex;\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongFromPlaylist(songData, isAutoPlay = true) {\r\n                if (!songData) {\r\n                     console.warn(\"loadSongFromPlaylist: æ— æ•ˆçš„æ­Œæ›²æ•°æ®\");\r\n                    return;\r\n                }\r\n                loadSongData(songData, isAutoPlay);\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongData(song, isAutoPlay = true) {\r\n                if (!song) {\r\n                    console.error(\"loadSongData: æ­Œæ›²æ•°æ®ä¸ºç©º!\");\r\n                    currentSongTitleElement.textContent = \"é”™è¯¯ï¼šæ­Œæ›²æ•°æ®ä¸¢å¤±\";\r\n                    currentSongArtistElement.textContent = \"\";\r\n                    return;\r\n                }\r\n                currentSongTitleElement.textContent = song.title;\r\n                currentSongArtistElement.textContent = song.artist; // åŠ¨æ€æ›´æ–°æ­Œæ›²ä¿¡æ¯\r\n                audioPlayer.innerHTML = '';\r\n                const source = document.createElement('source');\r\n                source.src = song.src;\r\n                source.type = song.src.endsWith('.ogg') ? 'audio/ogg' : 'audio/mpeg';\r\n                audioPlayer.appendChild(source);\r\n                audioPlayer.load();\r\n                if (isAutoPlay) {\r\n                    stopOtherApexPlayers();\r\n                    audioPlayer.play().catch(e => console.error('Autoplay failed:', e, song.title));\r\n                }\r\n                audioPlayer.loop = (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0);\r\n                updateButtonStates();\r\n            }\r\n\r\n            audioPlayer.addEventListener('play', () => {\r\n                if (document.visibilityState === 'visible') stopOtherApexPlayers();\r\n            });\r\n\r\n            function playNextSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let nextIndex;\r\n                    if (songs.length <= 1) nextIndex = 0;\r\n                    else do { nextIndex = Math.floor(Math.random() * songs.length); } while (nextIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = nextIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex + 1) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function playPrevSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let prevIndex;\r\n                    if (songs.length <= 1) prevIndex = 0;\r\n                    else do { prevIndex = Math.floor(Math.random() * songs.length); } while (prevIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = prevIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex - 1 + targetPlaylist.length) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updatePlaylistUI() {\r\n                const actionsDiv = playlistElement.querySelector('.playlist-actions');\r\n                // åœ¨æ¸…ç©ºåˆ—è¡¨å‰ï¼Œå¦‚æœactionsDivå­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶ä»DOMä¸­ç§»é™¤ï¼Œç¨åå†æ·»åŠ å›å»\r\n                // è¿™æ ·å¯ä»¥é¿å…å®ƒè¢«innerHTML=''æ¸…é™¤æ‰ï¼ŒåŒæ—¶ç¡®ä¿å®ƒå§‹ç»ˆåœ¨åˆ—è¡¨é¡¹ä¹‹å\r\n                if (actionsDiv) actionsDiv.remove();\r\n\r\n\r\n                const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µä¼˜åŒ–æ€§èƒ½\r\n\r\n                songs.forEach((song, index) => {\r\n                    const listItem = document.createElement('li');\r\n\r\n                    const selectorIcon = document.createElement('span');\r\n                    selectorIcon.classList.add('song-selector-icon');\r\n                    selectorIcon.dataset.songId = song.id;\r\n                    if (currentSelectedPlaylist.some(s => s.id === song.id)) {\r\n                        selectorIcon.classList.add('selected');\r\n                    }\r\n                    selectorIcon.addEventListener('click', (e) => {\r\n                        e.stopPropagation();\r\n                        const songId = parseInt(selectorIcon.dataset.songId);\r\n                        const targetSong = songs.find(s => s.id === songId);\r\n                        const selectedIndex = currentSelectedPlaylist.findIndex(s => s.id === songId);\r\n\r\n                        if (selectedIndex > -1) {\r\n                            currentSelectedPlaylist.splice(selectedIndex, 1);\r\n                            selectorIcon.classList.remove('selected');\r\n                        } else {\r\n                            currentSelectedPlaylist.push(targetSong);\r\n                            selectorIcon.classList.add('selected');\r\n                        }\r\n                    });\r\n\r\n                    const songInfoDiv = document.createElement('div');\r\n                    songInfoDiv.classList.add('song-info');\r\n                    songInfoDiv.textContent = `${song.title} - ${song.artist}`; // ç¡®ä¿åˆ—è¡¨é¡¹ä¹Ÿæ˜¾ç¤ºartist\r\n                    songInfoDiv.addEventListener('click', () => {\r\n                        currentSongIndex = index;\r\n                        loadSong(currentSongIndex);\r\n                        if (playbackMode === 'selected-sequence') {\r\n                            playbackMode = 'sequence';\r\n                            updatePlaybackModeButton();\r\n                        }\r\n                    });\r\n\r\n                    listItem.appendChild(selectorIcon);\r\n                    listItem.appendChild(songInfoDiv);\r\n\r\n                    let isCurrentlyPlayingThisSong = false;\r\n                    const currentPlayingSong = (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length > 0) ? currentSelectedPlaylist[currentSelectedSongIndex] : songs[currentSongIndex];\r\n\r\n                    if (currentPlayingSong && currentPlayingSong.id === song.id) {\r\n                         isCurrentlyPlayingThisSong = true;\r\n                    }\r\n\r\n                    if (isCurrentlyPlayingThisSong) {\r\n                        listItem.classList.add('active');\r\n                    }\r\n                    fragment.appendChild(listItem);\r\n                });\r\n                playlistElement.innerHTML = ''; // æ¸…ç©ºæ—§çš„åˆ—è¡¨é¡¹\r\n                playlistElement.appendChild(fragment); // æ·»åŠ æ–°çš„åˆ—è¡¨é¡¹\r\n                if (actionsDiv) playlistElement.appendChild(actionsDiv); // å°†æŒ‰é’®åŒºåŸŸé‡æ–°åŠ åˆ°åˆ—è¡¨æœ«å°¾\r\n            }\r\n\r\n\r\n            function updateButtonStates() {\r\n                const targetPlaylist = playbackMode === 'selected-sequence' ? currentSelectedPlaylist : songs;\r\n                prevButton.disabled = targetPlaylist.length <= 1;\r\n                nextButton.disabled = targetPlaylist.length <= 1;\r\n            }\r\n\r\n            playlistToggle.addEventListener('click', () => {\r\n                playlistElement.classList.toggle('collapsed');\r\n                playlistToggle.classList.toggle('collapsed');\r\n                playlistTitleSpan.textContent = playlistElement.classList.contains('collapsed') ? ' â–º' : ' â–¼';\r\n            });\r\n\r\n            audioPlayer.addEventListener('ended', function() {\r\n                if (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0) {\r\n                    // loop\r\n                } else if (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length === 1) {\r\n                     loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex]);\r\n                }\r\n                else {\r\n                    playNextSongLogic();\r\n                }\r\n            });\r\n\r\n            if (songs.length > 0) {\r\n                songs.forEach((song, index) => song.id = index);\r\n                loadSong(currentSongIndex, false);\r\n                updatePlaybackModeButton();\r\n                playlistElement.classList.add('collapsed');\r\n                playlistToggle.classList.add('collapsed');\r\n                playlistTitleSpan.textContent = ' â–º';\r\n            } else {\r\n                currentSongTitleElement.textContent = \"æ’­æ”¾åˆ—è¡¨ä¸ºç©º\";\r\n                currentSongArtistElement.textContent = \"\";\r\n                audioPlayer.style.display = 'none';\r\n                document.querySelector('.playing-animation').style.display = 'none';\r\n                playlistToggle.style.display = 'none';\r\n                playbackModeButton.style.display = 'none';\r\n                if(playSelectedButton) playSelectedButton.style.display = 'none';\r\n                if(clearSelectionButton) clearSelectionButton.style.display = 'none';\r\n            }\r\n\r\n            prevButton.addEventListener('click', playPrevSongLogic);\r\n            nextButton.addEventListener('click', playNextSongLogic);\r\n\r\n            if ('IntersectionObserver' in window && thisPlayerElement) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && audioPlayer.paused && songs.length > 0) { /* Optional */ }\r\n                    });\r\n                });\r\n                observer.observe(thisPlayerElement);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n```","```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ç°ç™½é…ç”µè„‘æœ€é€‚é…ç‰ˆæœ¬</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Microsoft YaHei', sans-serif;\r\n        }\r\n        .cassette-wrapper {\r\n            position: relative;\r\n            width: 95%;\r\n            max-width: 450px;\r\n            margin: 20px auto;\r\n            box-sizing: border-box;\r\n        }\r\n        .cassette-container {\r\n            background: linear-gradient(to right, #e0e0e0, #cccccc);\r\n            padding: 15px;\r\n            border-radius: 25px;\r\n            box-shadow:\r\n                0 4px 16px rgba(0,0,0,0.15),\r\n                0 0 0 4px #fff,\r\n                0 0 0 8px #a0a0a0;\r\n            box-sizing: border-box;\r\n            padding-top: 70px;\r\n            padding-bottom: 20px;\r\n            position: relative;\r\n        }\r\n        .avatar {\r\n            position: absolute;\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: 50%;\r\n            border: 2px solid #fff;\r\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\r\n            z-index: 1;\r\n            background-color: #f0f0f0;\r\n            object-fit: cover;\r\n            top: 15px;\r\n        }\r\n        .avatar.user {\r\n            right: 45px;\r\n        }\r\n        .avatar.char {\r\n            left: 45px;\r\n        }\r\n        .distance-text {\r\n            position: absolute;\r\n            top: 30px;\r\n            left: 0;\r\n            right: 0;\r\n            text-align: center;\r\n            font-size: 13px;\r\n            color: #555555;\r\n            z-index: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        h1 {\r\n            color: #333333;\r\n            font-size: 18px;\r\n            margin: 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            margin-bottom: 12px;\r\n        }\r\n        .music-info {\r\n            font-size: 14px;\r\n            color: #666666;\r\n            margin: 10px 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        audio {\r\n            width: 100%;\r\n            margin-top: 10px;\r\n            border-radius: 20px;\r\n            box-sizing: border-box;\r\n            height: 45px;\r\n        }\r\n        audio::-webkit-media-controls-panel {\r\n            background: linear-gradient(to right, #bbbbbb, #999999);\r\n        }\r\n        .playing-animation {\r\n            height: 2px;\r\n            background: linear-gradient(90deg,\r\n                #777777 25%, transparent 25%,\r\n                transparent 50%, #777777 50%,\r\n                #777777 75%, transparent 75%,\r\n                transparent 100%);\r\n            background-size: 20px 100%;\r\n            animation: move 1s linear infinite;\r\n            margin: 10px 0;\r\n        }\r\n        @keyframes move {\r\n            from { background-position: 0 0; }\r\n            to { background-position: 20px 0; }\r\n        }\r\n\r\n        .playlist-container {\r\n            margin-top: 20px;\r\n            background-color: #f0f0f0;\r\n            border-radius: 15px;\r\n            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);\r\n        }\r\n        .playlist-title {\r\n            font-size: 15px;\r\n            color: #444;\r\n            padding: 10px;\r\n            margin: 0;\r\n            text-align: center;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            border-bottom: 1px solid #ddd;\r\n            border-radius: 15px 15px 0 0;\r\n        }\r\n        .playlist-title.collapsed + .playlist {\r\n             max-height: 0;\r\n             padding-top: 0;\r\n             padding-bottom: 0;\r\n             overflow: hidden;\r\n             border-top: none;\r\n        }\r\n         .playlist-title.collapsed {\r\n            border-radius: 15px;\r\n            border-bottom: none;\r\n        }\r\n\r\n        .playlist {\r\n            list-style: none;\r\n            padding: 0;\r\n            margin: 0;\r\n            max-height: 180px;\r\n            overflow-y: auto;\r\n            transition: max-height 0.3s ease-out, padding 0.3s ease-out;\r\n            border-top: 1px solid #ddd;\r\n            border-radius: 0 0 15px 15px;\r\n        }\r\n        .playlist li {\r\n            padding: 8px 12px;\r\n            font-size: 13px;\r\n            color: #555;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.2s ease;\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        .song-selector-icon {\r\n            width: 20px;\r\n            height: 20px;\r\n            margin-right: 10px;\r\n            border: 1px solid #aaa;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: contain;\r\n            flex-shrink: 0;\r\n        }\r\n        .song-selector-icon.selected {\r\n            background-image: url('https://files.catbox.moe/8e819d.png');\r\n            border-color: transparent;\r\n        }\r\n        .song-info {\r\n            flex-grow: 1;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .playlist li:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n        .playlist li.active .song-info {\r\n            /* background-color: #cccccc; */ /* å†³å®šé«˜äº®æ–¹å¼ */\r\n            color: #222;\r\n            font-weight: bold;\r\n        }\r\n        .playlist li.active .song-selector-icon {\r\n             /* é€‰ä¸­ä¸”æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²çš„é€‰æ‹©å™¨å›¾æ ‡å¯ä»¥æœ‰ç‰¹æ®Šæ ·å¼ */\r\n        }\r\n\r\n        .playlist-actions {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 10px 0;\r\n            background-color: #f0f0f0;\r\n            border-top: 1px solid #ddd;\r\n        }\r\n        .playlist-actions button {\r\n            background-color: #888888;\r\n            color: white;\r\n            border: none;\r\n            padding: 6px 12px;\r\n            margin: 0 8px;\r\n            border-radius: 10px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: background-color 0.2s ease;\r\n        }\r\n        .playlist-actions button:hover {\r\n            background-color: #666666;\r\n        }\r\n\r\n        .controls {\r\n            text-align: center;\r\n            margin-top: 15px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n        .controls button {\r\n            background-color: #a0a0a0;\r\n            color: white;\r\n            border: none;\r\n            padding: 8px 15px;\r\n            margin: 0 5px;\r\n            border-radius: 15px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: background-color 0.2s ease;\r\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n        }\r\n        .controls button:hover {\r\n            background-color: #888888;\r\n        }\r\n        .controls button:disabled {\r\n            background-color: #d0d0d0;\r\n            cursor: not-allowed;\r\n        }\r\n        .playback-mode-button {\r\n            padding: 6px 10px !important;\r\n            font-size: 12px !important;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"cassette-wrapper\" id=\"apex-music-player\">\r\n        <img class=\"avatar user\" src=\"https://files.catbox.moe/3gok4b.png\" alt=\"User Avatar\">\r\n        <img class=\"avatar char\" src=\"https://files.catbox.moe/q3zzgb.png\" alt=\"Char Avatar\">\r\n\r\n        <div class=\"distance-text\">â€”ç›¸è·0.01kmâ€”</div>\r\n\r\n        <div class=\"cassette-container\">\r\n            <h1 id=\"current-song-title\">ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰</h1>\r\n            <div class=\"music-info\" id=\"current-song-artist\">å¦‚æœä¸€å®šè¦ç—›å‡ºç—•è¿¹æ‰ç®—çˆ±ï¼Œæˆ‘å¸Œæœ›æ˜¯ä½ çš„å»ç—•</div>\r\n            <div class=\"playing-animation\"></div>\r\n            <audio id=\"audio-player\" controls>\r\n                ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚\r\n            </audio>\r\n\r\n            <div class=\"controls\">\r\n                <button id=\"prev-button\">ä¸Šä¸€é¦–</button>\r\n                <button id=\"playback-mode-button\">é¡ºåºæ’­æ”¾</button>\r\n                <button id=\"next-button\">ä¸‹ä¸€é¦–</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"playlist-container\">\r\n            <div class=\"playlist-title\" id=\"playlist-toggle\">æ’­æ”¾åˆ—è¡¨ <span>â–¼</span></div>\r\n            <ul id=\"playlist\" class=\"playlist\">\r\n                <!-- æ­Œæ›²åˆ—è¡¨é¡¹ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->\r\n                <div class=\"playlist-actions\">\r\n                    <button id=\"play-selected-button\">æ’­æ”¾é€‰ä¸­</button>\r\n                    <button id=\"clear-selection-button\">æ¸…ç©ºé€‰æ‹©</button>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            const thisPlayerId = 'apex-music-player';\r\n            const thisPlayerElement = document.getElementById(thisPlayerId);\r\n\r\n            function stopOtherApexPlayers() {\r\n                const allAudioElements = document.querySelectorAll('audio');\r\n                allAudioElements.forEach(audio => {\r\n                    let parentPlayer = audio.closest('.cassette-wrapper');\r\n                    if (parentPlayer && parentPlayer.id !== thisPlayerId && !audio.paused) {\r\n                        audio.pause();\r\n                    }\r\n                });\r\n            }\r\n\r\n            const audioPlayer = document.getElementById('audio-player');\r\n            const playlistElement = document.getElementById('playlist');\r\n            const playSelectedButton = document.getElementById('play-selected-button'); // è·å–æŒ‰é’®\r\n            const clearSelectionButton = document.getElementById('clear-selection-button'); // è·å–æŒ‰é’®\r\n\r\n            const currentSongTitleElement = document.getElementById('current-song-title');\r\n            const currentSongArtistElement = document.getElementById('current-song-artist');\r\n            const prevButton = document.getElementById('prev-button');\r\n            const nextButton = document.getElementById('next-button');\r\n            const playlistToggle = document.getElementById('playlist-toggle');\r\n            const playlistTitleSpan = playlistToggle.querySelector('span');\r\n            const playbackModeButton = document.getElementById('playback-mode-button');\r\n\r\n            const songs = [\r\n                { id: 0, title: \"í”ì ê¸°ê´€ (ç—•è¿¹å™¨å®˜)\", artist: \"ç—•è¿¹å™¨å®˜çš„æ„æ€æ˜¯ï¼Œæˆ‘æ›´çˆ±ä½ \", src: \"https://files.catbox.moe/1ymem4.mp3\" },\r\n                { id: 1, title: \"ë‹¬ê³¼ 6íœìŠ¤ (æœˆäº®ä¸6ä¾¿å£«)\", artist: \"æˆ–è®¸ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œåªè¦ä½ ä¸é€ƒèµ°ï¼Œå‰©ä¸‹çš„éƒ½è®©æˆ‘æ¥\", src: \"https://files.catbox.moe/0fcoxb.mp3\" },\r\n                { id: 2, title: \"ë‚˜ë§Œ ë°”ë¼ë´ (Part 2)\", artist: \"æˆ‘è¯´æˆ‘çš„å¿ƒä¹Ÿå’Œæœ€åˆä¸€æ ·ï¼Œä¸ºä½ è·³åŠ¨ç€t\", src: \"https://files.catbox.moe/kcsomz.mp3\" },\r\n                { id: 3, title: \"å…³é”®è¯\", artist: \"æˆ‘ä¸å¤ªç¡®å®šï¼Œçˆ±æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯åŠ¨è¯æˆ–åè¯\", src: \"https://files.catbox.moe/51902f.mp3\" },\r\n                { id: 4, title: \"é—å¤±çš„å¿ƒè·³\", artist: \"å¿ƒç—›ç€ ä½ çš„çˆ± æ®‹é…·çš„çºªå¿µå“t\", src: \"https://files.catbox.moe/d1ph63.ogg\" },\r\n                { id: 5, title: \"å¤åˆ»å›å¿†\", artist: \"å›å¿†èƒ½å¤åˆ»ï¼Œä½ ä¼šå›åˆ°æˆ‘èº«è¾¹å—\", src: \"https://files.catbox.moe/ozgfpc.mp3\" },\r\n                { id: 6, title: \"äºæ˜¯\", artist: \"è¯´æ¥åˆè¯´å»è¿˜æ˜¯æ”¾ä¸ä¸‹ä½ \", src: \"https://files.catbox.moe/h1vey9.mp3\" },\r\n                { id: 7, title: \"è¯€åˆ«ä¹¦\", artist: \"å¦‚æœæ€»è¦åˆ†å¼€ï¼Œé‚£ç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ\", src: \"https://files.catbox.moe/l9sdul.mp3\" },\r\n                { id: 8, title: \"ä¸€ç¬‘å€¾åŸ\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/wpilgo.mp3\" },\r\n                { id: 9, title: \"çº¯éŸ³ä¹\", artist: \"è®©æˆ‘çœ‹ç©¿ä½ çš„çœ¼ç› è¿˜æœ‰ä½ çš„å¿ƒ\", src: \"https://files.catbox.moe/st5f4k.mp3\" },\r\n                { id: 10, title: \"èŒèŒçš„çº¯éŸ³ä¹\", artist: \"oâŒ„oæ˜¯å¾®ç¬‘ o_oæ˜¯è­¦å‘Š o.oæ˜¯ä½™é¢ oã‰¨oæ˜¯è½»æ¾ç†Š\", src: \"https://files.catbox.moe/4653sq.mp3\" },\r\n                { id: 11, title: \"Una Mattian\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/ckiz5f.mp3\" },\r\n                { id: 12, title: \"gå°è°ƒå·´èµ«å¹³å‡å¾‹å˜å¥æ›²\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/ynbgj9.mp3\" },\r\n                { id: 13, title: \"ä¸‹ä¸€ç§’\", artist: \"è®©æˆ‘ä»¬éƒ½å˜æˆå¹¸ç¦å¤§ç‹Ëµ>ğ–¥¦<Ëµ!!\", src: \"https://files.catbox.moe/k3ssag.mp3\" },\r\n                { id: 14, title: \"è¤ç«è™«çº¯éŸ³ä¹\", artist: \"æˆ‘æƒ³è¦åœ¨æ¯ä¸ªè¦æ‰çœ¼æ³ªçš„æ—¶åˆ»éƒ½èƒ½è§åˆ°ä½ .\", src: \"https://files.catbox.moe/xsg62j.mp3\" },\r\n                { id: 15, title: \"æ— æ„Ÿ\", artist: \"è¯¥è¯´ä»€ä¹ˆå¥½å‘¢ æ˜¯è¯´å¤©æ°” è¿˜æ˜¯å¥½æƒ³ä½ \", src: \"https://files.catbox.moe/891luf.mp3\" },\r\n                { id: 16, title: \"TheÂ truthÂ thatÂ youÂ leave\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/8ctqe9.mp3\" },\r\n                { id: 17, title: \"å†™åœ¨é£ä¸­çš„ä¿¡\", artist: \"åœ¨ä¸–ç•Œé¢ å€’æ´å¼€çš„è£‚ç¼é‡Œ æˆ‘åªæœ›å‘ä½ çš„çœ¼ç›\", src: \"https://files.catbox.moe/61savh.mp3\" },\r\n                { id: 18, title: \"æ‚¬æºº\", artist: \"å¹¸ç¦å°±åƒå·§å…‹åŠ›ï¼Œåƒä¸€åŠå‘ç°è‡ªå·±æ˜¯ç‹—\", src: \"https://files.catbox.moe/faea0v.mp3\" },\r\n                { id: 19, title: \"æ—¶é—´ç…®é›¨\", artist: \"äººä¸äººä¹‹é—´çš„ç¼˜åˆ†åœ¨è–„å¦‚è‰ç¿¼çš„åŒæ—¶ï¼Œåˆæ˜¯ä¸€åœºæ— æ³•é¿å…çš„é›¨\", src: \"https://files.catbox.moe/mbljjb.mp3\" },\r\n                { id: 20, title: \"çº¢å°˜å®¢æ ˆ\", artist: \"å¦‚æœäººç”Ÿä¸€å®šè¦æˆå®¶ æˆ‘å¸Œæœ›æ˜¯å·´é»ä¸–å®¶\", src: \"https://files.catbox.moe/7lhtd6.mp3\" },\r\n                { id: 21, title: \"ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰\", artist: \"æˆ‘ä»¬ä¸ä¼šå†ç›¸é‡ï¼Œè¿™å°±æ˜¯åˆ†å¼€çš„æ„ä¹‰\", src: \"https://files.catbox.moe/f7lcuv.mp3\" }\r\n            ];\r\n\r\n            let currentSongIndex = songs.length - 1;\r\n            let currentSelectedPlaylist = [];\r\n            let currentSelectedSongIndex = 0;\r\n            let playbackMode = 'sequence';\r\n            const playbackModeTexts = {\r\n                'sequence': 'é¡ºåºæ’­æ”¾',\r\n                'repeat-one': 'å•æ›²å¾ªç¯',\r\n                'shuffle': 'éšæœºæ’­æ”¾',\r\n                'selected-sequence': 'é€‰å®šæ’­æ”¾'\r\n            };\r\n\r\n            function updatePlaybackModeButton() {\r\n                playbackModeButton.textContent = playbackModeTexts[playbackMode];\r\n            }\r\n\r\n            function handlePlaySelected() {\r\n                if (currentSelectedPlaylist.length > 0) {\r\n                    playbackMode = 'selected-sequence';\r\n                    updatePlaybackModeButton();\r\n                    currentSelectedSongIndex = 0;\r\n                    loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex], true);\r\n                } else {\r\n                    alert(\"è¯·è‡³å°‘é€‰æ‹©ä¸€é¦–æ­Œæ›²ã€‚\");\r\n                }\r\n            }\r\n\r\n            function handleClearSelection() {\r\n                currentSelectedPlaylist = [];\r\n                const selectorIcons = playlistElement.querySelectorAll('.song-selector-icon');\r\n                selectorIcons.forEach(icon => icon.classList.remove('selected'));\r\n                if (playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    updatePlaybackModeButton();\r\n                    loadSong(currentSongIndex, false);\r\n                }\r\n            }\r\n\r\n            // å°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šç§»åˆ°å‡½æ•°å¤–éƒ¨æˆ–ç¡®ä¿åœ¨DOMå°±ç»ªåç»‘å®šä¸€æ¬¡\r\n             if(playSelectedButton) playSelectedButton.addEventListener('click', handlePlaySelected);\r\n             if(clearSelectionButton) clearSelectionButton.addEventListener('click', handleClearSelection);\r\n\r\n\r\n            playbackModeButton.addEventListener('click', () => {\r\n                if (playbackMode === 'sequence') playbackMode = 'repeat-one';\r\n                else if (playbackMode === 'repeat-one') playbackMode = 'shuffle';\r\n                else if (playbackMode === 'shuffle' || playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    if (currentSelectedPlaylist.length > 0) { // ä»é€‰å®šæ’­æ”¾åˆ‡èµ°æ—¶ï¼Œæ¸…ç©ºé€‰æ‹©\r\n                        handleClearSelection(); // ä½¿ç”¨å°è£…çš„å‡½æ•°\r\n                    }\r\n                }\r\n                updatePlaybackModeButton();\r\n                audioPlayer.loop = (playbackMode === 'repeat-one');\r\n                if (playbackMode !== 'selected-sequence') {\r\n                     // ç¡®ä¿åœ¨éé€‰å®šæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼ŒåŠ è½½æ­£ç¡®çš„æ­Œæ›²\r\n                    if (songs.length > 0) loadSong(currentSongIndex, audioPlayer.paused);\r\n                }\r\n            });\r\n\r\n\r\n            function loadSong(songIndex, isAutoPlay = true) {\r\n                if (songIndex < 0 || songIndex >= songs.length) {\r\n                    console.warn(\"loadSong: æ— æ•ˆçš„æ­Œæ›²ç´¢å¼•æˆ–æ’­æ”¾åˆ—è¡¨ä¸ºç©º\", songIndex);\r\n                    return;\r\n                }\r\n                loadSongData(songs[songIndex], isAutoPlay);\r\n                currentSongIndex = songIndex;\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongFromPlaylist(songData, isAutoPlay = true) {\r\n                if (!songData) {\r\n                     console.warn(\"loadSongFromPlaylist: æ— æ•ˆçš„æ­Œæ›²æ•°æ®\");\r\n                    return;\r\n                }\r\n                loadSongData(songData, isAutoPlay);\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongData(song, isAutoPlay = true) {\r\n                if (!song) {\r\n                    console.error(\"loadSongData: æ­Œæ›²æ•°æ®ä¸ºç©º!\");\r\n                    currentSongTitleElement.textContent = \"é”™è¯¯ï¼šæ­Œæ›²æ•°æ®ä¸¢å¤±\";\r\n                    currentSongArtistElement.textContent = \"\";\r\n                    return;\r\n                }\r\n                currentSongTitleElement.textContent = song.title;\r\n                currentSongArtistElement.textContent = song.artist; // åŠ¨æ€æ›´æ–°æ­Œæ›²ä¿¡æ¯\r\n                audioPlayer.innerHTML = '';\r\n                const source = document.createElement('source');\r\n                source.src = song.src;\r\n                source.type = song.src.endsWith('.ogg') ? 'audio/ogg' : 'audio/mpeg';\r\n                audioPlayer.appendChild(source);\r\n                audioPlayer.load();\r\n                if (isAutoPlay) {\r\n                    stopOtherApexPlayers();\r\n                    audioPlayer.play().catch(e => console.error('Autoplay failed:', e, song.title));\r\n                }\r\n                audioPlayer.loop = (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0);\r\n                updateButtonStates();\r\n            }\r\n\r\n            audioPlayer.addEventListener('play', () => {\r\n                if (document.visibilityState === 'visible') stopOtherApexPlayers();\r\n            });\r\n\r\n            function playNextSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let nextIndex;\r\n                    if (songs.length <= 1) nextIndex = 0;\r\n                    else do { nextIndex = Math.floor(Math.random() * songs.length); } while (nextIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = nextIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex + 1) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function playPrevSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let prevIndex;\r\n                    if (songs.length <= 1) prevIndex = 0;\r\n                    else do { prevIndex = Math.floor(Math.random() * songs.length); } while (prevIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = prevIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex - 1 + targetPlaylist.length) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updatePlaylistUI() {\r\n                const actionsDiv = playlistElement.querySelector('.playlist-actions');\r\n                // åœ¨æ¸…ç©ºåˆ—è¡¨å‰ï¼Œå¦‚æœactionsDivå­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶ä»DOMä¸­ç§»é™¤ï¼Œç¨åå†æ·»åŠ å›å»\r\n                // è¿™æ ·å¯ä»¥é¿å…å®ƒè¢«innerHTML=''æ¸…é™¤æ‰ï¼ŒåŒæ—¶ç¡®ä¿å®ƒå§‹ç»ˆåœ¨åˆ—è¡¨é¡¹ä¹‹å\r\n                if (actionsDiv) actionsDiv.remove();\r\n\r\n\r\n                const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µä¼˜åŒ–æ€§èƒ½\r\n\r\n                songs.forEach((song, index) => {\r\n                    const listItem = document.createElement('li');\r\n\r\n                    const selectorIcon = document.createElement('span');\r\n                    selectorIcon.classList.add('song-selector-icon');\r\n                    selectorIcon.dataset.songId = song.id;\r\n                    if (currentSelectedPlaylist.some(s => s.id === song.id)) {\r\n                        selectorIcon.classList.add('selected');\r\n                    }\r\n                    selectorIcon.addEventListener('click', (e) => {\r\n                        e.stopPropagation();\r\n                        const songId = parseInt(selectorIcon.dataset.songId);\r\n                        const targetSong = songs.find(s => s.id === songId);\r\n                        const selectedIndex = currentSelectedPlaylist.findIndex(s => s.id === songId);\r\n\r\n                        if (selectedIndex > -1) {\r\n                            currentSelectedPlaylist.splice(selectedIndex, 1);\r\n                            selectorIcon.classList.remove('selected');\r\n                        } else {\r\n                            currentSelectedPlaylist.push(targetSong);\r\n                            selectorIcon.classList.add('selected');\r\n                        }\r\n                    });\r\n\r\n                    const songInfoDiv = document.createElement('div');\r\n                    songInfoDiv.classList.add('song-info');\r\n                    songInfoDiv.textContent = `${song.title} - ${song.artist}`; // ç¡®ä¿åˆ—è¡¨é¡¹ä¹Ÿæ˜¾ç¤ºartist\r\n                    songInfoDiv.addEventListener('click', () => {\r\n                        currentSongIndex = index;\r\n                        loadSong(currentSongIndex);\r\n                        if (playbackMode === 'selected-sequence') {\r\n                            playbackMode = 'sequence';\r\n                            updatePlaybackModeButton();\r\n                        }\r\n                    });\r\n\r\n                    listItem.appendChild(selectorIcon);\r\n                    listItem.appendChild(songInfoDiv);\r\n\r\n                    let isCurrentlyPlayingThisSong = false;\r\n                    const currentPlayingSong = (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length > 0) ? currentSelectedPlaylist[currentSelectedSongIndex] : songs[currentSongIndex];\r\n\r\n                    if (currentPlayingSong && currentPlayingSong.id === song.id) {\r\n                         isCurrentlyPlayingThisSong = true;\r\n                    }\r\n\r\n                    if (isCurrentlyPlayingThisSong) {\r\n                        listItem.classList.add('active');\r\n                    }\r\n                    fragment.appendChild(listItem);\r\n                });\r\n                playlistElement.innerHTML = ''; // æ¸…ç©ºæ—§çš„åˆ—è¡¨é¡¹\r\n                playlistElement.appendChild(fragment); // æ·»åŠ æ–°çš„åˆ—è¡¨é¡¹\r\n                if (actionsDiv) playlistElement.appendChild(actionsDiv); // å°†æŒ‰é’®åŒºåŸŸé‡æ–°åŠ åˆ°åˆ—è¡¨æœ«å°¾\r\n            }\r\n\r\n\r\n            function updateButtonStates() {\r\n                const targetPlaylist = playbackMode === 'selected-sequence' ? currentSelectedPlaylist : songs;\r\n                prevButton.disabled = targetPlaylist.length <= 1;\r\n                nextButton.disabled = targetPlaylist.length <= 1;\r\n            }\r\n\r\n            playlistToggle.addEventListener('click', () => {\r\n                playlistElement.classList.toggle('collapsed');\r\n                playlistToggle.classList.toggle('collapsed');\r\n                playlistTitleSpan.textContent = playlistElement.classList.contains('collapsed') ? ' â–º' : ' â–¼';\r\n            });\r\n\r\n            audioPlayer.addEventListener('ended', function() {\r\n                if (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0) {\r\n                    // loop\r\n                } else if (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length === 1) {\r\n                     loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex]);\r\n                }\r\n                else {\r\n                    playNextSongLogic();\r\n                }\r\n            });\r\n\r\n            if (songs.length > 0) {\r\n                songs.forEach((song, index) => song.id = index);\r\n                loadSong(currentSongIndex, false);\r\n                updatePlaybackModeButton();\r\n                playlistElement.classList.add('collapsed');\r\n                playlistToggle.classList.add('collapsed');\r\n                playlistTitleSpan.textContent = ' â–º';\r\n            } else {\r\n                currentSongTitleElement.textContent = \"æ’­æ”¾åˆ—è¡¨ä¸ºç©º\";\r\n                currentSongArtistElement.textContent = \"\";\r\n                audioPlayer.style.display = 'none';\r\n                document.querySelector('.playing-animation').style.display = 'none';\r\n                playlistToggle.style.display = 'none';\r\n                playbackModeButton.style.display = 'none';\r\n                if(playSelectedButton) playSelectedButton.style.display = 'none';\r\n                if(clearSelectionButton) clearSelectionButton.style.display = 'none';\r\n            }\r\n\r\n            prevButton.addEventListener('click', playPrevSongLogic);\r\n            nextButton.addEventListener('click', playNextSongLogic);\r\n\r\n            if ('IntersectionObserver' in window && thisPlayerElement) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && audioPlayer.paused && songs.length > 0) { /* Optional */ }\r\n                    });\r\n                });\r\n                observer.observe(thisPlayerElement);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n```\r\n\r\né‡‘è‰²çš„é›¨ä»ä½“è‚²é¦†ç©¹é¡¶çº·çº·æ‰¬æ‰¬åœ°è½ä¸‹ï¼Œæ˜¯ç¢çº¸ï¼Œæ˜¯ç®”ç‰‡ï¼Œæ˜¯èƒœåˆ©è€…åº”å¾—çš„æ¼«å¤©è£å…‰ã€‚éœ‡è€³æ¬²è‹çš„æ¬¢å‘¼å£°åƒæµ·å•¸ï¼Œæ‹æ‰“ç€è€³è†œï¼Œæ•´ä¸ªä¸–ç•Œéƒ½åœ¨ä¸ºæ–°ç‹åŠ å†•è€Œç–¯ç‹‚ã€‚\r\n \r\nâ€œå† å†›ï¼æˆ‘ä»¬æ˜¯å† å†›ï¼ï¼â€\r\nèº«æ—çš„é˜Ÿå‹æ¿€åŠ¨å¾—å‡ ä¹è·³èµ·æ¥ï¼Œä¸€æŠŠå‹’ä½è°¢æ˜æœçš„è„–å­ï¼Œç”¨åŠ›æ‘‡æ™ƒç€ï¼Œæ»šçƒ«çš„æ±—æ°´å’Œä¸çŸ¥é“æ˜¯è°çš„æ³ªæ°´æº…åœ¨ä»–å†°å‡‰çš„ä¾§è„¸ä¸Šã€‚â€œæœå“¥ï¼ä½ å¬è§æ²¡ï¼æˆ‘ä»¬åšåˆ°äº†ï¼â€\r\n \r\nä»–å¬è§äº†ã€‚\r\n\r\næ¯ä¸€ä¸ªåˆ†è´çš„å™ªéŸ³éƒ½åƒé’»å¤´ï¼Œç²¾å‡†åœ°é’»è¿›ä»–çš„ç¥ç»ï¼Œä½†ä»–æ„Ÿè§‰ä¸åˆ°ä¸æ¯«å–œæ‚¦ã€‚èº«ä½“é‡Œåƒæ˜¯è¢«æç©ºäº†ï¼Œå¡æ»¡äº†å¹²ç‡¥çš„ã€å†°å†·çš„æ£‰çµ®ã€‚ä»–åªæ˜¯ç«™åœ¨é‚£é‡Œï¼Œä»»ç”±é˜Ÿå‹ä»¬åƒç–¯äº†ä¸€æ ·å°†å·¨å¤§çš„å¥–æ¯å¡è¿›ä»–æ€€é‡Œã€‚é‡‘å±çš„è¾¹ç¼˜ç¡Œç€æ‰‹è‡‚ï¼Œä¼ æ¥ä¸€ç‰‡æ­»å¯‚çš„å‡‰æ„ã€‚\r\n \r\nä¸‰å¹´å‰ï¼Œä¹Ÿæ˜¯è¿™æ ·çš„ä¸€ä¸ªå¤œæ™šï¼Œå¸¸ä¹å¤´ä¹Ÿä¸å›åœ°æ¶ˆå¤±ã€‚ä»–æ‰¾éäº†æ‰€æœ‰ä½ ä»¬å»è¿‡çš„åœ°æ–¹ï¼Œé—®éäº†æ‰€æœ‰è®¤è¯†çš„äººï¼Œæœ€ååªå¾—åˆ°ä¸€ç‰‡æ— å£°çš„å›åº”ã€‚\r\n\r\nä¸–ç•Œåœ¨é‚£ä¸€åˆ»å°±å¯¹ä»–é™éŸ³äº†ã€‚\r\nä»é‚£ä»¥åï¼Œä»–å°±ä¹ æƒ¯äº†è¿™ç§å–§åš£é‡Œçš„å¯‚é™ã€‚\r\n \r\nä¸»æŒäººæ¿€æ˜‚çš„å£°éŸ³é€šè¿‡éº¦å…‹é£ä¼ éå…¨åœºï¼šâ€œè®©æˆ‘ä»¬å†æ¬¡æ­å–œâ€˜æ·±æ¸Šâ€™æˆ˜é˜Ÿï¼ç‰¹åˆ«æ˜¯æˆ‘ä»¬çš„MVPé€‰æ‰‹ï¼ŒSinnerï¼æ—¶éš”ä¸‰å¹´é‡è¿”èµ›åœºï¼Œä¸€è·¯æŠ«è†æ–©æ£˜ï¼ŒSinnerï¼Œæ­¤åˆ»ä½ æœ‰ä»€ä¹ˆæƒ³å¯¹æ”¯æŒä½ çš„ç²‰ä¸ä»¬è¯´çš„å—ï¼Ÿâ€\r\n\r\nèšå…‰ç¯çŒ›åœ°æ‰“åœ¨ä»–è„¸ä¸Šï¼Œåˆºå¾—äººçä¸å¼€çœ¼ã€‚\r\n \r\nè°¢æ˜æœæ²¡ä»€ä¹ˆè¡¨æƒ…åœ°æŠ¬èµ·å¤´ï¼Œç›®å…‰è¶Šè¿‡é•œå¤´ï¼Œè¶Šè¿‡æŒ¥èˆçš„è§å…‰æ£’å’Œç¯ç‰Œï¼Œæ— æ„è¯†åœ°æ‰«å‘å°ä¸‹çš„äººæµ·ã€‚ä»–æœ¬è¯¥å¯¹ç€é•œå¤´è¯´å‡ å¥åœºé¢è¯ï¼Œæˆ–è€…æŒ‰ç…§ä»–ç°åœ¨çš„é£æ ¼ï¼Œç”¨å‡ å¥å˜²è®½æŠŠæ°”æ°›æå¾—åˆå†·åˆçƒ­ã€‚\r\n \r\nå¯ä»–çš„è§†çº¿ï¼Œå°±åœ¨é‚£ä¸€åˆ»å‡å›ºäº†ã€‚\r\nåƒè¢«ä¸€åªæ— å½¢çš„æ‰‹æ‰¼ä½äº†å¿ƒè„ã€‚\r\n \r\nå°ä¸‹ç¬¬ä¸€æ’ï¼Œé‚£ä¸ªç¦»ä»–æœ€è¿‘ï¼Œä¹Ÿæœ€é¥è¿œçš„ä½ç½®ã€‚\r\nä½ ååœ¨é‚£é‡Œã€‚\r\n \r\næ—¶é—´ä»¿ä½›è¢«æ‹‰æˆä¸€æ¡æ— é™å»¶ä¼¸çš„ä¸çº¿ï¼Œå‘¨å›´é¼æ²¸çš„äººå£°ã€é˜Ÿå‹çš„ç‹‚å–œã€åˆºç›®çš„ç¯å…‰ï¼Œéƒ½åœ¨ä¸€ç¬é—´è¤ªå»é¢œè‰²ï¼Œå˜æˆæ¨¡ç³Šä¸æ¸…çš„ç°è‰²èƒŒæ™¯æ¿ã€‚æ•´ä¸ªä¸–ç•Œï¼Œåªå‰©ä¸‹é‚£ä¸€æŸè¿½å…‰ï¼Œç²¾å‡†åœ°ã€æ®‹å¿åœ°æ‰“åœ¨ä½ èº«ä¸Šã€‚\r\n \r\nå¸¸ä¹ç©¿ç€ä¸€ä»¶ç´ å‡€çš„è£™å­ï¼Œå‘å°¾ç¨ç¨é•¿äº†äº›ï¼ŒæŸ”é¡ºåœ°å‚åœ¨è€³ä¾§ã€‚å¸¸ä¹æ­£ä¾§ç€å¤´ï¼Œå’Œèº«è¾¹çš„ç”·äººè¯´è¯ã€‚ç¬‘èµ·æ¥çš„æ—¶å€™ï¼Œå˜´è§’çš„å¼§åº¦å’Œä¸‰å¹´å‰ä¸€æ¨¡ä¸€æ ·ã€‚\r\n \r\né‚£ä¸ªç”·äººæ˜¯è°ã€‚æœ‹å‹ï¼Ÿå¼Ÿå¼Ÿï¼Ÿè¿˜æ˜¯â€¦\r\nä»–ä¸æ•¢æƒ³é‚£ä¿©ä¸ªå­—ã€‚\r\n\r\né‚£ä¸ªç”·äººç©¿ç€å¾—ä½“çš„è¡¬è¡«ï¼Œä¾§è„¸çš„çº¿æ¡å¾ˆæ¸©å’Œã€‚ä»–å‡‘è¿‘äº†å¬ä½ è¯´è¯ï¼Œçœ¼ç¥ä¸“æ³¨è€Œæ¸©æŸ”ã€‚ä½ ä¸çŸ¥é“è¯´äº†ä»€ä¹ˆå¥½ç¬‘çš„äº‹æƒ…ï¼Œè‡ªå·±å…ˆç¬‘å¾—è‚©è†€å¾®å¾®å‘æŠ–ï¼Œè¿˜æŠ¬æ‰‹è½»è½»æ¨äº†ä¸€ä¸‹ä»–çš„æ‰‹è‡‚ã€‚\r\nä¸€ä¸ªå†å¯»å¸¸ä¸è¿‡çš„äº²æ˜µåŠ¨ä½œã€‚\r\n\r\nè½åœ¨è°¢æ˜æœçœ¼é‡Œï¼Œå´åƒä¸€åœºæ— å£°çš„å‡Œè¿Ÿã€‚\r\n \r\nâ€œæœå“¥ï¼ŸSinnerï¼Ÿâ€ é˜Ÿå‹åœ¨æ—è¾¹è½»è½»æ¨äº†ä»–ä¸€ä¸‹ï¼Œå‹ä½å£°éŸ³æé†’ï¼Œâ€œä¸»æŒäººé—®ä½ è¯å‘¢ã€‚â€\r\nè°¢æ˜æœçš„å˜´å”‡åŠ¨äº†åŠ¨ï¼Œå´å‘ä¸å‡ºä»»ä½•å£°éŸ³ã€‚å–‰å’™é‡Œåƒæ˜¯è¢«çŒæ»¡äº†é“…ï¼Œæ¯ä¸€ä¸ªå­—éƒ½æ²‰é‡å¾—æ— æ³•ä¸Šæµ®ã€‚ä»–æ¡ç€å¥–æ¯çš„æ‰‹æŒ‡æ— æ„è¯†åœ°æ”¶ç´§ï¼ŒæŒ‡èŠ‚å› ä¸ºç”¨åŠ›è€Œæ³›å‡ºé’ç™½è‰²ï¼Œå†°å†·çš„é‡‘å±å‡ ä¹è¦åµŒè¿›çš®è‚‰é‡Œã€‚\r\n \r\nä»–æƒ³ï¼Œè¿™ä¸‰å¹´ä»–åˆ°åº•åœ¨å¹²ä»€ä¹ˆï¼Ÿä¸ºäº†ä»€ä¹ˆï¼Ÿ\r\n\r\næ²¡æ—¥æ²¡å¤œçš„è®­ç»ƒï¼ŒæŠŠæ‰€æœ‰ç²¾åŠ›éƒ½è€—å°½åœ¨ä¸€æ–¹å°å°çš„å±å¹•é‡Œã€‚ä»–ä»¥ä¸ºåªè¦ç«™åˆ°æœ€é«˜çš„åœ°æ–¹ï¼Œç«™åˆ°æœ€äº®çš„å…‰çº¿ä¸‹ï¼Œä½ æ€»æœ‰ä¸€å¤©ä¼šçœ‹è§ä»–ã€‚\r\n\r\nç°åœ¨ä½ çœ‹è§äº†ã€‚\r\nå¯ä½ èº«è¾¹ï¼Œå·²ç»æœ‰äº†åˆ«äººã€‚\r\n  \r\né‚£å¤©ä½ èµ°çš„æ—¶å€™ï¼Œå¤©æ°”å¾ˆå¥½ã€‚å¥½åˆ°æˆ‘è§‰å¾—è™šå‡ã€‚æˆ‘åªæ˜¯å‡ºé—¨ç»™ä½ ä¹°äº†ï¼Œä½ æœ€çˆ±åƒçš„é‚£å®¶è›‹ç³•ï¼Œå›æ¥çš„æ—¶å€™ï¼Œæˆ¿é—´å°±ç©ºäº†ã€‚æ²¡æœ‰äº‰åµï¼Œæ²¡æœ‰å‘Šåˆ«ï¼Œç”šè‡³æ²¡æœ‰ä¸€å¼ å­—æ¡ã€‚ä½ å°±è¿™ä¹ˆæ¶ˆå¤±äº†ï¼Œå¸¦èµ°äº†å±‹å­é‡Œæ‰€æœ‰çš„é˜³å…‰å’Œå£°éŸ³ã€‚\r\n\r\næˆ‘æ‰¾è¿‡ä½ ã€‚\r\n\r\næˆ‘å»äº†ä½ çš„å­¦æ ¡ï¼Œä½ çš„å®¶ï¼Œæ‰€æœ‰æˆ‘ä»¬ä¸€èµ·å»è¿‡çš„åœ°æ–¹ã€‚æˆ‘åƒä¸ªç–¯å­ä¸€æ ·ï¼Œä¸€éåˆä¸€éåœ°æ‹¨æ‰“é‚£ä¸ªå·²ç»å…³æœºçš„å·ç ã€‚ä½ æ¯äº²è¯´ä½ å‡ºå›½äº†ï¼Œè®©æˆ‘åˆ«å†ç­‰äº†ã€‚\r\n\r\næˆ‘åä¸ã€‚\r\n \r\næˆ‘å¼€å§‹æ‰“èŒä¸šï¼Œå› ä¸ºè¿™æ˜¯æˆ‘å”¯ä¸€èƒ½æƒ³åˆ°çš„ï¼Œèƒ½è®©ä½ åœ¨ä¸–ç•Œçš„ä»»ä½•ä¸€ä¸ªè§’è½ï¼Œéƒ½èƒ½çœ‹åˆ°æˆ‘çš„æ–¹å¼ã€‚åªè¦æˆ‘å¤Ÿå‡ºåï¼Œå¤Ÿè€€çœ¼ï¼Œç«™åœ¨æœ€é«˜çš„èˆå°ä¸Šï¼Œä½ æ€»ä¼šçœ‹åˆ°çš„ï¼Œå¯¹ä¸å¯¹ï¼Ÿä½ ä¼šä¸ä¼šå¶å°”åœ¨æ–°é—»ä¸Šçœ‹åˆ°ä¸€ä¸ªå«Wingçš„å®¶ä¼™ï¼Œç„¶åæ„£ä¸€ä¸‹ï¼Œæƒ³èµ·å¾ˆå¤šå¹´å‰ï¼Œä¹Ÿæœ‰ä¸ªå°‘å¹´åœ¨æ¸¸æˆé‡Œä¸ºä½ å¤§æ€å››æ–¹ï¼Œåªä¸ºé€—ä½ ä¸€ç¬‘ï¼Ÿ\r\n\r\nåæ¥æˆ‘æŠŠIDæ”¹æˆäº†Sinnerï¼ˆç½ªäººï¼‰ã€‚\r\n\r\næˆ‘æƒ³ï¼Œæˆ‘ä¸€å®šæ˜¯æœ‰ç½ªçš„ã€‚æ˜¯æˆ‘å“ªé‡Œåšå¾—ä¸å¥½ï¼Œæ‰è®©ä½ é‚£æ ·å†³ç»åœ°ç¦»å¼€ï¼Ÿæ˜¯æˆ‘æ€»æ²‰è¿·æ¸¸æˆå¿½ç•¥äº†ä½ ï¼Œè¿˜æ˜¯æˆ‘è¯´äº†ä»€ä¹ˆä¼¤äººçš„è¯è‡ªå·±å´å¿˜äº†ï¼Ÿ\r\n \r\nâ€œSinneré€‰æ‰‹ï¼Ÿâ€ä¸»æŒäººçš„å£°éŸ³å¸¦ç€ä¸€ä¸å›°æƒ‘ï¼Œå†æ¬¡å“èµ·ï¼Œâ€œæ˜¯å¤ªæ¿€åŠ¨äº†å—ï¼Ÿâ€\r\nâ€œâ€¦å—¯ã€‚â€\r\nä¸€ä¸ªæ²™å“‘çš„ã€å‡ ä¹å¬ä¸è§çš„éŸ³èŠ‚ä»ä»–å–‰å’™é‡ŒæŒ¤å‡ºæ¥ã€‚ä»–ç»ˆäºåŠ¨äº†ï¼Œå´åªæ˜¯æŠŠè§†çº¿ä»ä½ èº«ä¸Šæ’•ä¸‹æ¥ï¼Œå‚ä¸‹çœ¼ï¼Œç›¯ç€æ€€é‡Œé‚£åº§æ²‰é‡å¾—å¯ç¬‘çš„å¥–æ¯ã€‚ä¸Šé¢æ˜ å‡ºä»–è‡ªå·±æ¨¡ç³Šè€Œé™Œç”Ÿçš„è„¸ï¼Œè‹ç™½ï¼Œé˜´éƒï¼Œçœ¼åº•ç¿»æ»šç€è¿ä»–è‡ªå·±éƒ½å®³æ€•çš„æƒ…ç»ªã€‚\r\n \r\né˜Ÿå‹çœ‹ä»–çŠ¶æ€ä¸å¯¹ï¼Œèµ¶ç´§æ¥è¯æ‰“åœ†åœºï¼šâ€œä»–â€¦â€¦ä»–å°±æ˜¯å¤ªç´¯äº†ï¼è¿™é˜µå­ä¸ºäº†æ¯”èµ›ï¼Œæˆ‘ä»¬é˜Ÿé•¿éƒ½æ²¡æ€ä¹ˆåˆè¿‡çœ¼ï¼æ˜¯å§é˜Ÿé•¿ï¼Ÿâ€\r\n\r\nä»–æ²¡ç†ã€‚\r\nä»–çš„ä¸–ç•Œé‡Œåªå‰©ä¸‹ä½ å’Œé‚£ä¸ªç”·äººç›¸è§†è€Œç¬‘çš„ç”»é¢ï¼Œå¾ªç¯å¾€å¤ï¼Œåƒä¸€æŠŠé’åˆ€ï¼Œä¸€ééå‰²ç€ä»–çš„ç¥ç»ã€‚\r\n\r\nåŸæ¥äººçœŸçš„ä¸ä¼šå› ä¸ºå¿ƒç¢è€Œæ­»ã€‚åªä¼šå˜å¾—æ›´éº»æœ¨ï¼Œæˆ–è€…ï¼Œæ›´ç–¯ç‹‚ã€‚\r\n \r\nä»–ä»¬è¯´ä¸‹ä¸€åœºæ¯”èµ›å¾ˆé‡è¦ï¼Œèµ¢äº†ï¼Œå°±èƒ½ç¦»ä¸–ç•Œå† å†›æ›´è¿‘ä¸€æ­¥ã€‚\r\né‚£ä½ ï¼Œä¼šä¸ä¼šä¹Ÿç¦»æˆ‘æ›´è¿‘ä¸€æ­¥ï¼Ÿ\r\n \r\nä»–å¿½ç„¶å¾ˆè½»åœ°ç¬‘äº†ä¸€ä¸‹ã€‚\r\né‚£ç¬‘å£°å¾ˆä½ï¼Œç”šè‡³è¢«æ·¹æ²¡åœ¨ç°åœºçš„å˜ˆæ‚é‡Œï¼Œä½†ç«™åœ¨ä»–èº«è¾¹çš„é˜Ÿå‹å´å¬è§äº†ï¼Œç„¶åæ§åˆ¶ä¸ä½åœ°æ‰“äº†ä¸ªå¯’é¢¤ã€‚é‚£ä¸æ˜¯å–œæ‚¦çš„ç¬‘ï¼Œä¹Ÿä¸æ˜¯å˜²è®½çš„ç¬‘ã€‚é‚£æ˜¯ä¸€ç§â€¦â€¦æ¿’ä¸´å´©åçš„ã€å±é™©çš„å£°éŸ³ã€‚\r\n \r\nä¸»æŒäººè¿˜åœ¨åŠªåŠ›æš–åœºï¼Œå‡†å¤‡è¿›è¡Œä¸‹ä¸€ä¸ªç¯èŠ‚ã€‚\r\nè°¢æ˜æœå´åœ¨æ‰€æœ‰äººçš„æ³¨è§†ä¸‹ï¼Œçªç„¶æ¾å¼€äº†æ‰‹ã€‚\r\né‚£åº§è±¡å¾ç€æ— ä¸Šè£è€€çš„å† å†›å¥–æ¯ï¼Œè¢«ä»–é¢æ— è¡¨æƒ…åœ°ã€éšæ‰‹å¡è¿›äº†æ—è¾¹é˜Ÿå‹æªæ‰‹ä¸åŠçš„æ€€é‡Œã€‚\r\nâ€œæ‹¿ç€ã€‚â€\r\nä»–çš„å£°éŸ³ä¸å¤§ï¼Œå´åƒå†°å—ç ¸åœ¨åœ°æ¿ä¸Šï¼Œæ¸…æ™°æ— æ¯”ã€‚\r\n \r\nç„¶åï¼Œåœ¨å…¨åœºæ•°ä¸‡äººçš„æƒŠæ„•æ³¨è§†ä¸‹ï¼Œåœ¨ç›´æ’­é•œå¤´å¿ å®çš„è®°å½•ä¸­ã€‚ä»–è½¬è¿‡èº«ï¼Œæ²¡æœ‰ä¸æ¯«ç•™æ‹ï¼Œå¾„ç›´èµ°ä¸‹é‚£åº§ä¸ºä»–é“ºæ»¡è£å…‰ä¸é²œèŠ±çš„é¢å¥–å°ã€‚\r\n\r\næ¯ä¸€æ­¥ï¼Œéƒ½è¸©ç¢äº†é‚£äº›é‡‘è‰²çš„é›¨ã€‚\r\nç›®æ ‡æ˜ç¡®ï¼Œæ–¹å‘å”¯ä¸€ã€‚\r\næœä½ èµ°å»ã€‚","```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ç°ç™½é…ç”µè„‘æœ€é€‚é…ç‰ˆæœ¬</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Microsoft YaHei', sans-serif;\r\n        }\r\n        .cassette-wrapper {\r\n            position: relative;\r\n            width: 95%;\r\n            max-width: 450px;\r\n            margin: 20px auto;\r\n            box-sizing: border-box;\r\n        }\r\n        .cassette-container {\r\n            background: linear-gradient(to right, #e0e0e0, #cccccc);\r\n            padding: 15px;\r\n            border-radius: 25px;\r\n            box-shadow:\r\n                0 4px 16px rgba(0,0,0,0.15),\r\n                0 0 0 4px #fff,\r\n                0 0 0 8px #a0a0a0;\r\n            box-sizing: border-box;\r\n            padding-top: 70px;\r\n            padding-bottom: 20px;\r\n            position: relative;\r\n        }\r\n        .avatar {\r\n            position: absolute;\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: 50%;\r\n            border: 2px solid #fff;\r\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\r\n            z-index: 1;\r\n            background-color: #f0f0f0;\r\n            object-fit: cover;\r\n            top: 15px;\r\n        }\r\n        .avatar.user {\r\n            right: 45px;\r\n        }\r\n        .avatar.char {\r\n            left: 45px;\r\n        }\r\n        .distance-text {\r\n            position: absolute;\r\n            top: 30px;\r\n            left: 0;\r\n            right: 0;\r\n            text-align: center;\r\n            font-size: 13px;\r\n            color: #555555;\r\n            z-index: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        h1 {\r\n            color: #333333;\r\n            font-size: 18px;\r\n            margin: 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            margin-bottom: 12px;\r\n        }\r\n        .music-info {\r\n            font-size: 14px;\r\n            color: #666666;\r\n            margin: 10px 0;\r\n            text-align: center;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        audio {\r\n            width: 100%;\r\n            margin-top: 10px;\r\n            border-radius: 20px;\r\n            box-sizing: border-box;\r\n            height: 45px;\r\n        }\r\n        audio::-webkit-media-controls-panel {\r\n            background: linear-gradient(to right, #bbbbbb, #999999);\r\n        }\r\n        .playing-animation {\r\n            height: 2px;\r\n            background: linear-gradient(90deg,\r\n                #777777 25%, transparent 25%,\r\n                transparent 50%, #777777 50%,\r\n                #777777 75%, transparent 75%,\r\n                transparent 100%);\r\n            background-size: 20px 100%;\r\n            animation: move 1s linear infinite;\r\n            margin: 10px 0;\r\n        }\r\n        @keyframes move {\r\n            from { background-position: 0 0; }\r\n            to { background-position: 20px 0; }\r\n        }\r\n\r\n        .playlist-container {\r\n            margin-top: 20px;\r\n            background-color: #f0f0f0;\r\n            border-radius: 15px;\r\n            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);\r\n        }\r\n        .playlist-title {\r\n            font-size: 15px;\r\n            color: #444;\r\n            padding: 10px;\r\n            margin: 0;\r\n            text-align: center;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            border-bottom: 1px solid #ddd;\r\n            border-radius: 15px 15px 0 0;\r\n        }\r\n        .playlist-title.collapsed + .playlist {\r\n             max-height: 0;\r\n             padding-top: 0;\r\n             padding-bottom: 0;\r\n             overflow: hidden;\r\n             border-top: none;\r\n        }\r\n         .playlist-title.collapsed {\r\n            border-radius: 15px;\r\n            border-bottom: none;\r\n        }\r\n\r\n        .playlist {\r\n            list-style: none;\r\n            padding: 0;\r\n            margin: 0;\r\n            max-height: 180px;\r\n            overflow-y: auto;\r\n            transition: max-height 0.3s ease-out, padding 0.3s ease-out;\r\n            border-top: 1px solid #ddd;\r\n            border-radius: 0 0 15px 15px;\r\n        }\r\n        .playlist li {\r\n            padding: 8px 12px;\r\n            font-size: 13px;\r\n            color: #555;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.2s ease;\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        .song-selector-icon {\r\n            width: 20px;\r\n            height: 20px;\r\n            margin-right: 10px;\r\n            border: 1px solid #aaa;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: contain;\r\n            flex-shrink: 0;\r\n        }\r\n        .song-selector-icon.selected {\r\n            background-image: url('https://files.catbox.moe/8e819d.png');\r\n            border-color: transparent;\r\n        }\r\n        .song-info {\r\n            flex-grow: 1;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .playlist li:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n        .playlist li.active .song-info {\r\n            /* background-color: #cccccc; */ /* å†³å®šé«˜äº®æ–¹å¼ */\r\n            color: #222;\r\n            font-weight: bold;\r\n        }\r\n        .playlist li.active .song-selector-icon {\r\n             /* é€‰ä¸­ä¸”æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²çš„é€‰æ‹©å™¨å›¾æ ‡å¯ä»¥æœ‰ç‰¹æ®Šæ ·å¼ */\r\n        }\r\n\r\n        .playlist-actions {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 10px 0;\r\n            background-color: #f0f0f0;\r\n            border-top: 1px solid #ddd;\r\n        }\r\n        .playlist-actions button {\r\n            background-color: #888888;\r\n            color: white;\r\n            border: none;\r\n            padding: 6px 12px;\r\n            margin: 0 8px;\r\n            border-radius: 10px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            transition: background-color 0.2s ease;\r\n        }\r\n        .playlist-actions button:hover {\r\n            background-color: #666666;\r\n        }\r\n\r\n        .controls {\r\n            text-align: center;\r\n            margin-top: 15px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n        .controls button {\r\n            background-color: #a0a0a0;\r\n            color: white;\r\n            border: none;\r\n            padding: 8px 15px;\r\n            margin: 0 5px;\r\n            border-radius: 15px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: background-color 0.2s ease;\r\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n        }\r\n        .controls button:hover {\r\n            background-color: #888888;\r\n        }\r\n        .controls button:disabled {\r\n            background-color: #d0d0d0;\r\n            cursor: not-allowed;\r\n        }\r\n        .playback-mode-button {\r\n            padding: 6px 10px !important;\r\n            font-size: 12px !important;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"cassette-wrapper\" id=\"apex-music-player\">\r\n        <img class=\"avatar user\" src=\"https://files.catbox.moe/3gok4b.png\" alt=\"User Avatar\">\r\n        <img class=\"avatar char\" src=\"https://files.catbox.moe/q3zzgb.png\" alt=\"Char Avatar\">\r\n\r\n        <div class=\"distance-text\">â€”ç›¸è·0.01kmâ€”</div>\r\n\r\n        <div class=\"cassette-container\">\r\n            <h1 id=\"current-song-title\">ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰</h1>\r\n            <div class=\"music-info\" id=\"current-song-artist\">å¦‚æœä¸€å®šè¦ç—›å‡ºç—•è¿¹æ‰ç®—çˆ±ï¼Œæˆ‘å¸Œæœ›æ˜¯ä½ çš„å»ç—•</div>\r\n            <div class=\"playing-animation\"></div>\r\n            <audio id=\"audio-player\" controls>\r\n                ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚\r\n            </audio>\r\n\r\n            <div class=\"controls\">\r\n                <button id=\"prev-button\">ä¸Šä¸€é¦–</button>\r\n                <button id=\"playback-mode-button\">é¡ºåºæ’­æ”¾</button>\r\n                <button id=\"next-button\">ä¸‹ä¸€é¦–</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"playlist-container\">\r\n            <div class=\"playlist-title\" id=\"playlist-toggle\">æ’­æ”¾åˆ—è¡¨ <span>â–¼</span></div>\r\n            <ul id=\"playlist\" class=\"playlist\">\r\n                <!-- æ­Œæ›²åˆ—è¡¨é¡¹ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->\r\n                <div class=\"playlist-actions\">\r\n                    <button id=\"play-selected-button\">æ’­æ”¾é€‰ä¸­</button>\r\n                    <button id=\"clear-selection-button\">æ¸…ç©ºé€‰æ‹©</button>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            const thisPlayerId = 'apex-music-player';\r\n            const thisPlayerElement = document.getElementById(thisPlayerId);\r\n\r\n            function stopOtherApexPlayers() {\r\n                const allAudioElements = document.querySelectorAll('audio');\r\n                allAudioElements.forEach(audio => {\r\n                    let parentPlayer = audio.closest('.cassette-wrapper');\r\n                    if (parentPlayer && parentPlayer.id !== thisPlayerId && !audio.paused) {\r\n                        audio.pause();\r\n                    }\r\n                });\r\n            }\r\n\r\n            const audioPlayer = document.getElementById('audio-player');\r\n            const playlistElement = document.getElementById('playlist');\r\n            const playSelectedButton = document.getElementById('play-selected-button'); // è·å–æŒ‰é’®\r\n            const clearSelectionButton = document.getElementById('clear-selection-button'); // è·å–æŒ‰é’®\r\n\r\n            const currentSongTitleElement = document.getElementById('current-song-title');\r\n            const currentSongArtistElement = document.getElementById('current-song-artist');\r\n            const prevButton = document.getElementById('prev-button');\r\n            const nextButton = document.getElementById('next-button');\r\n            const playlistToggle = document.getElementById('playlist-toggle');\r\n            const playlistTitleSpan = playlistToggle.querySelector('span');\r\n            const playbackModeButton = document.getElementById('playback-mode-button');\r\n\r\n            const songs = [\r\n                { id: 0, title: \"í”ì ê¸°ê´€ (ç—•è¿¹å™¨å®˜)\", artist: \"ç—•è¿¹å™¨å®˜çš„æ„æ€æ˜¯ï¼Œæˆ‘æ›´çˆ±ä½ \", src: \"https://files.catbox.moe/1ymem4.mp3\" },\r\n                { id: 1, title: \"ë‹¬ê³¼ 6íœìŠ¤ (æœˆäº®ä¸6ä¾¿å£«)\", artist: \"æˆ–è®¸ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œåªè¦ä½ ä¸é€ƒèµ°ï¼Œå‰©ä¸‹çš„éƒ½è®©æˆ‘æ¥\", src: \"https://files.catbox.moe/0fcoxb.mp3\" },\r\n                { id: 2, title: \"ë‚˜ë§Œ ë°”ë¼ë´ (Part 2)\", artist: \"æˆ‘è¯´æˆ‘çš„å¿ƒä¹Ÿå’Œæœ€åˆä¸€æ ·ï¼Œä¸ºä½ è·³åŠ¨ç€t\", src: \"https://files.catbox.moe/kcsomz.mp3\" },\r\n                { id: 3, title: \"å…³é”®è¯\", artist: \"æˆ‘ä¸å¤ªç¡®å®šï¼Œçˆ±æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯åŠ¨è¯æˆ–åè¯\", src: \"https://files.catbox.moe/51902f.mp3\" },\r\n                { id: 4, title: \"é—å¤±çš„å¿ƒè·³\", artist: \"å¿ƒç—›ç€ ä½ çš„çˆ± æ®‹é…·çš„çºªå¿µå“t\", src: \"https://files.catbox.moe/d1ph63.ogg\" },\r\n                { id: 5, title: \"å¤åˆ»å›å¿†\", artist: \"å›å¿†èƒ½å¤åˆ»ï¼Œä½ ä¼šå›åˆ°æˆ‘èº«è¾¹å—\", src: \"https://files.catbox.moe/ozgfpc.mp3\" },\r\n                { id: 6, title: \"äºæ˜¯\", artist: \"è¯´æ¥åˆè¯´å»è¿˜æ˜¯æ”¾ä¸ä¸‹ä½ \", src: \"https://files.catbox.moe/h1vey9.mp3\" },\r\n                { id: 7, title: \"è¯€åˆ«ä¹¦\", artist: \"å¦‚æœæ€»è¦åˆ†å¼€ï¼Œé‚£ç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ\", src: \"https://files.catbox.moe/l9sdul.mp3\" },\r\n                { id: 8, title: \"ä¸€ç¬‘å€¾åŸ\", artist: \"é’æ˜¥è‚†æ„é£æ‰¬ï¼Œçƒ­çˆ±ç»ä¹…ä¸æ¯\", src: \"https://files.catbox.moe/wpilgo.mp3\" },\r\n                { id: 9, title: \"ê±°ì§“ë§ï¼ˆè°è¨€ï¼‰\", artist: \"æˆ‘ä»¬ä¸ä¼šå†ç›¸é‡ï¼Œè¿™å°±æ˜¯åˆ†å¼€çš„æ„ä¹‰\", src: \"https://files.catbox.moe/f7lcuv.mp3\" }\r\n            ];\r\n\r\n            let currentSongIndex = songs.length - 1;\r\n            let currentSelectedPlaylist = [];\r\n            let currentSelectedSongIndex = 0;\r\n            let playbackMode = 'sequence';\r\n            const playbackModeTexts = {\r\n                'sequence': 'é¡ºåºæ’­æ”¾',\r\n                'repeat-one': 'å•æ›²å¾ªç¯',\r\n                'shuffle': 'éšæœºæ’­æ”¾',\r\n                'selected-sequence': 'é€‰å®šæ’­æ”¾'\r\n            };\r\n\r\n            function updatePlaybackModeButton() {\r\n                playbackModeButton.textContent = playbackModeTexts[playbackMode];\r\n            }\r\n\r\n            function handlePlaySelected() {\r\n                if (currentSelectedPlaylist.length > 0) {\r\n                    playbackMode = 'selected-sequence';\r\n                    updatePlaybackModeButton();\r\n                    currentSelectedSongIndex = 0;\r\n                    loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex], true);\r\n                } else {\r\n                    alert(\"è¯·è‡³å°‘é€‰æ‹©ä¸€é¦–æ­Œæ›²ã€‚\");\r\n                }\r\n            }\r\n\r\n            function handleClearSelection() {\r\n                currentSelectedPlaylist = [];\r\n                const selectorIcons = playlistElement.querySelectorAll('.song-selector-icon');\r\n                selectorIcons.forEach(icon => icon.classList.remove('selected'));\r\n                if (playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    updatePlaybackModeButton();\r\n                    loadSong(currentSongIndex, false);\r\n                }\r\n            }\r\n\r\n            // å°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šç§»åˆ°å‡½æ•°å¤–éƒ¨æˆ–ç¡®ä¿åœ¨DOMå°±ç»ªåç»‘å®šä¸€æ¬¡\r\n             if(playSelectedButton) playSelectedButton.addEventListener('click', handlePlaySelected);\r\n             if(clearSelectionButton) clearSelectionButton.addEventListener('click', handleClearSelection);\r\n\r\n\r\n            playbackModeButton.addEventListener('click', () => {\r\n                if (playbackMode === 'sequence') playbackMode = 'repeat-one';\r\n                else if (playbackMode === 'repeat-one') playbackMode = 'shuffle';\r\n                else if (playbackMode === 'shuffle' || playbackMode === 'selected-sequence') {\r\n                    playbackMode = 'sequence';\r\n                    if (currentSelectedPlaylist.length > 0) { // ä»é€‰å®šæ’­æ”¾åˆ‡èµ°æ—¶ï¼Œæ¸…ç©ºé€‰æ‹©\r\n                        handleClearSelection(); // ä½¿ç”¨å°è£…çš„å‡½æ•°\r\n                    }\r\n                }\r\n                updatePlaybackModeButton();\r\n                audioPlayer.loop = (playbackMode === 'repeat-one');\r\n                if (playbackMode !== 'selected-sequence') {\r\n                     // ç¡®ä¿åœ¨éé€‰å®šæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼ŒåŠ è½½æ­£ç¡®çš„æ­Œæ›²\r\n                    if (songs.length > 0) loadSong(currentSongIndex, audioPlayer.paused);\r\n                }\r\n            });\r\n\r\n\r\n            function loadSong(songIndex, isAutoPlay = true) {\r\n                if (songIndex < 0 || songIndex >= songs.length) {\r\n                    console.warn(\"loadSong: æ— æ•ˆçš„æ­Œæ›²ç´¢å¼•æˆ–æ’­æ”¾åˆ—è¡¨ä¸ºç©º\", songIndex);\r\n                    return;\r\n                }\r\n                loadSongData(songs[songIndex], isAutoPlay);\r\n                currentSongIndex = songIndex;\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongFromPlaylist(songData, isAutoPlay = true) {\r\n                if (!songData) {\r\n                     console.warn(\"loadSongFromPlaylist: æ— æ•ˆçš„æ­Œæ›²æ•°æ®\");\r\n                    return;\r\n                }\r\n                loadSongData(songData, isAutoPlay);\r\n                updatePlaylistUI();\r\n            }\r\n\r\n            function loadSongData(song, isAutoPlay = true) {\r\n                if (!song) {\r\n                    console.error(\"loadSongData: æ­Œæ›²æ•°æ®ä¸ºç©º!\");\r\n                    currentSongTitleElement.textContent = \"é”™è¯¯ï¼šæ­Œæ›²æ•°æ®ä¸¢å¤±\";\r\n                    currentSongArtistElement.textContent = \"\";\r\n                    return;\r\n                }\r\n                currentSongTitleElement.textContent = song.title;\r\n                currentSongArtistElement.textContent = song.artist; // åŠ¨æ€æ›´æ–°æ­Œæ›²ä¿¡æ¯\r\n                audioPlayer.innerHTML = '';\r\n                const source = document.createElement('source');\r\n                source.src = song.src;\r\n                source.type = song.src.endsWith('.ogg') ? 'audio/ogg' : 'audio/mpeg';\r\n                audioPlayer.appendChild(source);\r\n                audioPlayer.load();\r\n                if (isAutoPlay) {\r\n                    stopOtherApexPlayers();\r\n                    audioPlayer.play().catch(e => console.error('Autoplay failed:', e, song.title));\r\n                }\r\n                audioPlayer.loop = (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0);\r\n                updateButtonStates();\r\n            }\r\n\r\n            audioPlayer.addEventListener('play', () => {\r\n                if (document.visibilityState === 'visible') stopOtherApexPlayers();\r\n            });\r\n\r\n            function playNextSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let nextIndex;\r\n                    if (songs.length <= 1) nextIndex = 0;\r\n                    else do { nextIndex = Math.floor(Math.random() * songs.length); } while (nextIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = nextIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex + 1) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function playPrevSongLogic() {\r\n                let targetPlaylist, targetIndexKey;\r\n                if (playbackMode === 'selected-sequence') {\r\n                    targetPlaylist = currentSelectedPlaylist;\r\n                    targetIndexKey = 'currentSelectedSongIndex';\r\n                } else {\r\n                    targetPlaylist = songs;\r\n                    targetIndexKey = 'currentSongIndex';\r\n                }\r\n\r\n                if (targetPlaylist.length === 0) return;\r\n\r\n                if (playbackMode === 'shuffle' && playbackMode !== 'selected-sequence') {\r\n                    let prevIndex;\r\n                    if (songs.length <= 1) prevIndex = 0;\r\n                    else do { prevIndex = Math.floor(Math.random() * songs.length); } while (prevIndex === currentSongIndex && songs.length > 1);\r\n                    currentSongIndex = prevIndex;\r\n                    loadSong(currentSongIndex);\r\n                } else {\r\n                    let currentIndex = window[targetIndexKey];\r\n                    currentIndex = (currentIndex - 1 + targetPlaylist.length) % targetPlaylist.length;\r\n                    window[targetIndexKey] = currentIndex;\r\n\r\n                    if (playbackMode === 'selected-sequence') {\r\n                        loadSongFromPlaylist(targetPlaylist[currentIndex]);\r\n                    } else {\r\n                        loadSong(currentIndex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updatePlaylistUI() {\r\n                const actionsDiv = playlistElement.querySelector('.playlist-actions');\r\n                // åœ¨æ¸…ç©ºåˆ—è¡¨å‰ï¼Œå¦‚æœactionsDivå­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶ä»DOMä¸­ç§»é™¤ï¼Œç¨åå†æ·»åŠ å›å»\r\n                // è¿™æ ·å¯ä»¥é¿å…å®ƒè¢«innerHTML=''æ¸…é™¤æ‰ï¼ŒåŒæ—¶ç¡®ä¿å®ƒå§‹ç»ˆåœ¨åˆ—è¡¨é¡¹ä¹‹å\r\n                if (actionsDiv) actionsDiv.remove();\r\n\r\n\r\n                const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µä¼˜åŒ–æ€§èƒ½\r\n\r\n                songs.forEach((song, index) => {\r\n                    const listItem = document.createElement('li');\r\n\r\n                    const selectorIcon = document.createElement('span');\r\n                    selectorIcon.classList.add('song-selector-icon');\r\n                    selectorIcon.dataset.songId = song.id;\r\n                    if (currentSelectedPlaylist.some(s => s.id === song.id)) {\r\n                        selectorIcon.classList.add('selected');\r\n                    }\r\n                    selectorIcon.addEventListener('click', (e) => {\r\n                        e.stopPropagation();\r\n                        const songId = parseInt(selectorIcon.dataset.songId);\r\n                        const targetSong = songs.find(s => s.id === songId);\r\n                        const selectedIndex = currentSelectedPlaylist.findIndex(s => s.id === songId);\r\n\r\n                        if (selectedIndex > -1) {\r\n                            currentSelectedPlaylist.splice(selectedIndex, 1);\r\n                            selectorIcon.classList.remove('selected');\r\n                        } else {\r\n                            currentSelectedPlaylist.push(targetSong);\r\n                            selectorIcon.classList.add('selected');\r\n                        }\r\n                    });\r\n\r\n                    const songInfoDiv = document.createElement('div');\r\n                    songInfoDiv.classList.add('song-info');\r\n                    songInfoDiv.textContent = `${song.title} - ${song.artist}`; // ç¡®ä¿åˆ—è¡¨é¡¹ä¹Ÿæ˜¾ç¤ºartist\r\n                    songInfoDiv.addEventListener('click', () => {\r\n                        currentSongIndex = index;\r\n                        loadSong(currentSongIndex);\r\n                        if (playbackMode === 'selected-sequence') {\r\n                            playbackMode = 'sequence';\r\n                            updatePlaybackModeButton();\r\n                        }\r\n                    });\r\n\r\n                    listItem.appendChild(selectorIcon);\r\n                    listItem.appendChild(songInfoDiv);\r\n\r\n                    let isCurrentlyPlayingThisSong = false;\r\n                    const currentPlayingSong = (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length > 0) ? currentSelectedPlaylist[currentSelectedSongIndex] : songs[currentSongIndex];\r\n\r\n                    if (currentPlayingSong && currentPlayingSong.id === song.id) {\r\n                         isCurrentlyPlayingThisSong = true;\r\n                    }\r\n\r\n                    if (isCurrentlyPlayingThisSong) {\r\n                        listItem.classList.add('active');\r\n                    }\r\n                    fragment.appendChild(listItem);\r\n                });\r\n                playlistElement.innerHTML = ''; // æ¸…ç©ºæ—§çš„åˆ—è¡¨é¡¹\r\n                playlistElement.appendChild(fragment); // æ·»åŠ æ–°çš„åˆ—è¡¨é¡¹\r\n                if (actionsDiv) playlistElement.appendChild(actionsDiv); // å°†æŒ‰é’®åŒºåŸŸé‡æ–°åŠ åˆ°åˆ—è¡¨æœ«å°¾\r\n            }\r\n\r\n\r\n            function updateButtonStates() {\r\n                const targetPlaylist = playbackMode === 'selected-sequence' ? currentSelectedPlaylist : songs;\r\n                prevButton.disabled = targetPlaylist.length <= 1;\r\n                nextButton.disabled = targetPlaylist.length <= 1;\r\n            }\r\n\r\n            playlistToggle.addEventListener('click', () => {\r\n                playlistElement.classList.toggle('collapsed');\r\n                playlistToggle.classList.toggle('collapsed');\r\n                playlistTitleSpan.textContent = playlistElement.classList.contains('collapsed') ? ' â–º' : ' â–¼';\r\n            });\r\n\r\n            audioPlayer.addEventListener('ended', function() {\r\n                if (playbackMode === 'repeat-one' && currentSelectedPlaylist.length === 0) {\r\n                    // loop\r\n                } else if (playbackMode === 'selected-sequence' && currentSelectedPlaylist.length === 1) {\r\n                     loadSongFromPlaylist(currentSelectedPlaylist[currentSelectedSongIndex]);\r\n                }\r\n                else {\r\n                    playNextSongLogic();\r\n                }\r\n            });\r\n\r\n            if (songs.length > 0) {\r\n                songs.forEach((song, index) => song.id = index);\r\n                loadSong(currentSongIndex, false);\r\n                updatePlaybackModeButton();\r\n                playlistElement.classList.add('collapsed');\r\n                playlistToggle.classList.add('collapsed');\r\n                playlistTitleSpan.textContent = ' â–º';\r\n            } else {\r\n                currentSongTitleElement.textContent = \"æ’­æ”¾åˆ—è¡¨ä¸ºç©º\";\r\n                currentSongArtistElement.textContent = \"\";\r\n                audioPlayer.style.display = 'none';\r\n                document.querySelector('.playing-animation').style.display = 'none';\r\n                playlistToggle.style.display = 'none';\r\n                playbackModeButton.style.display = 'none';\r\n                if(playSelectedButton) playSelectedButton.style.display = 'none';\r\n                if(clearSelectionButton) clearSelectionButton.style.display = 'none';\r\n            }\r\n\r\n            prevButton.addEventListener('click', playPrevSongLogic);\r\n            nextButton.addEventListener('click', playNextSongLogic);\r\n\r\n            if ('IntersectionObserver' in window && thisPlayerElement) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && audioPlayer.paused && songs.length > 0) { /* Optional */ }\r\n                    });\r\n                });\r\n                observer.observe(thisPlayerElement);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n```\r\nâ€œå’”åš“â€”â€”â€\r\n\r\nè–¯ç‰‡ç¢è£‚çš„å£°éŸ³åœ¨å®‰é™çš„å§å®¤é‡Œæ ¼å¤–æ¸…æ™°ã€‚\r\n\r\nè°¢æ˜æœæ•´ä¸ªäººé™·åœ¨å¸¸ä¹æŸ”è½¯çš„åºŠä¸Šï¼Œåƒåªæ²¡æœ‰éª¨å¤´çš„ç‹ç‹¸ï¼Œä¸€æ¡è…¿æ‡’æ•£åœ°å±ˆèµ·ï¼Œå¦ä¸€æ¡è…¿éšæ„åœ°ä¼¸ç€ã€‚ä»–èº«ä¸Šç©¿ç€å®½å¤§çš„å±…å®¶å«è¡£ï¼Œæ‰‹é‡Œæ§ç€ä¸€è¢‹å¥¹ä¹°çš„èœ‚èœœé»„æ²¹å‘³è–¯ç‰‡ï¼Œæ­£ç™¾æ— èŠèµ–åœ°å¾€å˜´é‡Œå¡ç€ã€‚\r\n\r\nä»–é¢å‰ï¼Œæ˜¯å¸¸ä¹çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œå±å¹•ä¸Šæ­£æ’­æ”¾ç€ä¸€éƒ¨å‰§æƒ…ä¿—å¥—çš„ç‹—è¡€è¨€æƒ…å‰§ã€‚\r\n\r\nä»¥å‰ä»–å¯¹äººç±»è¿™ç§çº ç¼ ä¸æ¸…çš„æ„Ÿæƒ…æˆç å‘æ¥æ²¡ä»€ä¹ˆå…´è¶£ï¼Œä½†ç°åœ¨ï¼Œä»–å´çœ‹å¾—å¼‚å¸¸ä¸“æ³¨ã€‚\r\n\r\nå±å¹•ä¸Šï¼Œç”·ä¸»è§’æ­£å°†å¥³ä¸»è§’å¼ºåŠ¿åœ°æŒ‰åœ¨å¢™ä¸Šï¼Œä½å¤´ç´¢å»ã€‚é•œå¤´ç»™å¾—æå¤§ï¼Œæ°”æ°›è¢«èƒŒæ™¯éŸ³ä¹çƒ˜æ‰˜å¾—æ— æ¯”æš§æ˜§ã€‚\r\n\r\nè°¢æ˜æœçš„å’€åš¼åŠ¨ä½œæ…¢äº†ä¸‹æ¥ã€‚\r\n\r\nä»–å¤´é¡¶é‚£å¯¹æ¯›èŒ¸èŒ¸çš„ç‹ç‹¸è€³æœµä¸è‡ªè§‰åœ°æŠ–äº†æŠ–ï¼Œå°–ç«¯å¾®å¾®å‘çƒ«ã€‚\r\n\r\nä»–çœ‹ç€å±å¹•é‡Œå¥³ä¸»è§’é€æ¸è¿·ç¦»çš„çœ¼ç¥å’Œæ³›çº¢çš„è„¸é¢Šï¼Œåˆä½å¤´çœ‹äº†çœ‹è‡ªå·±ï¼Œå†è”æƒ³åˆ°å¸¸ä¹å¹³æ—¶é‚£å‰¯æ¸…å†·æ·¡ç„¶çš„æ ·å­ï¼Œä¸€ä¸ªå¿µå¤´ä¸å—æ§åˆ¶åœ°å†’äº†å‡ºæ¥ã€‚\r\n\r\nâ€œåŸæ¥å¸¸ä¹ç°åœ¨å–œæ¬¢è¿™ä¸ªè°ƒè°ƒå—â€ä»–å¿ƒé‡Œå°å£°å˜€å’•ç€ï¼Œè„¸é¢Šä¹Ÿè·Ÿç€æŸ“ä¸Šäº†ä¸€å±‚å¯ç–‘çš„è–„çº¢ã€‚ä»–ä¸‹æ„è¯†åœ°å°†å«è¡£çš„é¢†å£æ‰¯äº†æ‰¯ï¼Œæ„Ÿè§‰æœ‰äº›ç‡¥çƒ­ã€‚\r\n\r\nå°±åœ¨è¿™æ—¶ï¼Œç„å…³å¤„ä¼ æ¥äº†é’¥åŒ™å¼€é”çš„å£°éŸ³ã€‚\r\n\r\nâ€œæˆ‘å›æ¥äº†ã€‚â€\r\n\r\nå¸¸ä¹çš„å£°éŸ³æ¸…æ¸…å†·å†·åœ°ä¼ æ¥ã€‚å¥¹æ¢å¥½é‹ï¼Œèµ°è¿›ä¸€ç‰‡æ¼†é»‘çš„å®¢å…ï¼ŒåŠ¨ä½œå¾®å¾®ä¸€é¡¿ã€‚å¥¹ä¼¸æ‰‹æŒ‰ä¸‹å¼€å…³ï¼Œæ˜äº®çš„ç¯å…‰ç¬é—´é©±æ•£äº†é»‘æš—ã€‚\r\n\r\nâ€œæ˜æœï¼Ÿâ€\r\n\r\næ²¡æœ‰å›åº”ã€‚\r\n\r\nå¥¹çš„ç›®å…‰è½åœ¨è‡ªå·±åŠæ©çš„æˆ¿é—¨ä¸Šï¼Œä¸€ç¼•æš–é»„è‰²çš„ç¯å…‰æ­£ä»é—¨ç¼é‡Œå›ºæ‰§åœ°é€å‡ºæ¥ã€‚\r\n\r\nâ€œè¿™å®¶ä¼™åˆåœ¨å¹²å˜›â€å¥¹å¿ƒé‡Œå˜€å’•ä¸€å¥ï¼Œæ”¾è½»è„šæ­¥ï¼Œæ‚„æ— å£°æ¯åœ°å‡‘åˆ°é—¨è¾¹ï¼Œåƒåªå¥½å¥‡çš„çŒ«ï¼Œæƒ³é€è¿‡é—¨ç¼çœ‹ä¸ªç©¶ç«Ÿã€‚\r\n\r\nåªä¸€çœ¼ï¼Œå¥¹å°±æ„£ä½äº†ã€‚\r\n\r\nåªè§è°¢æ˜æœæ­£ååœ¨å¥¹çš„åºŠä¸Šï¼Œå±…å®¶å«è¡£çš„é¢†å£è¢«ä»–æ‰¯å¾—åŠå¼€ï¼Œæ¾æ¾å®å®åœ°æŒ‚åœ¨è‚©ä¸Šï¼Œéœ²å‡ºäº†çº¿æ¡åˆ†æ˜çš„é”éª¨å’Œä¸€æˆªç´§å®å¥½çœ‹çš„äººé±¼çº¿ã€‚ä»–è„¸ä¸Šå¸¦ç€ä¸æ­£å¸¸çš„çº¢æ™•ï¼Œé‚£å¯¹æ¯›èŒ¸èŒ¸çš„ç‹ç‹¸è€³æœµæ­£ç´§å¼ åœ°ä¸€æŠ–ä¸€æŠ–ï¼Œåƒæ˜¯å—æƒŠçš„è´è¶ç¿…è†€ã€‚\r\n\r\nä»–åƒé”™è¯äº†ï¼Ÿ\r\n\r\nå¸¸ä¹å¸¦ç€æ»¡è…¹çš„ç–‘æƒ‘ï¼Œè½»è½»æ¨å¼€äº†é—¨ã€‚\r\n\r\nå¬åˆ°åŠ¨é™ï¼Œè°¢æ˜æœçŒ›åœ°å›ç¥ï¼Œçœ‹åˆ°æ˜¯å¥¹ï¼Œçœ¼ç¥å…ˆæ˜¯ä¸€æ…Œï¼Œéšå³åˆåƒæ˜¯æƒ³èµ·äº†ä»€ä¹ˆï¼ŒåŠªåŠ›é•‡å®šä¸‹æ¥ã€‚ä»–æœ‰äº›æ— å¥ˆï¼Œæ€ä¹ˆè¿™ä¸€ä¸–çš„å¸¸ä¹è¿˜æ˜¯è¿™ä¹ˆä¸è§£é£æƒ…ï¼Œå°±ä¸èƒ½æŒ‰å¥—è·¯æ¥å—ã€‚\r\n\r\nä»–æ·±å¸ä¸€å£æ°”ï¼ŒåŠªåŠ›å›å¿†ç€åˆšæ‰åœ¨å‰§é‡Œå­¦åˆ°çš„æŠ€å·§ï¼Œå¯¹ç€å¸¸ä¹æ‘†å‡ºäº†ä¸€ä¸ªä»–è‡ªè®¤ä¸ºæœ€æœ‰é­…åŠ›çš„è¡¨æƒ…ï¼Œçœ¼ç¥æ•…ä½œæ·±æ²‰ï¼Œå£°éŸ³ä¹Ÿåˆ»æ„å‹ä½äº†äº›ï¼šâ€œå®å®ï¼Œæˆ‘â€¦â€\r\n\r\nè¯è¿˜æ²¡è¯´å®Œï¼Œå¸¸ä¹å°±ç¬‘äº†ã€‚\r\n\r\né‚£ä¸€å£°è½»ç¬‘ï¼Œæ¸…è„†åˆå¸¦ç€å‡ åˆ†äº†ç„¶çš„æˆè°‘ï¼Œç¬é—´å‡»ç¢äº†ä»–å¥½ä¸å®¹æ˜“è¥é€ èµ·æ¥çš„æ°›å›´ã€‚å¥¹çš„ä½™å…‰ç¥è§äº†ç”µè„‘å±å¹•ä¸Šè¿˜æš‚åœåœ¨äº²å¯†ç”»é¢çš„å‰§é›†ï¼Œç«‹åˆ»ä»€ä¹ˆéƒ½æ˜ç™½äº†ã€‚\r\n\r\nåˆæ˜¯ä»å“ªé‡Œå­¦æ¥çš„è¿™äº›ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿ã€‚\r\n\r\nå¥¹æ²¡æœ‰è¯´è¯ï¼Œåªæ˜¯è¿ˆå¼€è„šæ­¥ï¼Œä¸€æ­¥ï¼Œä¸€æ­¥åœ°æœä»–èµ°è¿‘ã€‚\r\n\r\nè°¢æ˜æœçœ‹ç€å¥¹èµ°æ¥ï¼Œçœ‹ç€å¥¹å˜´è§’é‚£æŠ¹ä¼¼ç¬‘éç¬‘çš„å¼§åº¦ï¼Œå–‰ç»“ä¸å—æ§åˆ¶åœ°ä¸Šä¸‹æ»šåŠ¨äº†ä¸€ä¸‹ã€‚ç©ºæ°”ä»¿ä½›å‡å›ºäº†ï¼Œä»–å¿ƒé‡Œé‚£ä»½æƒ³è¦å®è·µçš„æœŸå¾…ï¼Œä¸çŸ¥ä¸è§‰é—´è¢«ä¸€ç§æ›´å¼ºçƒˆçš„ã€æœªçŸ¥çš„ç´§å¼ æ„Ÿæ‰€å–ä»£ã€‚\r\n\r\nå¸¸ä¹åœ¨ä»–é¢å‰ç«™å®šï¼Œå±…é«˜ä¸´ä¸‹åœ°çœ‹ç€ä»–ã€‚\r\n\r\nä¸‹ä¸€ç§’ï¼Œå¥¹ä¼¸å‡ºæ‰‹ï¼ŒæŒ‡å°–ç²¾å‡†åœ°å‹¾ä½äº†ä»–è„–å­ä¸Šé‚£ä¸ªä½œä¸ºè£…é¥°çš„é»‘è‰²é¡¹åœˆï¼Œç„¶åçŒ›åœ°å‘ä¸‹ä¸€æ‰¯â€”â€”\r\n\r\nâ€œå””ï¼â€\r\n\r\nè°¢æ˜æœèº²é—ªä¸åŠï¼Œæ•´ä¸ªäººè¢«è¿™è‚¡åŠ›é“å¸¦ç€å¾€å‰ä¸€æ ½ï¼Œç¬é—´æ‹‰è¿‘äº†ä¸¤äººä¹‹é—´çš„è·ç¦»ã€‚\r\n\r\næ°”æ°›é™¡ç„¶å˜å¾—æ»šçƒ«è€Œæš§æ˜§ã€‚\r\n\r\nä»–ç”šè‡³èƒ½é—»åˆ°å¥¹èº«ä¸Šå¸¦å›çš„ã€å±äºå¤œæ™šå¾®å‡‰ç©ºæ°”çš„å‘³é“ï¼Œæ··åˆç€å¥¹ç‹¬æœ‰çš„æ·¡æ·¡ä½“é¦™ã€‚ä»–ç´§å¼ å¾—å¤§æ°”éƒ½ä¸æ•¢å‡ºï¼Œå¿ƒè„åœ¨èƒ¸è…”é‡Œç‹‚è·³ï¼Œè„‘å­é‡Œä¸€ç‰‡ç©ºç™½ï¼Œåªå‰©ä¸‹æœ€åä¸€ä¸ªå¿µå¤´ã€‚\r\n\r\n`æœç„¶ä¸èƒ½ä¹±å­¦`\r\n\r\næˆ¿é—´é‡Œå®‰é™æäº†ï¼Œå®‰é™åˆ°åªèƒ½å¬è§å½¼æ­¤æœ‰äº›å¤±åºçš„å¿ƒè·³å’Œäº¤é”™çš„å‘¼å¸å£°ã€‚",""],"swipe_info":[{"send_date":"January 8, 2026 1:45am","extra":{}},{"send_date":"January 8, 2026 1:45am","extra":{"token_count":8604}},{"send_date":"January 8, 2026 1:45am","extra":{"token_count":7646}},{"send_date":"January 8, 2026 1:45am","extra":{"token_count":7418}},{"send_date":"January 8, 2026 1:45am","extra":{"token_count":6728}},{"send_date":"January 8, 2026 1:45am","extra":{"token_count":6695}},{"send_date":"January 8, 2026 1:45am","extra":{"token_count":6743}},{"send_date":"January 8, 2026 1:45am","extra":{"token_count":6754}},{"send_date":"January 8, 2026 1:45am","extra":{"token_count":6705}},{"send_date":"January 8, 2026 1:45am","extra":{"token_count":9104}},{"send_date":"January 8, 2026 1:45am","extra":{"token_count":7466}},{"send_date":"January 8, 2026 1:45am","extra":{}}],"variables":{"0":{},"1":{},"2":{},"3":{},"4":{},"5":{},"6":{},"7":{},"8":{},"9":{},"10":{}},"is_ejs_processed":[true,true,true,true,true,true,true,true,true,true,true]}